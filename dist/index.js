"use strict";var Eh=Object.create;var wn=Object.defineProperty;var xh=Object.getOwnPropertyDescriptor;var wh=Object.getOwnPropertyNames;var Sh=Object.getPrototypeOf,Ch=Object.prototype.hasOwnProperty;var z=(e,t)=>()=>(e&&(t=e(e=0)),t);var R=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),dr=(e,t)=>{for(var r in t)wn(e,r,{get:t[r],enumerable:!0})},ba=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of wh(t))!Ch.call(e,o)&&o!==r&&wn(e,o,{get:()=>t[o],enumerable:!(n=xh(t,o))||n.enumerable});return e};var Ae=(e,t,r)=>(r=e!=null?Eh(Sh(e)):{},ba(t||!e||!e.__esModule?wn(r,"default",{value:e,enumerable:!0}):r,e)),Vr=e=>ba(wn({},"__esModule",{value:!0}),e);var Sn=R(lr=>{"use strict";Object.defineProperty(lr,"__esModule",{value:!0});lr.toCommandProperties=lr.toCommandValue=void 0;function vh(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}lr.toCommandValue=vh;function _h(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}lr.toCommandProperties=_h});var Na=R(de=>{"use strict";var Rh=de&&de.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ah=de&&de.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),bh=de&&de.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Rh(t,e,r);return Ah(t,e),t};Object.defineProperty(de,"__esModule",{value:!0});de.issue=de.issueCommand=void 0;var Ih=bh(require("os")),Ta=Sn();function Oa(e,t,r){let n=new ws(e,t,r);process.stdout.write(n.toString()+Ih.EOL)}de.issueCommand=Oa;function Th(e,t=""){Oa(e,{},t)}de.issue=Th;var Ia="::",ws=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=Ia+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${Nh(o)}`)}}return t+=`${Ia}${Oh(this.message)}`,t}};function Oh(e){return Ta.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Nh(e){return Ta.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function Hr(){return Cn>vn.length-16&&(Pa.default.randomFillSync(vn),Cn=0),vn.slice(Cn,Cn+=16)}var Pa,vn,Cn,Ss=z(()=>{Pa=Ae(require("crypto")),vn=new Uint8Array(256),Cn=vn.length});var Da,ka=z(()=>{Da=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Ph(e){return typeof e=="string"&&Da.test(e)}var dt,Gr=z(()=>{ka();dt=Ph});function Dh(e,t=0){let r=(H[e[t+0]]+H[e[t+1]]+H[e[t+2]]+H[e[t+3]]+"-"+H[e[t+4]]+H[e[t+5]]+"-"+H[e[t+6]]+H[e[t+7]]+"-"+H[e[t+8]]+H[e[t+9]]+"-"+H[e[t+10]]+H[e[t+11]]+H[e[t+12]]+H[e[t+13]]+H[e[t+14]]+H[e[t+15]]).toLowerCase();if(!dt(r))throw TypeError("Stringified UUID is invalid");return r}var H,lt,jr=z(()=>{Gr();H=[];for(let e=0;e<256;++e)H.push((e+256).toString(16).substr(1));lt=Dh});function kh(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||Fa,i=e.clockseq!==void 0?e.clockseq:Cs;if(s==null||i==null){let p=e.random||(e.rng||Hr)();s==null&&(s=Fa=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),i==null&&(i=Cs=(p[6]<<8|p[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:_s+1,d=a-vs+(c-_s)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>vs)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");vs=a,_s=c,Cs=i,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;let u=a/4294967296*1e4&268435455;o[n++]=u>>>8&255,o[n++]=u&255,o[n++]=u>>>24&15|16,o[n++]=u>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let p=0;p<6;++p)o[n+p]=s[p];return t||lt(o)}var Fa,Cs,vs,_s,Ua,$a=z(()=>{Ss();jr();vs=0,_s=0;Ua=kh});function Fh(e){if(!dt(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var _n,Rs=z(()=>{Gr();_n=Fh});function Uh(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function Rn(e,t,r){function n(o,s,i,a){if(typeof o=="string"&&(o=Uh(o)),typeof s=="string"&&(s=_n(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){a=a||0;for(let d=0;d<16;++d)i[a+d]=c[d];return i}return lt(c)}try{n.name=e}catch{}return n.DNS=$h,n.URL=Lh,n}var $h,Lh,As=z(()=>{jr();Rs();$h="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Lh="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Mh(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),La.default.createHash("md5").update(e).digest()}var La,Ma,Ba=z(()=>{La=Ae(require("crypto"));Ma=Mh});var Bh,qa,za=z(()=>{As();Ba();Bh=Rn("v3",48,Ma),qa=Bh});function qh(e,t,r){e=e||{};let n=e.random||(e.rng||Hr)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return lt(n)}var An,Va=z(()=>{Ss();jr();An=qh});function zh(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),Ha.default.createHash("sha1").update(e).digest()}var Ha,Ga,ja=z(()=>{Ha=Ae(require("crypto"));Ga=zh});var Vh,Wa,Ka=z(()=>{As();ja();Vh=Rn("v5",80,Ga),Wa=Vh});var Ya,Ja=z(()=>{Ya="00000000-0000-0000-0000-000000000000"});function Hh(e){if(!dt(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Xa,Qa=z(()=>{Gr();Xa=Hh});var Za={};dr(Za,{NIL:()=>Ya,parse:()=>_n,stringify:()=>lt,v1:()=>Ua,v3:()=>qa,v4:()=>An,v5:()=>Wa,validate:()=>dt,version:()=>Xa});var bs=z(()=>{$a();za();Va();Ka();Ja();Qa();Gr();jr();Rs()});var nc=R(le=>{"use strict";var Gh=le&&le.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jh=le&&le.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),tc=le&&le.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Gh(t,e,r);return jh(t,e),t};Object.defineProperty(le,"__esModule",{value:!0});le.prepareKeyValueMessage=le.issueFileCommand=void 0;var ec=tc(require("fs")),Is=tc(require("os")),Wh=(bs(),Vr(Za)),rc=Sn();function Kh(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!ec.existsSync(r))throw new Error(`Missing file at path: ${r}`);ec.appendFileSync(r,`${rc.toCommandValue(t)}${Is.EOL}`,{encoding:"utf8"})}le.issueFileCommand=Kh;function Yh(e,t){let r=`ghadelimiter_${Wh.v4()}`,n=rc.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${Is.EOL}${n}${Is.EOL}${r}`}le.prepareKeyValueMessage=Yh});var sc=R(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.checkBypass=ur.getProxyUrl=void 0;function Jh(e){let t=e.protocol==="https:";if(oc(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}ur.getProxyUrl=Jh;function oc(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let o of t.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(n.some(s=>s===o))return!0;return!1}ur.checkBypass=oc});var dc=R(pr=>{"use strict";var g0=require("net"),Xh=require("tls"),Ts=require("http"),ic=require("https"),Qh=require("events"),E0=require("assert"),Zh=require("util");pr.httpOverHttp=ey;pr.httpsOverHttp=ty;pr.httpOverHttps=ry;pr.httpsOverHttps=ny;function ey(e){var t=new We(e);return t.request=Ts.request,t}function ty(e){var t=new We(e);return t.request=Ts.request,t.createSocket=ac,t.defaultPort=443,t}function ry(e){var t=new We(e);return t.request=ic.request,t}function ny(e){var t=new We(e);return t.request=ic.request,t.createSocket=ac,t.defaultPort=443,t}function We(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||Ts.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,s,i){for(var a=cc(o,s,i),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===a.host&&l.port===a.port){t.requests.splice(c,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}Zh.inherits(We,Qh.EventEmitter);We.prototype.addRequest=function(t,r,n,o){var s=this,i=Os({request:t},s.options,cc(r,n,o));if(s.sockets.length>=this.maxSockets){s.requests.push(i);return}s.createSocket(i,function(a){a.on("free",c),a.on("close",d),a.on("agentRemove",d),t.onSocket(a);function c(){s.emit("free",a,i)}function d(l){s.removeSocket(a),a.removeListener("free",c),a.removeListener("close",d),a.removeListener("agentRemove",d)}})};We.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var s=Os({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),ut("making CONNECT request");var i=n.request(s);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",c),i.once("connect",d),i.once("error",l),i.end();function a(u){u.upgrade=!0}function c(u,p,m){process.nextTick(function(){d(u,p,m)})}function d(u,p,m){if(i.removeAllListeners(),p.removeAllListeners(),u.statusCode!==200){ut("tunneling socket could not be established, statusCode=%d",u.statusCode),p.destroy();var f=new Error("tunneling socket could not be established, statusCode="+u.statusCode);f.code="ECONNRESET",t.request.emit("error",f),n.removeSocket(o);return}if(m.length>0){ut("got illegal response body from proxy"),p.destroy();var f=new Error("got illegal response body from proxy");f.code="ECONNRESET",t.request.emit("error",f),n.removeSocket(o);return}return ut("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=p,r(p)}function l(u){i.removeAllListeners(),ut(`tunneling socket could not be established, cause=%s
`,u.message,u.stack);var p=new Error("tunneling socket could not be established, cause="+u.message);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(o)}};We.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function ac(e,t){var r=this;We.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=Os({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),i=Xh.connect(0,s);r.sockets[r.sockets.indexOf(n)]=i,t(i)})}function cc(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function Os(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];n[a]!==void 0&&(e[a]=n[a])}}return e}var ut;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?ut=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:ut=function(){};pr.debug=ut});var uc=R((w0,lc)=>{lc.exports=dc()});var mc=R(I=>{"use strict";var oy=I&&I.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),sy=I&&I.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Pn=I&&I.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&oy(t,e,r);return sy(t,e),t},V=I&&I.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(I,"__esModule",{value:!0});I.HttpClient=I.isHttps=I.HttpClientResponse=I.HttpClientError=I.getProxyUrl=I.MediaTypes=I.Headers=I.HttpCodes=void 0;var bn=Pn(require("http")),Ns=Pn(require("https")),pc=Pn(sc()),In=Pn(uc()),Ce;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(Ce=I.HttpCodes||(I.HttpCodes={}));var J;(function(e){e.Accept="accept",e.ContentType="content-type"})(J=I.Headers||(I.Headers={}));var pt;(function(e){e.ApplicationJson="application/json"})(pt=I.MediaTypes||(I.MediaTypes={}));function iy(e){let t=pc.getProxyUrl(new URL(e));return t?t.href:""}I.getProxyUrl=iy;var ay=[Ce.MovedPermanently,Ce.ResourceMoved,Ce.SeeOther,Ce.TemporaryRedirect,Ce.PermanentRedirect],cy=[Ce.BadGateway,Ce.ServiceUnavailable,Ce.GatewayTimeout],dy=["OPTIONS","GET","DELETE","HEAD"],ly=10,uy=5,On=class e extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,e.prototype)}};I.HttpClientError=On;var Nn=class{constructor(t){this.message=t}readBody(){return V(this,void 0,void 0,function*(){return new Promise(t=>V(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};I.HttpClientResponse=Nn;function py(e){return new URL(e).protocol==="https:"}I.isHttps=py;var Ps=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return V(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return V(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return V(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return V(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return V(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return V(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return V(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return V(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return V(this,void 0,void 0,function*(){r[J.Accept]=this._getExistingOrDefaultHeader(r,J.Accept,pt.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return V(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[J.Accept]=this._getExistingOrDefaultHeader(n,J.Accept,pt.ApplicationJson),n[J.ContentType]=this._getExistingOrDefaultHeader(n,J.ContentType,pt.ApplicationJson);let s=yield this.post(t,o,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return V(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[J.Accept]=this._getExistingOrDefaultHeader(n,J.Accept,pt.ApplicationJson),n[J.ContentType]=this._getExistingOrDefaultHeader(n,J.ContentType,pt.ApplicationJson);let s=yield this.put(t,o,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return V(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[J.Accept]=this._getExistingOrDefaultHeader(n,J.Accept,pt.ApplicationJson),n[J.ContentType]=this._getExistingOrDefaultHeader(n,J.ContentType,pt.ApplicationJson);let s=yield this.patch(t,o,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,o){return V(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),i=this._prepareRequest(t,s,o),a=this._allowRetries&&dy.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(i,n),d&&d.message&&d.message.statusCode===Ce.Unauthorized){let u;for(let p of this.handlers)if(p.canHandleAuthentication(d)){u=p;break}return u?u.handleAuthentication(this,i,n):d}let l=this._maxRedirects;for(;d.message.statusCode&&ay.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let u=d.message.headers.location;if(!u)break;let p=new URL(u);if(s.protocol==="https:"&&s.protocol!==p.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),p.hostname!==s.hostname)for(let m in o)m.toLowerCase()==="authorization"&&delete o[m];i=this._prepareRequest(t,p,o),d=yield this.requestRaw(i,n),l--}if(!d.message.statusCode||!cy.includes(d.message.statusCode))return d;c+=1,c<a&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<a);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return V(this,void 0,void 0,function*(){return new Promise((n,o)=>{function s(i,a){i?o(i):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function s(c,d){o||(o=!0,n(c,d))}let i=t.httpModule.request(t.options,c=>{let d=new Nn(c);s(void 0,d)}),a;i.on("socket",c=>{a=c}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),s(new Error(`Request timeout: ${t.options.path}`))}),i.on("error",function(c){s(c)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let s=o.parsedUrl.protocol==="https:";o.httpModule=s?Ns:bn;let i=s?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):i,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Tn(this.requestOptions.headers),Tn(t||{})):Tn(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=Tn(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=pc.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let s=t.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||bn.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,d=n.protocol==="https:";s?c=d?In.httpsOverHttps:In.httpsOverHttp:c=d?In.httpOverHttps:In.httpOverHttp,r=c(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=s?new Ns.Agent(a):new bn.Agent(a),this._agent=r}return r||(r=s?Ns.globalAgent:bn.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return V(this,void 0,void 0,function*(){t=Math.min(ly,t);let r=uy*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return V(this,void 0,void 0,function*(){return new Promise((n,o)=>V(this,void 0,void 0,function*(){let s=t.message.statusCode||0,i={statusCode:s,result:null,headers:{}};s===Ce.NotFound&&n(i);function a(l,u){if(typeof u=="string"){let p=new Date(u);if(!isNaN(p.valueOf()))return p}return u}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(r&&r.deserializeDates?c=JSON.parse(d,a):c=JSON.parse(d),i.result=c),i.headers=t.message.headers}catch{}if(s>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${s})`;let u=new On(l,s);u.result=i.result,o(u)}else n(i)}))})}};I.HttpClient=Ps;var Tn=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var fc=R(be=>{"use strict";var Us=be&&be.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(be,"__esModule",{value:!0});be.PersonalAccessTokenCredentialHandler=be.BearerCredentialHandler=be.BasicCredentialHandler=void 0;var Ds=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Us(this,void 0,void 0,function*(){throw new Error("not implemented")})}};be.BasicCredentialHandler=Ds;var ks=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return Us(this,void 0,void 0,function*(){throw new Error("not implemented")})}};be.BearerCredentialHandler=ks;var Fs=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return Us(this,void 0,void 0,function*(){throw new Error("not implemented")})}};be.PersonalAccessTokenCredentialHandler=Fs});var gc=R(mr=>{"use strict";var hc=mr&&mr.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(mr,"__esModule",{value:!0});mr.OidcClient=void 0;var my=mc(),fy=fc(),yc=fr(),$s=class e{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new my.HttpClient("actions/oidc-client",[new fy.BearerCredentialHandler(e.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return hc(this,void 0,void 0,function*(){let s=(r=(yield e.createHttpClient().getJson(t).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return hc(this,void 0,void 0,function*(){try{let r=e.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}yc.debug(`ID token url is ${r}`);let n=yield e.getCall(r);return yc.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};mr.OidcClient=$s});var qs=R(Z=>{"use strict";var Ls=Z&&Z.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Z,"__esModule",{value:!0});Z.summary=Z.markdownSummary=Z.SUMMARY_DOCS_URL=Z.SUMMARY_ENV_VAR=void 0;var hy=require("os"),Ms=require("fs"),{access:yy,appendFile:gy,writeFile:Ey}=Ms.promises;Z.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";Z.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Bs=class{constructor(){this._buffer=""}filePath(){return Ls(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[Z.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${Z.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield yy(t,Ms.constants.R_OK|Ms.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([s,i])=>` ${s}="${i}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return Ls(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(r?Ey:gy)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return Ls(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(hy.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(i=>this.wrap("li",i)).join(""),s=this.wrap(n,o);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(o=>{let s=o.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:c,colspan:d,rowspan:l}=i,u=a?"th":"td",p=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(u,c,p)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:s}=n||{},i=Object.assign(Object.assign({},o&&{width:o}),s&&{height:s}),a=this.wrap("img",null,Object.assign({src:t,alt:r},i));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(o,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Ec=new Bs;Z.markdownSummary=Ec;Z.summary=Ec});var xc=R(ee=>{"use strict";var xy=ee&&ee.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),wy=ee&&ee.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Sy=ee&&ee.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&xy(t,e,r);return wy(t,e),t};Object.defineProperty(ee,"__esModule",{value:!0});ee.toPlatformPath=ee.toWin32Path=ee.toPosixPath=void 0;var Cy=Sy(require("path"));function vy(e){return e.replace(/[\\]/g,"/")}ee.toPosixPath=vy;function _y(e){return e.replace(/[/]/g,"\\")}ee.toWin32Path=_y;function Ry(e){return e.replace(/[/\\]/g,Cy.sep)}ee.toPlatformPath=Ry});var fr=R(g=>{"use strict";var Ay=g&&g.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),by=g&&g.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),wc=g&&g.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Ay(t,e,r);return by(t,e),t},Sc=g&&g.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(g,"__esModule",{value:!0});g.getIDToken=g.getState=g.saveState=g.group=g.endGroup=g.startGroup=g.info=g.notice=g.warning=g.error=g.debug=g.isDebug=g.setFailed=g.setCommandEcho=g.setOutput=g.getBooleanInput=g.getMultilineInput=g.getInput=g.addPath=g.setSecret=g.exportVariable=g.ExitCode=void 0;var ue=Na(),Yt=nc(),hr=Sn(),Cc=wc(require("os")),Iy=wc(require("path")),Ty=gc(),vc;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(vc=g.ExitCode||(g.ExitCode={}));function Oy(e,t){let r=hr.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return Yt.issueFileCommand("ENV",Yt.prepareKeyValueMessage(e,t));ue.issueCommand("set-env",{name:e},r)}g.exportVariable=Oy;function Ny(e){ue.issueCommand("add-mask",{},e)}g.setSecret=Ny;function Py(e){process.env.GITHUB_PATH||""?Yt.issueFileCommand("PATH",e):ue.issueCommand("add-path",{},e),process.env.PATH=`${e}${Iy.delimiter}${process.env.PATH}`}g.addPath=Py;function zs(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}g.getInput=zs;function Dy(e,t){let r=zs(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}g.getMultilineInput=Dy;function ky(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=zs(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}g.getBooleanInput=ky;function Fy(e,t){if(process.env.GITHUB_OUTPUT||"")return Yt.issueFileCommand("OUTPUT",Yt.prepareKeyValueMessage(e,t));process.stdout.write(Cc.EOL),ue.issueCommand("set-output",{name:e},hr.toCommandValue(t))}g.setOutput=Fy;function Uy(e){ue.issue("echo",e?"on":"off")}g.setCommandEcho=Uy;function $y(e){process.exitCode=vc.Failure,_c(e)}g.setFailed=$y;function Ly(){return process.env.RUNNER_DEBUG==="1"}g.isDebug=Ly;function My(e){ue.issueCommand("debug",{},e)}g.debug=My;function _c(e,t={}){ue.issueCommand("error",hr.toCommandProperties(t),e instanceof Error?e.toString():e)}g.error=_c;function By(e,t={}){ue.issueCommand("warning",hr.toCommandProperties(t),e instanceof Error?e.toString():e)}g.warning=By;function qy(e,t={}){ue.issueCommand("notice",hr.toCommandProperties(t),e instanceof Error?e.toString():e)}g.notice=qy;function zy(e){process.stdout.write(e+Cc.EOL)}g.info=zy;function Rc(e){ue.issue("group",e)}g.startGroup=Rc;function Ac(){ue.issue("endgroup")}g.endGroup=Ac;function Vy(e,t){return Sc(this,void 0,void 0,function*(){Rc(e);let r;try{r=yield t()}finally{Ac()}return r})}g.group=Vy;function Hy(e,t){if(process.env.GITHUB_STATE||"")return Yt.issueFileCommand("STATE",Yt.prepareKeyValueMessage(e,t));ue.issueCommand("save-state",{name:e},hr.toCommandValue(t))}g.saveState=Hy;function Gy(e){return process.env[`STATE_${e}`]||""}g.getState=Gy;function jy(e){return Sc(this,void 0,void 0,function*(){return yield Ty.OidcClient.getIDToken(e)})}g.getIDToken=jy;var Wy=qs();Object.defineProperty(g,"summary",{enumerable:!0,get:function(){return Wy.summary}});var Ky=qs();Object.defineProperty(g,"markdownSummary",{enumerable:!0,get:function(){return Ky.markdownSummary}});var Vs=xc();Object.defineProperty(g,"toPosixPath",{enumerable:!0,get:function(){return Vs.toPosixPath}});Object.defineProperty(g,"toWin32Path",{enumerable:!0,get:function(){return Vs.toWin32Path}});Object.defineProperty(g,"toPlatformPath",{enumerable:!0,get:function(){return Vs.toPlatformPath}})});var Js={};dr(Js,{__assign:()=>Ks,__asyncDelegator:()=>yg,__asyncGenerator:()=>hg,__asyncValues:()=>gg,__await:()=>Wr,__awaiter:()=>dg,__classPrivateFieldGet:()=>Sg,__classPrivateFieldSet:()=>Cg,__createBinding:()=>ug,__decorate:()=>ig,__exportStar:()=>pg,__extends:()=>og,__generator:()=>lg,__importDefault:()=>wg,__importStar:()=>xg,__makeTemplateObject:()=>Eg,__metadata:()=>cg,__param:()=>ag,__read:()=>Tc,__rest:()=>sg,__spread:()=>mg,__spreadArrays:()=>fg,__values:()=>Ys});function og(e,t){Ws(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function sg(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function ig(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function ag(e,t){return function(r,n){t(r,n,e)}}function cg(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function dg(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function lg(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function ug(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function pg(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Ys(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function mg(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Tc(arguments[t]));return e}function fg(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function Wr(e){return this instanceof Wr?(this.v=e,this):new Wr(e)}function hg(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(p){n[p]&&(o[p]=function(m){return new Promise(function(f,E){s.push([p,m,f,E])>1||a(p,m)})})}function a(p,m){try{c(n[p](m))}catch(f){u(s[0][3],f)}}function c(p){p.value instanceof Wr?Promise.resolve(p.value.v).then(d,l):u(s[0][2],p)}function d(p){a("next",p)}function l(p){a("throw",p)}function u(p,m){p(m),s.shift(),s.length&&a(s[0][0],s[0][1])}}function yg(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:Wr(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function gg(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Ys=="function"?Ys(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function Eg(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function xg(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function wg(e){return e&&e.__esModule?e:{default:e}}function Sg(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function Cg(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var Ws,Ks,Xs=z(()=>{Ws=function(e,t){return Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Ws(e,t)};Ks=function(){return Ks=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Ks.apply(this,arguments)}});var Oc,Nc,Pc=z(()=>{Oc=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},Nc=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let i="%"+[o,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t}});function Dc(e){return new TextEncoder().encode(e)}function kc(e){return new TextDecoder("utf-8").decode(e)}var Fc=z(()=>{});var Uc={};dr(Uc,{fromUtf8:()=>vg,toUtf8:()=>_g});var vg,_g,$c=z(()=>{Pc();Fc();vg=e=>typeof TextEncoder=="function"?Dc(e):Oc(e),_g=e=>typeof TextDecoder=="function"?kc(e):Nc(e)});var Lc=R(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.convertToBuffer=void 0;var Rg=($c(),Vr(Uc)),Ag=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:Rg.fromUtf8;function bg(e){return e instanceof Uint8Array?e:typeof e=="string"?Ag(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}kn.convertToBuffer=bg});var Mc=R(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.isEmptyData=void 0;function Ig(e){return typeof e=="string"?e.length===0:e.byteLength===0}Fn.isEmptyData=Ig});var Bc=R(Un=>{"use strict";Object.defineProperty(Un,"__esModule",{value:!0});Un.numToUint8=void 0;function Tg(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}Un.numToUint8=Tg});var qc=R($n=>{"use strict";Object.defineProperty($n,"__esModule",{value:!0});$n.uint32ArrayFrom=void 0;function Og(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}$n.uint32ArrayFrom=Og});var Qs=R(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.uint32ArrayFrom=Te.numToUint8=Te.isEmptyData=Te.convertToBuffer=void 0;var Ng=Lc();Object.defineProperty(Te,"convertToBuffer",{enumerable:!0,get:function(){return Ng.convertToBuffer}});var Pg=Mc();Object.defineProperty(Te,"isEmptyData",{enumerable:!0,get:function(){return Pg.isEmptyData}});var Dg=Bc();Object.defineProperty(Te,"numToUint8",{enumerable:!0,get:function(){return Dg.numToUint8}});var kg=qc();Object.defineProperty(Te,"uint32ArrayFrom",{enumerable:!0,get:function(){return kg.uint32ArrayFrom}})});var Hc=R(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.AwsCrc32=void 0;var zc=(Xs(),Vr(Js)),Zs=Qs(),Vc=Mn(),Fg=function(){function e(){this.crc32=new Vc.Crc32}return e.prototype.update=function(t){(0,Zs.isEmptyData)(t)||this.crc32.update((0,Zs.convertToBuffer)(t))},e.prototype.digest=function(){return zc.__awaiter(this,void 0,void 0,function(){return zc.__generator(this,function(t){return[2,(0,Zs.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Vc.Crc32},e}();Ln.AwsCrc32=Fg});var Mn=R(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.AwsCrc32=gt.Crc32=gt.crc32=void 0;var Ug=(Xs(),Vr(Js)),$g=Qs();function Lg(e){return new Gc().update(e).digest()}gt.crc32=Lg;var Gc=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=Ug.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^Bg[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();gt.Crc32=Gc;var Mg=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Bg=(0,$g.uint32ArrayFrom)(Mg),qg=Hc();Object.defineProperty(gt,"AwsCrc32",{enumerable:!0,get:function(){return qg.AwsCrc32}})});var bo=R(Qe=>{"use strict";var Bl=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",hx=Bl+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",ql="["+Bl+"]["+hx+"]*",yx=new RegExp("^"+ql+"$"),gx=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},Ex=function(e){let t=yx.exec(e);return!(t===null||typeof t>"u")};Qe.isExist=function(e){return typeof e<"u"};Qe.isEmptyObject=function(e){return Object.keys(e).length===0};Qe.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};Qe.getValue=function(e){return Qe.isExist(e)?e:""};Qe.isName=Ex;Qe.getAllMatches=gx;Qe.nameRegexp=ql});var $i=R(jl=>{"use strict";var Ui=bo(),xx={allowBooleanAttributes:!1,unpairedTags:[]};jl.validate=function(e,t){t=Object.assign({},xx,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Vl(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=Hl(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!bx(c)){let u;return c.trim().length===0?u="Invalid space after '<'.":u="Tag '"+c+"' is an invalid name.",B("InvalidTag",u,ne(e,s))}let d=Cx(e,s);if(d===!1)return B("InvalidAttr","Attributes for '"+c+"' have open quote.",ne(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let u=s-l.length;l=l.substring(0,l.length-1);let p=Gl(l,t);if(p===!0)n=!0;else return B(p.err.code,p.err.msg,ne(e,u+p.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return B("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",ne(e,i));{let u=r.pop();if(c!==u.tagName){let p=ne(e,u.tagStartPos);return B("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",ne(e,i))}r.length==0&&(o=!0)}}else return B("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",ne(e,s));else{let u=Gl(l,t);if(u!==!0)return B(u.err.code,u.err.msg,ne(e,s-l.length+u.err.line));if(o===!0)return B("InvalidXml","Multiple possible root nodes found.",ne(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Hl(e,s);continue}else if(e[s+1]==="?"){if(s=Vl(e,++s),s.err)return s}else break;else if(e[s]==="&"){let u=Rx(e,s);if(u==-1)return B("InvalidChar","char '&' is not expected.",ne(e,s));s=u}else if(o===!0&&!zl(e[s]))return B("InvalidXml","Extra text at the end",ne(e,s));e[s]==="<"&&s--}}else{if(zl(e[s]))continue;return B("InvalidChar","char '"+e[s]+"' is not expected.",ne(e,s))}if(n){if(r.length==1)return B("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ne(e,r[0].tagStartPos));if(r.length>0)return B("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return B("InvalidXml","Start tag expected.",1);return!0};function zl(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Vl(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return B("InvalidXml","XML declaration allowed only at the start of the document.",ne(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Hl(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var wx='"',Sx="'";function Cx(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===wx||e[t]===Sx)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var vx=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Gl(e,t){let r=Ui.getAllMatches(e,vx),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return B("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",tn(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return B("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",tn(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return B("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",tn(r[o]));let s=r[o][2];if(!Ax(s))return B("InvalidAttr","Attribute '"+s+"' is an invalid name.",tn(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return B("InvalidAttr","Attribute '"+s+"' is repeated.",tn(r[o]))}return!0}function _x(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Rx(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,_x(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function B(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Ax(e){return Ui.isName(e)}function bx(e){return Ui.isName(e)}function ne(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function tn(e){return e.startIndex+e[1].length}});var Kl=R(Li=>{var Wl={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},Ix=function(e){return Object.assign({},Wl,e)};Li.buildOptions=Ix;Li.defaultOptions=Wl});var Jl=R((dF,Yl)=>{"use strict";var Mi=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};Yl.exports=Mi});var Ql=R((lF,Xl)=>{var Tx=bo();function Ox(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&Dx(e,t))t+=7,[entityName,val,t]=Nx(e,t+1),val.indexOf("&")===-1&&(r[$x(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&kx(e,t))t+=8;else if(o&&Fx(e,t))t+=8;else if(o&&Ux(e,t))t+=9;else if(Px)s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function Nx(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function Px(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Dx(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function kx(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function Fx(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function Ux(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function $x(e){if(Tx.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Xl.exports=Ox});var eu=R((uF,Zl)=>{var Lx=/^[-+]?0x[a-fA-F0-9]+$/,Mx=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var Bx={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function qx(e,t={}){if(t=Object.assign({},Bx,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&Lx.test(r))return Number.parseInt(r,16);{let n=Mx.exec(r);if(n){let o=n[1],s=n[2],i=zx(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function zx(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Zl.exports=qx});var ru=R((mF,tu)=>{"use strict";var Vi=bo(),rn=Jl(),Vx=Ql(),Hx=eu(),pF="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Vi.nameRegexp),Bi=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=Gx,this.parseXml=Jx,this.parseTextData=jx,this.resolveNameSpace=Wx,this.buildAttributesMap=Yx,this.isItStopNode=ew,this.replaceEntitiesValue=Qx,this.readStopNodeData=rw,this.saveTextToParentTag=Zx,this.addChild=Xx}};function Gx(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function jx(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?zi(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?zi(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Wx(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var Kx=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Yx(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=Vi.getAllMatches(e,Kx),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]),c=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let l=this.options.attributeValueProcessor(a,c,t);l==null?s[d]=c:typeof l!=typeof c||l!==c?s[d]=l:s[d]=zi(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var Jx=function(e){e=e.replace(/\r\n?/g,`
`);let t=new rn("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=er(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=qi(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new rn(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=er(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=Vx(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=er(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=qi(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,l=a.attrExpPresent,u=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let m="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let E=this.readStopNodeData(e,c,u+1);if(!E)throw new Error(`Unexpected end of ${c}`);s=E.i,m=E.tagContent}let f=new rn(c);c!==d&&l&&(f[":@"]=this.buildAttributesMap(d,o,c)),m&&(m=this.parseTextData(m,c,o,!0,l,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),f.add(this.options.textNodeName,m),this.addChild(r,f,o)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let m=new rn(c);c!==d&&l&&(m[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,m,o),o=o.substr(0,o.lastIndexOf("."))}else{let m=new rn(c);this.tagsNodeStack.push(r),c!==d&&l&&(m[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,m,o),r=m}n="",s=u}}else n+=e[s];return t.child};function Xx(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var Qx=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function Zx(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function ew(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function tw(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function er(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function qi(e,t,r,n=">"){let o=tw(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==o.data.substr(l+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function rw(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=er(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=er(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=er(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=er(e,"]]>",r,"StopNode is not closed.")-2;else{let s=qi(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function zi(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:Hx(e,r)}else return Vi.isExist(e)?e:""}tu.exports=Bi});var su=R(ou=>{"use strict";function nw(e,t){return nu(e,t)}function nu(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=ow(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=nu(i[a],t,c),l=iw(d,t);i[":@"]?sw(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function ow(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function sw(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function iw(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}ou.prettify=nw});var au=R((hF,iu)=>{var{buildOptions:aw}=Kl(),cw=ru(),{prettify:dw}=su(),lw=$i(),Hi=class{constructor(t){this.externalEntities={},this.options=aw(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=lw.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new cw(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:dw(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};iu.exports=Hi});var pu=R((yF,uu)=>{var uw=`
`;function pw(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=uw),du(e,t,"",r)}function du(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i],c=mw(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let f=a[c];fw(d,t)||(f=t.tagValueProcessor(c,f),f=lu(f,t)),s&&(o+=n),o+=f,s=!1;continue}else if(c===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,s=!1;continue}else if(c===t.commentPropName){o+=n+`<!--${a[c][0][t.textNodeName]}-->`,s=!0;continue}else if(c[0]==="?"){let f=cu(a[":@"],t),E=c==="?xml"?"":n,y=a[c][0][t.textNodeName];y=y.length!==0?" "+y:"",o+=E+`<${c}${y}${f}?>`,s=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let u=cu(a[":@"],t),p=n+`<${c}${u}`,m=du(a[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=p+">":o+=p+"/>":(!m||m.length===0)&&t.suppressEmptyNode?o+=p+"/>":m&&m.endsWith(">")?o+=p+`>${m}${n}</${c}>`:(o+=p+">",m&&n!==""&&(m.includes("/>")||m.includes("</"))?o+=n+t.indentBy+m+n:o+=m,o+=`</${c}>`),s=!0}return o}function mw(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function cu(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=lu(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function fw(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function lu(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}uu.exports=pw});var fu=R((gF,mu)=>{"use strict";var hw=pu(),yw={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Bt(e){this.options=Object.assign({},yw,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=xw),this.processTextOrObjNode=gw,this.options.format?(this.indentate=Ew,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Bt.prototype.build=function(e){return this.options.preserveOrder?hw(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Bt.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,i="";for(let a=0;a<s;a++){let c=e[o][a];typeof c>"u"||(c===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?i+=this.j2x(c,t+1).val:i+=this.processTextOrObjNode(c,o,t):i+=this.buildTextValNode(c,o,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,"",t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};Bt.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function gw(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Bt.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};Bt.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Bt.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};Bt.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Ew(e){return this.options.indentBy.repeat(e)}function xw(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}mu.exports=Bt});var yu=R((EF,hu)=>{"use strict";var ww=$i(),Sw=au(),Cw=fu();hu.exports={XMLParser:Sw,XMLValidator:ww,XMLBuilder:Cw}});var Iv={};dr(Iv,{run:()=>gh});module.exports=Vr(Iv);var we=Ae(fr());var yr=e=>{let t=e.httpHandler;return{setHttpHandler(r){t=r},httpHandler(){return t},updateHttpClientConfig(r,n){t.updateHttpClientConfig(r,n)},httpHandlerConfigs(){return t.httpHandlerConfigs()}}},gr=e=>({httpHandler:e.httpHandler()});var Hs;(function(e){e.HEADER="header",e.QUERY="query"})(Hs||(Hs={}));var Jt;(function(e){e.HTTP="http",e.HTTPS="https"})(Jt||(Jt={}));var Er;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Er||(Er={}));var Gs;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Gs||(Gs={}));var L="__smithy_context";var Ke;(function(e){e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services"})(Ke||(Ke={}));var js;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(js||(js={}));var O=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=Yy(t.query)),t}};function Yy(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Ie=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var Jy=e=>t=>async r=>{if(!O.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},Xy={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},mt=e=>({applyToStack:t=>{t.add(Jy(e),Xy)}});var Qy=()=>(e,t)=>async r=>{var n,o;try{let s=await e(r),{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:u}=d,p=l??t.inputFilterSensitiveLog,m=u??t.outputFilterSensitiveLog,{$metadata:f,...E}=s.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:i,commandName:a,input:p(r.input),output:m(E),metadata:f}),s}catch(s){let{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,u=l??t.inputFilterSensitiveLog;throw(o=c==null?void 0:c.error)==null||o.call(c,{clientName:i,commandName:a,input:u(r.input),error:s,metadata:s.$metadata}),s}},Zy={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},ft=e=>({applyToStack:t=>{t.add(Qy(),Zy)}});var bc="X-Amzn-Trace-Id",eg="AWS_LAMBDA_FUNCTION_NAME",tg="_X_AMZN_TRACE_ID",rg=e=>t=>async r=>{let{request:n}=r;if(!O.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(bc))return t(r);let o=process.env[eg],s=process.env[tg],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[bc]=s),t({...r,request:n})},ng={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},ht=e=>({applyToStack:t=>{t.add(rg(e),ng)}});var pe=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var x=class e extends pe{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}};var me=class e extends pe{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}};var Dn=(...e)=>async()=>{if(e.length===0)throw new pe("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n!=null&&n.tryNextLink)continue;throw n}throw t};var Ic=e=>()=>Promise.resolve(e);var yt=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),n):async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var tE=Ae(Mn());var jc={},ei={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),jc[e]=t,ei[t]=e}function Wc(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in ei)t[r/2]=ei[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function G(e){let t="";for(let r=0;r<e.byteLength;r++)t+=jc[e[r]];return t}var xr=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Kc(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Kc(t),parseInt(G(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Kc(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Kr=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(xr.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!Jg.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(Wc(t.value.replace(/\-/g,"")),1),u}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:Jc,value:!0};break;case 1:r[s]={type:Jc,value:!1};break;case 2:r[s]={type:zg,value:t.getInt8(n++)};break;case 3:r[s]={type:Vg,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:Hg,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:Gg,value:new xr(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:jg,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:Wg,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:Kg,value:new Date(new xr(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:Yg,value:`${G(c.subarray(0,4))}-${G(c.subarray(4,6))}-${G(c.subarray(6,8))}-${G(c.subarray(8,10))}-${G(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},Yc;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Yc||(Yc={}));var Jc="boolean",zg="byte",Vg="short",Hg="integer",Gg="long",jg="binary",Wg="string",Kg="timestamp",Yg="uuid",Jg=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Xg=Ae(Mn()),Qg=4,Zg=Qg*2,eE=4,$R=Zg+eE*2;var Xc=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var Qc=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var Zc=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var ed=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};var j=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Bn=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var qn=require("buffer"),Et=(e,t=0,r=e.byteLength-t)=>{if(!Bn(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return qn.Buffer.from(e,t,r)},wr=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?qn.Buffer.from(e,t):qn.Buffer.from(e)};var te=e=>{let t=wr(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Oe=e=>typeof e=="string"?te(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var fe=e=>Et(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var td="X-Amz-Algorithm",rd="X-Amz-Credential",ti="X-Amz-Date",nd="X-Amz-SignedHeaders",od="X-Amz-Expires",ri="X-Amz-Signature",ni="X-Amz-Security-Token";var oi="authorization",si=ti.toLowerCase(),rE="date",sd=[oi,si,rE],id=ri.toLowerCase(),Yr="x-amz-content-sha256",ad=ni.toLowerCase();var cd={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},dd=/^proxy-/,ld=/^sec-/;var zn="AWS4-HMAC-SHA256";var ud="AWS4-HMAC-SHA256-PAYLOAD",pd="UNSIGNED-PAYLOAD",md=50,ii="aws4_request",fd=60*60*24*7;var Vn={},ai=[],Hn=(e,t,r)=>`${e}/${t}/${r}/${ii}`,yd=async(e,t,r,n,o)=>{let s=await hd(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${G(s)}:${t.sessionToken}`;if(i in Vn)return Vn[i];for(ai.push(i);ai.length>md;)delete Vn[ai.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,ii])a=await hd(e,a,c);return Vn[i]=a};var hd=(e,t,r)=>{let n=new e(t);return n.update(Oe(r)),n.digest()};var Gn=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in cd||t!=null&&t.has(s)||dd.test(s)||ld.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var Ne=e=>encodeURIComponent(e).replace(/[!'()*]/g,nE),nE=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var ci=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===id)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${Ne(n)}=${Ne(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((s,i)=>s.concat([`${Ne(n)}=${Ne(i)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var Jr=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===Yr)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Bn(t)){let n=new r;return n.update(Oe(t)),G(await n.digest())}return pd};var gd=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var jn=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?oE(t):void 0}),oE=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var di=(e,t={})=>{var o;let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():jn(e);for(let s of Object.keys(r)){let i=s.toLowerCase();i.slice(0,6)==="x-amz-"&&!((o=t.unhoistableHeaders)!=null&&o.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}};var Wn=e=>{e=typeof e.clone=="function"?e.clone():jn(e);for(let t of Object.keys(e.headers))sd.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Ed=e=>sE(e).toISOString().replace(/\.\d{3}Z$/,"Z"),sE=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var Xr=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.headerMarshaller=new Kr(fe,te),this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=j(n),this.credentialProvider=j(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let u=c??await this.regionProvider(),{longDate:p,shortDate:m}=Kn(n);if(o>fd)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let f=Hn(m,u,d??this.service),E=di(Wn(t),{unhoistableHeaders:i});l.sessionToken&&(E.query[ni]=l.sessionToken),E.query[td]=zn,E.query[rd]=`${l.accessKeyId}/${f}`,E.query[ti]=p,E.query[od]=o.toString(10);let y=Gn(E,s,a);return E.query[nd]=xd(y),E.query[ri]=await this.getSignature(p,f,this.getSigningKey(l,u,m,d),this.createCanonicalRequest(E,y,await Jr(t,this.sha256))),E}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=Kn(n),l=Hn(c,a,i??this.service),u=await Jr({headers:{},body:r},this.sha256),p=new this.sha256;p.update(t);let m=G(await p.digest()),f=[ud,d,l,o,m,u].join(`
`);return this.signString(f,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=Kn(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(Oe(t)),G(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=Wn(t),{longDate:l,shortDate:u}=Kn(r),p=Hn(u,c,i??this.service);d.headers[si]=l,a.sessionToken&&(d.headers[ad]=a.sessionToken);let m=await Jr(d,this.sha256);!gd(Yr,d.headers)&&this.applyChecksum&&(d.headers[Yr]=m);let f=Gn(d,o,n),E=await this.getSignature(l,p,this.getSigningKey(a,c,u,i),this.createCanonicalRequest(d,f,m));return d.headers[oi]=`${zn} Credential=${a.accessKeyId}/${p}, SignedHeaders=${xd(f)}, Signature=${E}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${ci(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(Oe(n));let s=await o.digest();return`${zn}
${t}
${r}
${G(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(Oe(s)),G(await i.digest())}getSigningKey(t,r,n,o){return yd(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},Kn=e=>{let t=Ed(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},xd=e=>Object.keys(e).sort().join(";");var iE=3e5,Yn=e=>{let t=e.credentials?aE(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=j(e.signer):e.regionInfoProvider?s=()=>j(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},u=e.signerConstructor||Xr;return new u(l)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await j(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},l=e.signerConstructor||Xr;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var aE=e=>typeof e=="function"?yt(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<iE,t=>t.expiration!==void 0):j(e);var Jn=e=>new Date(Date.now()+e);var wd=(e,t)=>Math.abs(Jn(t).getTime()-e)>=3e5;var li=(e,t)=>{let r=Date.parse(e);return wd(r,t)?r-Date.now():t};var cE=e=>(t,r)=>async function(n){var d,l,u,p;if(!O.isInstance(n.request))return t(n);let o=(u=(l=(d=r.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:u[0],s=(o==null?void 0:o.name)==="sigv4a"?(p=o==null?void 0:o.signingRegionSet)==null?void 0:p.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:Jn(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(m=>{let f=m.ServerTime??Sd(m.$response);throw f&&(e.systemClockOffset=li(f,e.systemClockOffset)),m}),c=Sd(a.response);return c&&(e.systemClockOffset=li(c,e.systemClockOffset)),a},Sd=e=>{var t,r;return Ie.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},dE={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Xn=e=>({applyToStack:t=>{t.addRelativeTo(cE(e),dE)}});function xt(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var ui={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var Cd=ui,vd="",uE=e=>{let{partitions:t}=Cd;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},_d=(e,t="")=>{Cd=e,vd=t},pE=()=>{_d(ui,"")},pi=()=>vd;var mE=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Qn=e=>mE.test(e)||e.startsWith("[")&&e.endsWith("]");var Ye="endpoints";function he(e){return typeof e!="object"||e==null?e:"ref"in e?`$${he(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(he).join(", ")})`:JSON.stringify(e,null,2)}var k=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var yi={};dr(yi,{aws:()=>mi,booleanEquals:()=>yE,getAttr:()=>fi,isSet:()=>gE,isValidHostLabel:()=>Zn,not:()=>EE,parseURL:()=>xE,stringEquals:()=>wE,substring:()=>SE,uriEncode:()=>CE});var mi={};dr(mi,{getUserAgentPrefix:()=>pi,isVirtualHostableS3Bucket:()=>Rd,parseArn:()=>hE,partition:()=>uE,setPartitionInfo:()=>_d,useDefaultPartitionInfo:()=>pE});var fE=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Zn=(e,t=!1)=>{if(!t)return fE.test(e);let r=e.split(".");for(let n of r)if(!Zn(n))return!1;return!0};var Rd=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Rd(r))return!1;return!0}return!(!Zn(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Qn(e))};var hE=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var yE=(e,t)=>e===t;var Ad=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new k(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new k(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var fi=(e,t)=>Ad(t).reduce((r,n)=>{if(typeof r!="object")throw new k(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var gE=e=>e!=null;var EE=e=>!e;var bd;(function(e){e.AAAA="AAAA",e.A="A"})(bd||(bd={}));var hi={[Jt.HTTP]:80,[Jt.HTTPS]:443},xE=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:p,port:m,protocol:f="",path:E="",query:y={}}=e,S=new URL(`${f}//${p}${m?`:${m}`:""}${E}`);return S.search=Object.entries(y).map(([$,Se])=>`${$}=${Se}`).join("&"),S}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(Jt).includes(c))return null;let d=Qn(o),l=r.includes(`${n}:${hi[c]}`)||typeof e=="string"&&e.includes(`${n}:${hi[c]}`),u=`${n}${l?`:${hi[c]}`:""}`;return{scheme:c,authority:u,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var wE=(e,t)=>e===t;var SE=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var CE=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var eo=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(fi(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var Id=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var wt=(e,t,r)=>{if(typeof e=="string")return eo(e,r);if(e.fn)return to(e,r);if(e.ref)return Id(e,r);throw new k(`'${t}': ${String(e)} is not a string, function or reference.`)};var to=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:wt(o,"arg",r));return e.split(".").reduce((o,s)=>o[s],yi)(...n)};var Td=({assign:e,...t},r)=>{var o,s;if(e&&e in r.referenceRecord)throw new k(`'${e}' is already defined in Reference Record.`);let n=to(t,r);return(s=(o=r.logger)==null?void 0:o.debug)==null||s.call(o,Ye,`evaluateCondition: ${he(t)} = ${he(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var Sr=(e=[],t)=>{var n,o;let r={};for(let s of e){let{result:i,toAssign:a}=Td(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(o=(n=t.logger)==null?void 0:n.debug)==null||o.call(n,Ye,`assign: ${a.name} := ${he(a.value)}`))}return{result:!0,referenceRecord:r}};var Od=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=wt(s,"Header value entry",t);if(typeof i!="string")throw new k(`Header '${n}' value '${i}' is not a string`);return i})}),{});var gi=(e,t)=>{if(Array.isArray(e))return e.map(r=>gi(r,t));switch(typeof e){case"string":return eo(e,t);case"object":if(e===null)throw new k(`Unexpected endpoint property: ${e}`);return ro(e,t);case"boolean":return e;default:throw new k(`Unexpected endpoint property type: ${typeof e}`)}};var ro=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:gi(o,t)}),{});var Nd=(e,t)=>{let r=wt(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new k(`Endpoint URL must be a string, got ${typeof r}`)};var Pd=(e,t)=>{var l,u;let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=Sr(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return(u=(l=t.logger)==null?void 0:l.debug)==null||u.call(l,Ye,`Resolving endpoint from template: ${he(n)}`),{...d!=null&&{headers:Od(d,i)},...c!=null&&{properties:ro(c,i)},url:Nd(a,i)}};var Dd=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=Sr(r,t);if(o)throw new k(wt(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var kd=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=Sr(r,t);if(o)return no(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var no=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=Pd(r,t);if(n)return n}else if(r.type==="error")Dd(r,t);else if(r.type==="tree"){let n=kd(r,t);if(n)return n}else throw new k(`Unknown endpoint rule: ${r}`);throw new k("Rules evaluation failed")};var St=(e,t)=>{var d,l,u,p,m;let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,`${Ye} Initial EndpointParams: ${he(r)}`);let i=Object.entries(o).filter(([,f])=>f.default!=null).map(([f,E])=>[f,E.default]);if(i.length>0)for(let[f,E]of i)r[f]=r[f]??E;let a=Object.entries(o).filter(([,f])=>f.required).map(([f])=>f);for(let f of a)if(r[f]==null)throw new k(`Missing required parameter: '${f}'`);let c=no(s,{endpointParams:r,logger:n,referenceRecord:{}});if((u=t.endpointParams)!=null&&u.Endpoint)try{let f=new URL(t.endpointParams.Endpoint),{protocol:E,port:y}=f;c.url.protocol=E,c.url.port=y}catch{}return(m=(p=t.logger)==null?void 0:p.debug)==null||m.call(p,`${Ye} Resolved endpoint: ${he(c)}`),c};var Ei="user-agent",oo="x-amz-user-agent",xi=" ",so="/",Fd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Ud=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,wi="-";var vE=e=>(t,r)=>async n=>{var p,m;let{request:o}=n;if(!O.isInstance(o))return t(n);let{headers:s}=o,i=((p=r==null?void 0:r.userAgent)==null?void 0:p.map(Si))||[],a=(await e.defaultUserAgentProvider()).map(Si),c=((m=e==null?void 0:e.customUserAgent)==null?void 0:m.map(Si))||[],d=pi(),l=(d?[d]:[]).concat([...a,...i,...c]).join(xi),u=[...a.filter(f=>f.startsWith("aws-sdk-")),...c].join(xi);return e.runtime!=="browser"?(u&&(s[oo]=s[oo]?`${s[Ei]} ${u}`:u),s[Ei]=l):s[oo]=l,t({...n,request:o})},Si=e=>{var i;let t=e[0].split(so).map(a=>a.replace(Fd,wi)).join(so),r=(i=e[1])==null?void 0:i.replace(Ud,wi),n=t.indexOf(so),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(a=>a&&a.length>0).reduce((a,c,d)=>{switch(d){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},_E={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ct=e=>({applyToStack:t=>{t.add(vE(e),_E)}});var vt;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(vt||(vt={}));var Cr=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var RE="AWS_USE_DUALSTACK_ENDPOINT",AE="use_dualstack_endpoint";var _t={environmentVariableSelector:e=>Cr(e,RE,vt.ENV),configFileSelector:e=>Cr(e,AE,vt.CONFIG),default:!1};var bE="AWS_USE_FIPS_ENDPOINT",IE="use_fips_endpoint";var Rt={environmentVariableSelector:e=>Cr(e,bE,vt.ENV),configFileSelector:e=>Cr(e,IE,vt.CONFIG),default:!1};var TE="AWS_REGION",OE="region",Pe={environmentVariableSelector:e=>e[TE],configFileSelector:e=>e[OE],default:()=>{throw new Error("Region is missing")}},At={preferredFile:"credentials"};var io=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Ci=e=>io(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var bt=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Ci(t);let n=await t();return Ci(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return io(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var $d="content-length";function NE(e){return t=>async r=>{let n=r.request;if(O.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf($d)===-1)try{let i=e(o);n.headers={...n.headers,[$d]:String(i)}}catch{}}return t({...r,request:n})}}var PE={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},It=e=>({applyToStack:t=>{t.add(NE(e.bodyLengthChecker),PE)}});var Ld=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),$E(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!UE(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},DE=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,kE=/(\d+\.){3}\d+/,FE=/\.\./;var UE=e=>DE.test(e)&&!kE.test(e)&&!FE.test(e),$E=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var Md=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var Bd=async(e,t,r,n)=>{let o=await LE(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},LE=async(e,t,r)=>{var s;let n={},o=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,a]of Object.entries(o))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=e[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await Md(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await Ld(n),n};function qd(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var re=e=>{if(typeof e=="string")return re(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=qd(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var zd=e=>typeof e=="object"?"url"in e?re(e.url):e:re(e);var Vd=({config:e,instructions:t})=>(r,n)=>async o=>{var a,c;let s=await Bd(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;let i=(c=n.authSchemes)==null?void 0:c[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var Hd=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var Gd=(e,t)=>(r,n)=>async o=>{var a;let s=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var ME={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},vi={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function N(e,t,r){return{applyToStack:n=>{n.add(Hd(e,r),ME),n.add(Gd(e,t),vi)}}}var BE={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:vi.name},P=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Vd({config:e,instructions:t}),BE)}});var Tt=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>zd(await j(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:j(e.useDualstackEndpoint??!1),useFipsEndpoint:j(e.useFipsEndpoint??!1)}};var ve;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(ve||(ve={}));var Xt=3,De=ve.STANDARD;var jd=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Wd=["TimeoutError","RequestTimeout","RequestTimeoutException"],Kd=[500,502,503,504],Yd=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var vr=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||jd.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},ao=e=>{var t;return Wd.includes(e.name)||Yd.includes((e==null?void 0:e.code)||"")||Kd.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},Jd=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!ao(e)}return!1};var Qr=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),vr(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var co="amz-sdk-invocation-id",lo="amz-sdk-request";var Xd=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var _i=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var Qt=class{constructor(t){this.maxAttempts=t,this.mode=ve.STANDARD,this.capacity=500,this.retryBackoffStrategy=Xd(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return _i({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,_i({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Xt}`),Xt}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var po=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=ve.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new Qr,this.standardRetryStrategy=new Qt(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Ai=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var rl="AWS_MAX_ATTEMPTS",nl="max_attempts",Ot={environmentVariableSelector:e=>{let t=e[rl];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${rl} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[nl];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${nl} mast be a number, got "${t}"`);return r},default:Xt},Nt=e=>{let{retryStrategy:t}=e,r=j(e.maxAttempts??Xt);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await j(e.retryMode)()===ve.ADAPTIVE?new po(r):new Qt(r))}},qE="AWS_RETRY_MODE",zE="retry_mode",Pt={environmentVariableSelector:e=>e[qE],configFileSelector:e=>e[zE],default:De};bs();var VE=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(HE(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n;for(O.isInstance(l)&&(l.headers[co]=An());;)try{O.isInstance(l)&&(l.headers[lo]=`attempt=${c+1}; max=${s}`);let{response:u,output:p}=await t(n);return o.recordSuccess(i),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=d,{response:u,output:p}}catch(u){let p=GE(u);a=Ai(u);try{i=await o.refreshRetryTokenForRetry(i,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let m=i.getRetryDelay();d+=m,await new Promise(f=>setTimeout(f,m))}}else return o=o,o!=null&&o.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},HE=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",GE=e=>{let t={errorType:jE(e)},r=KE(e.$response);return r&&(t.retryAfterHint=r),t},jE=e=>vr(e)?"THROTTLING":ao(e)?"TRANSIENT":Jd(e)?"SERVER_ERROR":"CLIENT_ERROR",WE={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Dt=e=>({applyToStack:t=>{t.add(VE(e),WE)}}),KE=e=>{if(!Ie.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var ke=class{trace(){}debug(){}info(){}warn(){}error(){}};var Zt=(e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},kt=(e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,Rr=()=>{let e=[],t=[],r=!1,n=new Set,o=u=>u.sort((p,m)=>ol[m.step]-ol[p.step]||sl[m.priority||"normal"]-sl[p.priority||"normal"]),s=u=>{let p=!1,m=f=>{let E=Zt(f.name,f.aliases);if(E.includes(u)){p=!0;for(let y of E)n.delete(y);return!1}return!0};return e=e.filter(m),t=t.filter(m),p},i=u=>{let p=!1,m=f=>{if(f.middleware===u){p=!0;for(let E of Zt(f.name,f.aliases))n.delete(E);return!1}return!0};return e=e.filter(m),t=t.filter(m),p},a=u=>{var p;return e.forEach(m=>{u.add(m.middleware,{...m})}),t.forEach(m=>{u.addRelativeTo(m.middleware,{...m})}),(p=u.identifyOnResolve)==null||p.call(u,l.identifyOnResolve()),u},c=u=>{let p=[];return u.before.forEach(m=>{m.before.length===0&&m.after.length===0?p.push(m):p.push(...c(m))}),p.push(u),u.after.reverse().forEach(m=>{m.before.length===0&&m.after.length===0?p.push(m):p.push(...c(m))}),p},d=(u=!1)=>{let p=[],m=[],f={};return e.forEach(y=>{let S={...y,before:[],after:[]};for(let $ of Zt(S.name,S.aliases))f[$]=S;p.push(S)}),t.forEach(y=>{let S={...y,before:[],after:[]};for(let $ of Zt(S.name,S.aliases))f[$]=S;m.push(S)}),m.forEach(y=>{if(y.toMiddleware){let S=f[y.toMiddleware];if(S===void 0){if(u)return;throw new Error(`${y.toMiddleware} is not found when adding ${kt(y.name,y.aliases)} middleware ${y.relation} ${y.toMiddleware}`)}y.relation==="after"&&S.after.push(y),y.relation==="before"&&S.before.push(y)}}),o(p).map(c).reduce((y,S)=>(y.push(...S),y),[])},l={add:(u,p={})=>{let{name:m,override:f,aliases:E}=p,y={step:"initialize",priority:"normal",middleware:u,...p},S=Zt(m,E);if(S.length>0){if(S.some($=>n.has($))){if(!f)throw new Error(`Duplicate middleware name '${kt(m,E)}'`);for(let $ of S){let Se=e.findIndex(qr=>{var zr;return qr.name===$||((zr=qr.aliases)==null?void 0:zr.some(xs=>xs===$))});if(Se===-1)continue;let se=e[Se];if(se.step!==y.step||y.priority!==se.priority)throw new Error(`"${kt(se.name,se.aliases)}" middleware with ${se.priority} priority in ${se.step} step cannot be overridden by "${kt(m,E)}" middleware with ${y.priority} priority in ${y.step} step.`);e.splice(Se,1)}}for(let $ of S)n.add($)}e.push(y)},addRelativeTo:(u,p)=>{let{name:m,override:f,aliases:E}=p,y={middleware:u,...p},S=Zt(m,E);if(S.length>0){if(S.some($=>n.has($))){if(!f)throw new Error(`Duplicate middleware name '${kt(m,E)}'`);for(let $ of S){let Se=t.findIndex(qr=>{var zr;return qr.name===$||((zr=qr.aliases)==null?void 0:zr.some(xs=>xs===$))});if(Se===-1)continue;let se=t[Se];if(se.toMiddleware!==y.toMiddleware||se.relation!==y.relation)throw new Error(`"${kt(se.name,se.aliases)}" middleware ${se.relation} "${se.toMiddleware}" middleware cannot be overridden by "${kt(m,E)}" middleware ${y.relation} "${y.toMiddleware}" middleware.`);t.splice(Se,1)}}for(let $ of S)n.add($)}t.push(y)},clone:()=>a(Rr()),use:u=>{u.applyToStack(l)},remove:u=>typeof u=="string"?s(u):i(u),removeByTag:u=>{let p=!1,m=f=>{let{tags:E,name:y,aliases:S}=f;if(E&&E.includes(u)){let $=Zt(y,S);for(let Se of $)n.delete(Se);return p=!0,!1}return!0};return e=e.filter(m),t=t.filter(m),p},concat:u=>{var m;let p=a(Rr());return p.use(u),p.identifyOnResolve(r||p.identifyOnResolve()||(((m=u.identifyOnResolve)==null?void 0:m.call(u))??!1)),p},applyToStack:a,identify:()=>d(!0).map(u=>{let p=u.step??u.relation+" "+u.toMiddleware;return kt(u.name,u.aliases)+" - "+p}),identifyOnResolve(u){return typeof u=="boolean"&&(r=u),r},resolve:(u,p)=>{for(let m of d().map(f=>f.middleware).reverse())u=m(u,p);return r&&console.log(l.identify()),u}};return l},ol={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},sl={high:3,normal:2,low:1};var Fe=class{constructor(t){this.middlewareStack=Rr(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var YE=/^[A-Za-z0-9+/]*={0,2}$/,Ue=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!YE.exec(e))throw new TypeError("Invalid base64 string.");let t=wr(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var $e=e=>Et(e.buffer,e.byteOffset,e.byteLength).toString("base64");function il(e,t="utf-8"){return t==="base64"?$e(e):fe(e)}function al(e,t){return t==="base64"?Je.mutate(Ue(e)):Je.mutate(te(e))}var Je=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return al(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return il(this,t)}};function bi(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Ne(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Ne(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Ne(n)}`),t.push(o)}}return t.join("&")}var mo=require("http"),fo=require("https");var cl=["ECONNRESET","EPIPE","ETIMEDOUT"];var Ii=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var dl=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",o=>{o.connecting?o.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})};var ll=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})};var ul=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};var ml=require("stream"),pl=1e3;async function Ti(e,t,r=pl){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(a=>{s=Number(setTimeout(a,Math.max(pl,r)))}),new Promise(a=>{e.on("continue",()=>{clearTimeout(s),a()}),e.on("error",()=>{i=!0,clearTimeout(s),a()})})]),i||JE(e,t.body)}function JE(e,t){t instanceof ml.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var Le=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:s||new mo.Agent({keepAlive:a,maxSockets:c}),httpsAgent:i||new fo.Agent({keepAlive:a,maxSockets:c})}}destroy(){var t,r,n,o;(r=(t=this.config)==null?void 0:t.httpAgent)==null||r.destroy(),(o=(n=this.config)==null?void 0:n.httpsAgent)==null||o.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let s,i=async y=>{await s,n(y)},a=async y=>{await s,o(y)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let y=new Error("Request aborted");y.name="AbortError",a(y);return}let c=t.protocol==="https:",d=bi(t.query||{}),l;if(t.username!=null||t.password!=null){let y=t.username??"",S=t.password??"";l=`${y}:${S}`}let u=t.path;d&&(u+=`?${d}`),t.fragment&&(u+=`#${t.fragment}`);let p={headers:t.headers,host:t.hostname,method:t.method,path:u,port:t.port,agent:c?this.config.httpsAgent:this.config.httpAgent,auth:l},f=(c?fo.request:mo.request)(p,y=>{let S=new Ie({statusCode:y.statusCode||-1,reason:y.statusMessage,headers:Ii(y.headers),body:y});i({response:S})});f.on("error",y=>{cl.includes(y.code)?a(Object.assign(y,{name:"TimeoutError"})):a(y)}),dl(f,a,this.config.connectionTimeout),ul(f,a,this.config.requestTimeout),r&&(r.onabort=()=>{f.abort();let y=new Error("Request aborted");y.name="AbortError",a(y)});let E=p.agent;typeof E=="object"&&"keepAlive"in E&&ll(f,{keepAlive:E.keepAlive,keepAliveMsecs:E.keepAliveMsecs}),s=Ti(f,t,this.config.requestTimeout).catch(o)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}};var Oi=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};var fl=require("stream"),ho=class extends fl.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var Xe=e=>new Promise((t,r)=>{let n=new ho;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});var Ft=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Je.mutate(e);if(!e)return Je.mutate(new Uint8Array);let r=t.streamCollector(e);return Je.mutate(await r)};var T=class{constructor(){this.middlewareStack=Rr()}};var X="***SensitiveInformation***";var hl=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,c){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}};var Ni=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&go.warn(yo(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&go.warn(yo(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},ie=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&go.warn(yo(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},XE=Math.ceil(34028234663852886e22),yl=e=>{let t=ie(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>XE)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Eo=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Ut=e=>Pi(e,32),gl=e=>Pi(e,16),El=e=>Pi(e,8),Pi=(e,t)=>{let r=Eo(e);if(r!==void 0&&QE(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},QE=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},M=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Ar=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},h=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return go.warn(yo(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var xl=e=>ie(typeof e=="string"?Zr(e):e);var wl=e=>yl(typeof e=="string"?Zr(e):e),ZE=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Zr=e=>{let t=e.match(ZE);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Di=e=>Ut(typeof e=="string"?Zr(e):e),Sl=e=>gl(typeof e=="string"?Zr(e):e),Cl=e=>El(typeof e=="string"?Zr(e):e),yo=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),go={warn:console.warn};var ex=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var X1=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var tx=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),vl=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=tx.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,l]=t,u=Sl(_l(n)),p=en(o,"month",1,12),m=en(s,"day",1,31),f=rx(u,p,m,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&f.setTime(f.getTime()-ax(l)),f},Q1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),Z1=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ek=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var Me=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=xl(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},rx=(e,t,r,n)=>{let o=t-1;return ox(e,o,r),new Date(Date.UTC(e,o,r,en(n.hours,"hour",0,23),en(n.minutes,"minute",0,59),en(n.seconds,"seconds",0,60),ix(n.fractionalMilliseconds)))};var tk=50*365*24*60*60*1e3;var nx=[31,28,31,30,31,30,31,31,30,31,30,31],ox=(e,t,r)=>{let n=nx[t];if(t===1&&sx(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${ex[t]} in ${e}: ${r}`)},sx=e=>e%4===0&&(e%100!==0||e%400===0),en=(e,t,r,n)=>{let o=Cl(_l(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},ix=e=>e==null?0:wl("0."+e)*1e3,ax=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},_l=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var Be=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},v=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var cx=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=dx(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||s||"UnknownError",$fault:"client",$metadata:o});throw v(i,t)},$t=e=>({output:t,parsedBody:r,errorCode:n})=>{cx({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},dx=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var Lt=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Rl=!1,Mt=e=>{e&&!Rl&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Rl=!0)};var Al=e=>{let t=[];for(let r in Er){let n=Er[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},bl=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var Il=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},Tl=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var br=e=>({...Al(e),...Il(e)});var Ir=e=>({...bl(e),...Tl(e)});function xo(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var ki=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=ki(e[r]));return e};var Fi=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Fi.prototype=Object.create(String.prototype,{constructor:{value:Fi,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Fi,String);function F(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,lx(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}Ol(n,null,s,i)}return n}var C=(e,t)=>{let r={};for(let n in t)Ol(r,e,t,n);return r},lx=(e,t,r)=>F(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),Ol=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=ux,c=px,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},ux=e=>e!=null,px=e=>e;var D=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=D(e[r]));return t}return e};var Nl=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"apprunner"});var Pl={name:"@aws-sdk/client-apprunner",description:"AWS SDK for JavaScript Apprunner Client for Node.js, Browser and React Native",version:"3.427.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo apprunner"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.427.0","@aws-sdk/credential-provider-node":"3.427.0","@aws-sdk/middleware-host-header":"3.425.0","@aws-sdk/middleware-logger":"3.425.0","@aws-sdk/middleware-recursion-detection":"3.425.0","@aws-sdk/middleware-signing":"3.425.0","@aws-sdk/middleware-user-agent":"3.427.0","@aws-sdk/region-config-resolver":"3.425.0","@aws-sdk/types":"3.425.0","@aws-sdk/util-endpoints":"3.427.0","@aws-sdk/util-user-agent-browser":"3.425.0","@aws-sdk/util-user-agent-node":"3.425.0","@smithy/config-resolver":"^2.0.11","@smithy/fetch-http-handler":"^2.2.1","@smithy/hash-node":"^2.0.10","@smithy/invalid-dependency":"^2.0.10","@smithy/middleware-content-length":"^2.0.12","@smithy/middleware-endpoint":"^2.0.10","@smithy/middleware-retry":"^2.0.13","@smithy/middleware-serde":"^2.0.10","@smithy/middleware-stack":"^2.0.4","@smithy/node-config-provider":"^2.0.13","@smithy/node-http-handler":"^2.1.6","@smithy/protocol-http":"^3.0.6","@smithy/smithy-client":"^2.1.9","@smithy/types":"^2.3.4","@smithy/url-parser":"^2.0.10","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.13","@smithy/util-defaults-mode-node":"^2.0.15","@smithy/util-retry":"^2.0.3","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-apprunner",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-apprunner"}};var Dl=(e,{stsClientCtor:t})=>Yn({...e,stsClientCtor:t});var kl=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var Fl={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.427.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/credential-provider-node":"3.427.0","@aws-sdk/middleware-host-header":"3.425.0","@aws-sdk/middleware-logger":"3.425.0","@aws-sdk/middleware-recursion-detection":"3.425.0","@aws-sdk/middleware-sdk-sts":"3.425.0","@aws-sdk/middleware-signing":"3.425.0","@aws-sdk/middleware-user-agent":"3.427.0","@aws-sdk/region-config-resolver":"3.425.0","@aws-sdk/types":"3.425.0","@aws-sdk/util-endpoints":"3.427.0","@aws-sdk/util-user-agent-browser":"3.425.0","@aws-sdk/util-user-agent-node":"3.425.0","@smithy/config-resolver":"^2.0.11","@smithy/fetch-http-handler":"^2.2.1","@smithy/hash-node":"^2.0.10","@smithy/invalid-dependency":"^2.0.10","@smithy/middleware-content-length":"^2.0.12","@smithy/middleware-endpoint":"^2.0.10","@smithy/middleware-retry":"^2.0.13","@smithy/middleware-serde":"^2.0.10","@smithy/middleware-stack":"^2.0.4","@smithy/node-config-provider":"^2.0.13","@smithy/node-http-handler":"^2.1.6","@smithy/protocol-http":"^3.0.6","@smithy/smithy-client":"^2.1.9","@smithy/types":"^2.3.4","@smithy/url-parser":"^2.0.10","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.13","@smithy/util-defaults-mode-node":"^2.0.15","@smithy/util-retry":"^2.0.3","@smithy/util-utf8":"^2.0.0","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var ye=class e extends Be{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var wo=class e extends ye{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},So=class e extends ye{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Co=class e extends ye{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},vo=class e extends ye{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},_o=class e extends ye{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ro=class e extends ye{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ao=class e extends ye{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var Ul=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:X}}),$l=e=>({...e,...e.Credentials&&{Credentials:Ul(e.Credentials)}});var Ll=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:X}}),Ml=e=>({...e,...e.Credentials&&{Credentials:Ul(e.Credentials)}});var gu=Ae(yu());var Eu=async(e,t)=>{let r=Nu,n;return n=Du({...Iw(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Ou(t,r,"/",void 0,n)};var xu=async(e,t)=>{let r=Nu,n;return n=Du({...Tw(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Ou(t,r,"/",void 0,n)};var wu=async(e,t)=>{if(e.statusCode>=300)return vw(e,t);let r=await Gi(e.body,t),n={};return n=Uw(r.AssumeRoleResult,t),{$metadata:Ze(e),...n}},vw=async(e,t)=>{let r={...e,body:await Pu(e.body,t)},n=ku(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Cu(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await vu(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await _u(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Ru(r,t);default:let o=r.body;return Tu({output:e,parsedBody:o.Error,errorCode:n})}};var Su=async(e,t)=>{if(e.statusCode>=300)return _w(e,t);let r=await Gi(e.body,t),n={};return n=$w(r.AssumeRoleWithWebIdentityResult,t),{$metadata:Ze(e),...n}},_w=async(e,t)=>{let r={...e,body:await Pu(e.body,t)},n=ku(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await Cu(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Rw(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Aw(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await bw(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await vu(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await _u(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Ru(r,t);default:let o=r.body;return Tu({output:e,parsedBody:o.Error,errorCode:n})}};var Cu=async(e,t)=>{let r=e.body,n=Lw(r.Error,t),o=new wo({$metadata:Ze(e),...n});return v(o,r)},Rw=async(e,t)=>{let r=e.body,n=Mw(r.Error,t),o=new Ao({$metadata:Ze(e),...n});return v(o,r)},Aw=async(e,t)=>{let r=e.body,n=Bw(r.Error,t),o=new _o({$metadata:Ze(e),...n});return v(o,r)};var bw=async(e,t)=>{let r=e.body,n=qw(r.Error,t),o=new Ro({$metadata:Ze(e),...n});return v(o,r)},vu=async(e,t)=>{let r=e.body,n=zw(r.Error,t),o=new So({$metadata:Ze(e),...n});return v(o,r)},_u=async(e,t)=>{let r=e.body,n=Vw(r.Error,t),o=new Co({$metadata:Ze(e),...n});return v(o,r)},Ru=async(e,t)=>{let r=e.body,n=Hw(r.Error,t),o=new vo({$metadata:Ze(e),...n});return v(o,r)},Iw=(e,t)=>{var n,o,s,i;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let a=Au(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(a).forEach(([c,d])=>{let l=`PolicyArns.${c}`;r[l]=d})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let a=Fw(e.Tags,t);((o=e.Tags)==null?void 0:o.length)===0&&(r.Tags=[]),Object.entries(a).forEach(([c,d])=>{let l=`Tags.${c}`;r[l]=d})}if(e.TransitiveTagKeys!=null){let a=kw(e.TransitiveTagKeys,t);((s=e.TransitiveTagKeys)==null?void 0:s.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(a).forEach(([c,d])=>{let l=`TransitiveTagKeys.${c}`;r[l]=d})}if(e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),e.ProvidedContexts!=null){let a=Pw(e.ProvidedContexts,t);((i=e.ProvidedContexts)==null?void 0:i.length)===0&&(r.ProvidedContexts=[]),Object.entries(a).forEach(([c,d])=>{let l=`ProvidedContexts.${c}`;r[l]=d})}return r};var Tw=(e,t)=>{var n;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let o=Au(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(o).forEach(([s,i])=>{let a=`PolicyArns.${s}`;r[a]=i})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var Au=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Ow(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Ow=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},Nw=(e,t)=>{let r={};return e.ProviderArn!=null&&(r.ProviderArn=e.ProviderArn),e.ContextAssertion!=null&&(r.ContextAssertion=e.ContextAssertion),r},Pw=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Nw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Dw=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},kw=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},Fw=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Dw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},bu=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=h(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=h(e.Arn)),r},Uw=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Iu(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=bu(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=Di(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=h(e.SourceIdentity)),r};var $w=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Iu(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=h(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=bu(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=Di(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=h(e.Provider)),e.Audience!==void 0&&(r.Audience=h(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=h(e.SourceIdentity)),r},Iu=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=h(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=h(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=h(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=M(vl(e.Expiration))),r};var Lw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r};var Mw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},Bw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r};var qw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},zw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},Vw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},Hw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=h(e.message)),r},Ze=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Gw=(e,t)=>Ft(e,t).then(r=>t.utf8Encoder(r)),Tu=$t(ye),Ou=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new O(d)},Nu={"content-type":"application/x-www-form-urlencoded"},Gi=(e,t)=>Gw(e,t).then(r=>{if(r.length){let n=new gu.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),ki(a)}return{}}),Pu=async(e,t)=>{let r=await Gi(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Du=e=>Object.entries(e).map(([t,r])=>xo(t)+"="+xo(r)).join("&"),ku=(e,t)=>{var r;if(((r=t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var Io=class e extends T{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(Xn(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:$l,[L]:{service:"AWSSecurityTokenServiceV20110615",operation:"AssumeRole"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Eu(t,r)}deserialize(t,r){return wu(t,r)}};var To=class e extends T{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:Ll,outputFilterSensitiveLog:Ml,[L]:{service:"AWSSecurityTokenServiceV20110615",operation:"AssumeRoleWithWebIdentity"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return xu(t,r)}deserialize(t,r){return Su(t,r)}};var Fu="us-east-1",Uu=e=>typeof e!="function"?e===void 0?Fu:e:async()=>{try{return await e()}catch{return Fu}},ji=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:Uu(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new Io(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},Wi=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:Uu(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new To(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},$u=e=>t=>e({roleAssumer:ji(t,t.stsClientCtor),roleAssumerWithWebIdentity:Wi(t,t.stsClientCtor),...t});var jw="AWS_ACCESS_KEY_ID",Ww="AWS_SECRET_ACCESS_KEY",Kw="AWS_SESSION_TOKEN",Yw="AWS_CREDENTIAL_EXPIRATION",Oo=()=>async()=>{let e=process.env[jw],t=process.env[Ww],r=process.env[Kw],n=process.env[Yw];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new x("Unable to find environment variable credentials.")};var Lu=require("os"),Mu=require("path"),Ki={},Jw=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Tr=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${Mu.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=Jw();return Ki[o]||(Ki[o]=(0,Lu.homedir)()),Ki[o]};var Yi="AWS_PROFILE",Xw="default",ge=e=>e.profile||process.env[Yi]||Xw;var Bu=require("crypto"),qu=require("path");var No=e=>{let r=(0,Bu.createHash)("sha1").update(e).digest("hex");return(0,qu.join)(Tr(),".aws","sso","cache",`${r}.json`)};var zu=require("fs");var{readFile:Qw}=zu.promises,Po=async e=>{let t=No(e),r=await Qw(t,"utf8");return JSON.parse(r)};var Vu=e=>Object.entries(e).filter(([t])=>{let r=t.split(et);return!!(r.length===2&&Object.values(Ke).includes(r[0]))}).reduce((t,[r,n])=>{let o=r.startsWith(Ke.PROFILE)?r.split(et)[1]:r;return t[o]=n,t},{...e.default&&{default:e.default}});var Hu=require("path");var Zw="AWS_CONFIG_FILE",Do=()=>process.env[Zw]||(0,Hu.join)(Tr(),".aws","config");var Gu=require("path");var eS="AWS_SHARED_CREDENTIALS_FILE",ju=()=>process.env[eS]||(0,Gu.join)(Tr(),".aws","credentials");var tS=/^([\w-]+)\s(["'])?([\w-]+)\2$/,rS=["__proto__","profile __proto__"],nn=e=>{let t={},r,n;for(let o of e.split(/\r?\n/))if(o=o.split(/(^|\s)[;#]/)[0].trim(),o[0]==="["&&o[o.length-1]==="]"){r=void 0,n=void 0;let i=o.substring(1,o.length-1),a=tS.exec(i);if(a){let[,c,,d]=a;Object.values(Ke).includes(c)&&(r=[c,d].join(et))}else r=i;if(rS.includes(i))throw new Error(`Found invalid profile name "${i}"`)}else if(r){let i=o.indexOf("=");if(![0,-1].includes(i)){let[a,c]=[o.substring(0,i).trim(),o.substring(i+1).trim()];if(c==="")n=a;else{t[r]=t[r]||{};let d=n?[n,a].join(et):a;t[r][d]=c}}}return t};var Wu=require("fs"),{readFile:nS}=Wu.promises,Ji={},on=(e,t)=>((!Ji[e]||t!=null&&t.ignoreCache)&&(Ji[e]=nS(e,"utf8")),Ji[e]);var Ku=()=>({}),et=".",ko=async(e={})=>{let{filepath:t=ju(),configFilepath:r=Do()}=e,n=await Promise.all([on(r,{ignoreCache:e.ignoreCache}).then(nn).then(Vu).catch(Ku),on(t,{ignoreCache:e.ignoreCache}).then(nn).catch(Ku)]);return{configFile:n[0],credentialsFile:n[1]}};var Yu=e=>Object.entries(e).filter(([t])=>t.startsWith(Ke.SSO_SESSION+et)).reduce((t,[r,n])=>({...t,[r.split(et)[1]]:n}),{});var oS=()=>({}),Fo=async(e={})=>on(e.configFilepath??Do()).then(nn).then(Yu).catch(oS);var Ju=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t};var qt=async e=>{let t=await ko(e);return Ju(t.configFile,t.credentialsFile)};var ep=require("url");var Xu=require("buffer"),Qu=require("http");function tt(e){return new Promise((t,r)=>{var o;let n=(0,Qu.request)({method:"GET",...e,hostname:(o=e.hostname)==null?void 0:o.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new pe("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new pe("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new pe("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let a=[];s.on("data",c=>{a.push(c)}),s.on("end",()=>{t(Xu.Buffer.concat(a)),n.destroy()})}),n.end()})}var Uo=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",$o=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Lo=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var sn=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var an="AWS_CONTAINER_CREDENTIALS_FULL_URI",cn="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Zu="AWS_CONTAINER_AUTHORIZATION_TOKEN",Mo=(e={})=>{let{timeout:t,maxRetries:r}=Lo(e);return()=>sn(async()=>{let n=await dS(),o=JSON.parse(await sS(t,n));if(!Uo(o))throw new x("Invalid response received from instance metadata service.");return $o(o)},r)},sS=async(e,t)=>(process.env[Zu]&&(t.headers={...t.headers,Authorization:process.env[Zu]}),(await tt({...t,timeout:e})).toString()),iS="169.254.170.2",aS={localhost:!0,"127.0.0.1":!0},cS={"http:":!0,"https:":!0},dS=async()=>{if(process.env[cn])return{hostname:iS,path:process.env[cn]};if(process.env[an]){let e=(0,ep.parse)(process.env[an]);if(!e.hostname||!(e.hostname in aS))throw new x(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in cS))throw new x(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new x(`The container metadata credential provider cannot be used unless the ${cn} or ${an} environment variable is set`,!1)};var tp=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new x(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var rp=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=ge(r),{configFile:o,credentialsFile:s}=await ko(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let l=e(c,t==="config"?o:s);if(l===void 0)throw new Error;return l}catch(d){throw new x(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var lS=e=>typeof e=="function",np=e=>lS(e)?async()=>await e():Ic(e);var _=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>yt(Dn(tp(e),rp(t,n),np(r)));var dn;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(dn||(dn={}));var uS="AWS_EC2_METADATA_SERVICE_ENDPOINT",pS="ec2_metadata_service_endpoint",op={environmentVariableSelector:e=>e[uS],configFileSelector:e=>e[pS],default:void 0};var zt;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(zt||(zt={}));var mS="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",fS="ec2_metadata_service_endpoint_mode",sp={environmentVariableSelector:e=>e[mS],configFileSelector:e=>e[fS],default:zt.IPv4};var ln=async()=>re(await hS()||await yS()),hS=async()=>_(op)(),yS=async()=>{let e=await _(sp)();switch(e){case zt.IPv4:return dn.IPv4;case zt.IPv6:return dn.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(zt)}`)}};var gS="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",Xi=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+gS);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var ip=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=Xi(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=Xi(n,r);else throw s}return n=o,o}};var ap="/latest/meta-data/iam/security-credentials/",ES="/latest/api/token",Bo=(e={})=>ip(xS(e),{logger:e.logger}),xS=e=>{let t=!1,{timeout:r,maxRetries:n}=Lo(e),o=async(s,i)=>{let a=(await sn(async()=>{let c;try{c=await SS(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return sn(async()=>{let c;try{c=await CS(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await ln();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await wS({...s,timeout:r})).toString()}catch(a){if((a==null?void 0:a.statusCode)===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},wS=async e=>tt({...e,path:ES,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),SS=async e=>(await tt({...e,path:ap})).toString(),CS=async(e,t)=>{let r=JSON.parse((await tt({...t,path:ap+e})).toString());if(!Uo(r))throw new x("Invalid response received from instance metadata service.");return $o(r)};var cp=(e,t)=>{let r={EcsContainer:Mo,Ec2InstanceMetadata:Bo,Environment:Oo};if(e in r)return r[e]();throw new x(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var dp=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(vS(e)||_S(e)),vS=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",_S=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",lp=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new x(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new x(`Detected a cycle attempting to resolve credentials for profile ${ge(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?qo(s,t,r,{...n,[s]:!0}):cp(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new x(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};var pp=require("child_process"),mp=require("util");var up=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var fp=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=(0,mp.promisify)(pp.exec);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return up(e,i)}catch(s){throw new x(s.message)}}else throw new x(`Profile ${e} did not contain credential_process.`)}else throw new x(`Profile ${e} could not be found in shared credentials file.`)};var zo=(e={})=>async()=>{let t=await qt(e);return fp(ge(e),t)};var hp=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",yp=async(e,t)=>zo({...e,profile:t})();var un=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var gp=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var Ep={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.427.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/middleware-host-header":"3.425.0","@aws-sdk/middleware-logger":"3.425.0","@aws-sdk/middleware-recursion-detection":"3.425.0","@aws-sdk/middleware-user-agent":"3.427.0","@aws-sdk/region-config-resolver":"3.425.0","@aws-sdk/types":"3.425.0","@aws-sdk/util-endpoints":"3.427.0","@aws-sdk/util-user-agent-browser":"3.425.0","@aws-sdk/util-user-agent-node":"3.425.0","@smithy/config-resolver":"^2.0.11","@smithy/fetch-http-handler":"^2.2.1","@smithy/hash-node":"^2.0.10","@smithy/invalid-dependency":"^2.0.10","@smithy/middleware-content-length":"^2.0.12","@smithy/middleware-endpoint":"^2.0.10","@smithy/middleware-retry":"^2.0.13","@smithy/middleware-serde":"^2.0.10","@smithy/middleware-stack":"^2.0.4","@smithy/node-config-provider":"^2.0.13","@smithy/node-http-handler":"^2.1.6","@smithy/protocol-http":"^3.0.6","@smithy/smithy-client":"^2.1.9","@smithy/types":"^2.3.4","@smithy/url-parser":"^2.0.10","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.13","@smithy/util-defaults-mode-node":"^2.0.15","@smithy/util-retry":"^2.0.3","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var Vo=require("os"),pn=require("process");var xp=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var AS="AWS_SDK_UA_APP_ID",bS="sdk-ua-app-id",Vt=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,Vo.platform)()}`,(0,Vo.release)()],["lang/js"],["md/nodejs",`${pn.versions.node}`]],n=xp();n&&r.push(n),e&&r.push([`api/${e}`,t]),pn.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${pn.env.AWS_EXECUTION_ENV}`]);let o=_({environmentVariableSelector:i=>i[AS],configFileSelector:i=>i[bS],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var Sp=require("buffer"),Ho=require("crypto"),qe=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(Oe(wp(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Ho.createHmac)(this.algorithmIdentifier,wp(this.secret)):(0,Ho.createHash)(this.algorithmIdentifier)}};function wp(e,t){return Sp.Buffer.isBuffer(e)?e:typeof e=="string"?wr(e,t):ArrayBuffer.isView(e)?Et(e.buffer,e.byteOffset,e.byteLength):Et(e)}var Go=require("fs"),Ht=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Go.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Go.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Np="required",_e="fn",Re="argv",Pr="ref",Cp="isSet",rt="tree",Or="error",Nr="endpoint",Qi="PartitionResult",Zi="getAttr",vp={[Np]:!1,type:"String"},_p={[Np]:!0,default:!1,type:"Boolean"},Rp={[Pr]:"Endpoint"},Pp={[_e]:"booleanEquals",[Re]:[{[Pr]:"UseFIPS"},!0]},Dp={[_e]:"booleanEquals",[Re]:[{[Pr]:"UseDualStack"},!0]},Ee={},Ap={[_e]:"booleanEquals",[Re]:[!0,{[_e]:Zi,[Re]:[{[Pr]:Qi},"supportsFIPS"]}]},kp={[Pr]:Qi},bp={[_e]:"booleanEquals",[Re]:[!0,{[_e]:Zi,[Re]:[kp,"supportsDualStack"]}]},Ip=[Pp],Tp=[Dp],Op=[{[Pr]:"Region"}],IS={version:"1.0",parameters:{Region:vp,UseDualStack:_p,UseFIPS:_p,Endpoint:vp},rules:[{conditions:[{[_e]:Cp,[Re]:[Rp]}],type:rt,rules:[{conditions:Ip,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Or},{conditions:Tp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Or},{endpoint:{url:Rp,properties:Ee,headers:Ee},type:Nr}]},{conditions:[{[_e]:Cp,[Re]:Op}],type:rt,rules:[{conditions:[{[_e]:"aws.partition",[Re]:Op,assign:Qi}],type:rt,rules:[{conditions:[Pp,Dp],type:rt,rules:[{conditions:[Ap,bp],type:rt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ee,headers:Ee},type:Nr}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Or}]},{conditions:Ip,type:rt,rules:[{conditions:[Ap],type:rt,rules:[{conditions:[{[_e]:"stringEquals",[Re]:["aws-us-gov",{[_e]:Zi,[Re]:[kp,"name"]}]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ee,headers:Ee},type:Nr},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ee,headers:Ee},type:Nr}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Or}]},{conditions:Tp,type:rt,rules:[{conditions:[bp],type:rt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ee,headers:Ee},type:Nr}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Or}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ee,headers:Ee},type:Nr}]}]},{error:"Invalid Configuration: Missing Region",type:Or}]},Fp=IS;var Up=(e,t={})=>St(Fp,{endpointParams:e,logger:t.logger});var $p=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Ue,base64Encoder:(e==null?void 0:e.base64Encoder)??$e,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Up,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new ke,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??te,utf8Encoder:(e==null?void 0:e.utf8Encoder)??fe});var Lp="AWS_EXECUTION_ENV",ea="AWS_REGION",ta="AWS_DEFAULT_REGION",Mp="AWS_EC2_METADATA_DISABLED",Bp=["in-region","cross-region","mobile","standard","legacy"],qp="/latest/meta-data/placement/region";var TS="AWS_DEFAULTS_MODE",OS="defaults_mode",zp={environmentVariableSelector:e=>e[TS],configFileSelector:e=>e[OS],default:"legacy"};var Gt=({region:e=_(Pe),defaultsMode:t=_(zp)}={})=>yt(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return NS(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Bp.join(", ")}, got ${r}`)}}),NS=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await PS();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},PS=async()=>{if(process.env[Lp]&&(process.env[ea]||process.env[ta]))return process.env[ea]??process.env[ta];if(!process.env[Mp])try{let e=await ln();return(await tt({...e,path:qp})).toString()}catch{}};var Vp=e=>{Mt(process.version);let t=Gt(e),r=()=>t().then(Lt),n=$p(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ht,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Vt({serviceId:n.serviceId,clientVersion:Ep.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??_(Ot),region:(e==null?void 0:e.region)??_(Pe,At),requestHandler:(e==null?void 0:e.requestHandler)??new Le(r),retryMode:(e==null?void 0:e.retryMode)??_({...Pt,default:async()=>(await r()).retryMode||De}),sha256:(e==null?void 0:e.sha256)??qe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Xe,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??_(_t),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??_(Rt)}};var Dr=e=>{let t=async()=>{if(e.region===void 0)throw new Error("Region is missing from runtimeConfig");let r=e.region;return typeof r=="string"?r:r()};return{setRegion(r){t=r},region(){return t}}},kr=e=>({region:e.region()});var ra=e=>e,Hp=(e,t)=>{let r={...ra(Dr(e)),...ra(br(e)),...ra(yr(e))};return t.forEach(n=>n.configure(r)),{...e,...kr(r),...Ir(r),...gr(r)}};var jo=class extends Fe{constructor(...[t]){let r=Vp(t||{}),n=gp(r),o=bt(n),s=Tt(o),i=Nt(s),a=i,c=xt(a),d=Hp(c,(t==null?void 0:t.extensions)||[]);super(d),this.config=d,this.middlewareStack.use(Dt(this.config)),this.middlewareStack.use(It(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(ht(this.config)),this.middlewareStack.use(Ct(this.config))}destroy(){super.destroy()}};var nt=class e extends Be{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Wo=class e extends nt{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ko=class e extends nt{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Yo=class e extends nt{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Jo=class e extends nt{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Gp=e=>({...e,...e.accessToken&&{accessToken:X}}),kS=e=>({...e,...e.secretAccessKey&&{secretAccessKey:X},...e.sessionToken&&{sessionToken:X}}),jp=e=>({...e,...e.roleCredentials&&{roleCredentials:kS(e.roleCredentials)}});var Wp=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=F({},zS,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=F({role_name:[,M(e.roleName,"roleName")],account_id:[,M(e.accountId,"accountId")]}),d;return new O({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Kp=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return FS(e,t);let r=F({$metadata:mn(e)}),n=M(Ar(await Yp(e.body,t)),"body"),o=C(n,{roleCredentials:D});return Object.assign(r,o),r},FS=async(e,t)=>{let r={...e,body:await VS(e.body,t)},n=HS(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await $S(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await LS(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await MS(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await BS(r,t);default:let o=r.body;return US({output:e,parsedBody:o,errorCode:n})}};var US=$t(nt),$S=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{message:h});Object.assign(r,o);let s=new Wo({$metadata:mn(e),...r});return v(s,e.body)},LS=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{message:h});Object.assign(r,o);let s=new Ko({$metadata:mn(e),...r});return v(s,e.body)},MS=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{message:h});Object.assign(r,o);let s=new Yo({$metadata:mn(e),...r});return v(s,e.body)},BS=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{message:h});Object.assign(r,o);let s=new Jo({$metadata:mn(e),...r});return v(s,e.body)},mn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),qS=(e,t)=>Ft(e,t).then(r=>t.utf8Encoder(r)),zS=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Yp=(e,t)=>qS(e,t).then(r=>r.length?JSON.parse(r):{}),VS=async(e,t)=>{let r=await Yp(e,t);return r.message=r.message??r.Message,r},HS=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Xo=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:Gp,outputFilterSensitiveLog:jp,[L]:{service:"SWBPortalService",operation:"GetRoleCredentials"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Wp(t,r)}deserialize(t,r){return Kp(t,r)}};var GS=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),jS={version:"3.387.0"},nm="required",ot="fn",st="argv",Fr="ref",oa="PartitionResult",ze="tree",fn="error",hn="endpoint",Jp={[nm]:!1,type:"String"},Xp={[nm]:!0,default:!1,type:"Boolean"},om={[Fr]:"Endpoint"},sm={[ot]:"booleanEquals",[st]:[{[Fr]:"UseFIPS"},!0]},im={[ot]:"booleanEquals",[st]:[{[Fr]:"UseDualStack"},!0]},Ve={},Qp={[ot]:"booleanEquals",[st]:[!0,{[ot]:"getAttr",[st]:[{[Fr]:oa},"supportsFIPS"]}]},Zp={[ot]:"booleanEquals",[st]:[!0,{[ot]:"getAttr",[st]:[{[Fr]:oa},"supportsDualStack"]}]},em=[om],tm=[sm],rm=[im],WS={version:"1.0",parameters:{Region:Jp,UseDualStack:Xp,UseFIPS:Xp,Endpoint:Jp},rules:[{conditions:[{[ot]:"aws.partition",[st]:[{[Fr]:"Region"}],assign:oa}],type:ze,rules:[{conditions:[{[ot]:"isSet",[st]:em},{[ot]:"parseURL",[st]:em,assign:"url"}],type:ze,rules:[{conditions:tm,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:fn},{type:ze,rules:[{conditions:rm,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:fn},{endpoint:{url:om,properties:Ve,headers:Ve},type:hn}]}]},{conditions:[sm,im],type:ze,rules:[{conditions:[Qp,Zp],type:ze,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ve,headers:Ve},type:hn}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:fn}]},{conditions:tm,type:ze,rules:[{conditions:[Qp],type:ze,rules:[{type:ze,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ve,headers:Ve},type:hn}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:fn}]},{conditions:rm,type:ze,rules:[{conditions:[Zp],type:ze,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ve,headers:Ve},type:hn}]},{error:"DualStack is enabled but this partition does not support DualStack",type:fn}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Ve,headers:Ve},type:hn}]}]},KS=WS,YS=(e,t={})=>St(KS,{endpointParams:e,logger:t.logger}),JS=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Ue,base64Encoder:(e==null?void 0:e.base64Encoder)??$e,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??YS,logger:(e==null?void 0:e.logger)??new ke,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??te,utf8Encoder:(e==null?void 0:e.utf8Encoder)??fe}),XS=e=>{Mt(process.version);let t=Gt(e),r=()=>t().then(Lt),n=JS(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ht,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Vt({serviceId:n.serviceId,clientVersion:jS.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??_(Ot),region:(e==null?void 0:e.region)??_(Pe,At),requestHandler:(e==null?void 0:e.requestHandler)??new Le(r),retryMode:(e==null?void 0:e.retryMode)??_({...Pt,default:async()=>(await r()).retryMode||De}),sha256:(e==null?void 0:e.sha256)??qe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Xe,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??_(_t),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??_(Rt)}},sa=class extends Fe{constructor(...[e]){let t=XS(e||{}),r=GS(t),n=bt(r),o=Tt(n),s=Nt(o),i=s,a=xt(i);super(a),this.config=a,this.middlewareStack.use(Dt(this.config)),this.middlewareStack.use(It(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(ht(this.config)),this.middlewareStack.use(Ct(this.config))}destroy(){super.destroy()}},ae=class am extends Be{constructor(t){super(t),Object.setPrototypeOf(this,am.prototype)}},QS=class cm extends ae{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,cm.prototype),this.error=t.error,this.error_description=t.error_description}},ZS=class dm extends ae{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,dm.prototype),this.error=t.error,this.error_description=t.error_description}},eC=class lm extends ae{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,lm.prototype),this.error=t.error,this.error_description=t.error_description}},tC=class um extends ae{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,um.prototype),this.error=t.error,this.error_description=t.error_description}},rC=class pm extends ae{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,pm.prototype),this.error=t.error,this.error_description=t.error_description}},nC=class mm extends ae{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,mm.prototype),this.error=t.error,this.error_description=t.error_description}},oC=class fm extends ae{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,fm.prototype),this.error=t.error,this.error_description=t.error_description}},sC=class hm extends ae{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,hm.prototype),this.error=t.error,this.error_description=t.error_description}},iC=class ym extends ae{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,ym.prototype),this.error=t.error,this.error_description=t.error_description}},aC=class gm extends ae{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,gm.prototype),this.error=t.error,this.error_description=t.error_description}},cC=class Em extends ae{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Em.prototype),this.error=t.error,this.error_description=t.error_description}},dC=class xm extends ae{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,xm.prototype),this.error=t.error,this.error_description=t.error_description}},lC=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(C(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>D(d)})),new O({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},uC=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/client/register`,c;return c=JSON.stringify(C(e,{clientName:[],clientType:[],scopes:d=>D(d)})),new O({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},pC=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,c;return c=JSON.stringify(C(e,{clientId:[],clientSecret:[],startUrl:[]})),new O({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},mC=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return fC(e,t);let r=F({$metadata:Q(e)}),n=M(Ar(await Qo(e.body,t)),"body"),o=C(n,{accessToken:h,expiresIn:Ut,idToken:h,refreshToken:h,tokenType:h});return Object.assign(r,o),r},fC=async(e,t)=>{let r={...e,body:await da(e.body,t)},n=la(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await xC(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await wC(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await SC(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await aa(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await wm(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await vC(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ca(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Sm(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Cm(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await vm(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await _C(r,t);default:let o=r.body;return ia({output:e,parsedBody:o,errorCode:n})}},hC=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return yC(e,t);let r=F({$metadata:Q(e)}),n=M(Ar(await Qo(e.body,t)),"body"),o=C(n,{authorizationEndpoint:h,clientId:h,clientIdIssuedAt:Eo,clientSecret:h,clientSecretExpiresAt:Eo,tokenEndpoint:h});return Object.assign(r,o),r},yC=async(e,t)=>{let r={...e,body:await da(e.body,t)},n=la(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await aa(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await CC(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ca(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await Sm(r,t);default:let o=r.body;return ia({output:e,parsedBody:o,errorCode:n})}},gC=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return EC(e,t);let r=F({$metadata:Q(e)}),n=M(Ar(await Qo(e.body,t)),"body"),o=C(n,{deviceCode:h,expiresIn:Ut,interval:Ut,userCode:h,verificationUri:h,verificationUriComplete:h});return Object.assign(r,o),r},EC=async(e,t)=>{let r={...e,body:await da(e.body,t)},n=la(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await aa(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await wm(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await ca(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await Cm(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await vm(r,t);default:let o=r.body;return ia({output:e,parsedBody:o,errorCode:n})}},ia=$t(ae),xC=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new QS({$metadata:Q(e),...r});return v(s,e.body)},wC=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new ZS({$metadata:Q(e),...r});return v(s,e.body)},SC=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new eC({$metadata:Q(e),...r});return v(s,e.body)},aa=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new tC({$metadata:Q(e),...r});return v(s,e.body)},wm=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new rC({$metadata:Q(e),...r});return v(s,e.body)},CC=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new dC({$metadata:Q(e),...r});return v(s,e.body)},vC=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new nC({$metadata:Q(e),...r});return v(s,e.body)},ca=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new oC({$metadata:Q(e),...r});return v(s,e.body)},Sm=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new sC({$metadata:Q(e),...r});return v(s,e.body)},Cm=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new iC({$metadata:Q(e),...r});return v(s,e.body)},vm=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new aC({$metadata:Q(e),...r});return v(s,e.body)},_C=async(e,t)=>{let r=F({}),n=e.body,o=C(n,{error:h,error_description:h});Object.assign(r,o);let s=new cC({$metadata:Q(e),...r});return v(s,e.body)},Q=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),RC=(e,t)=>Ft(e,t).then(r=>t.utf8Encoder(r)),Qo=(e,t)=>RC(e,t).then(r=>r.length?JSON.parse(r):{}),da=async(e,t)=>{let r=await Qo(e,t);return r.message=r.message??r.Message,r},la=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},ua=class _m extends T{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,_m.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return lC(t,r)}deserialize(t,r){return mC(t,r)}},AC=class Rm extends T{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Rm.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return uC(t,r)}deserialize(t,r){return hC(t,r)}},bC=class Am extends T{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,Am.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return pC(t,r)}deserialize(t,r){return gC(t,r)}},IC={CreateTokenCommand:ua,RegisterClientCommand:AC,StartDeviceAuthorizationCommand:bC},TC=class extends sa{};hl(IC,TC);var Ur="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var pa={},bm=e=>{if(pa[e])return pa[e];let t=new sa({region:e});return pa[e]=t,t};var Im=(e,t)=>bm(t).send(new ua({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var ma=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new me(`Token is expired. ${Ur}`,!1)};var jt=(e,t,r=!1)=>{if(typeof t>"u")throw new me(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Ur}`,!1)};var Tm=require("fs"),{writeFile:OC}=Tm.promises,Om=(e,t)=>{let r=No(e),n=JSON.stringify(t,null,2);return OC(r,n)};var Nm=new Date(0),Pm=(e={})=>async()=>{let t=await qt(e),r=ge(e),n=t[r];if(n){if(!n.sso_session)throw new me(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new me(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await Fo(e))[o];if(!i)throw new me(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let m of["sso_start_url","sso_region"])if(!i[m])throw new me(`Sso session '${o}' is missing required property '${m}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await Po(o)}catch{throw new me(`The SSO session token associated with profile=${r} was not found or is invalid. ${Ur}`,!1)}jt("accessToken",d.accessToken),jt("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:u}=d,p={token:l,expiration:new Date(u)};if(p.expiration.getTime()-Date.now()>3e5)return p;if(Date.now()-Nm.getTime()<30*1e3)return ma(p),p;jt("clientId",d.clientId,!0),jt("clientSecret",d.clientSecret,!0),jt("refreshToken",d.refreshToken,!0);try{Nm.setTime(Date.now());let m=await Im(d,c);jt("accessToken",m.accessToken),jt("expiresIn",m.expiresIn);let f=new Date(Date.now()+m.expiresIn*1e3);try{await Om(o,{...d,accessToken:m.accessToken,expiresAt:f.toISOString(),refreshToken:m.refreshToken})}catch{}return{token:m.accessToken,expiration:f}}catch{return ma(p),p}};var yn=!1,fa=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let y=await Pm({profile:i})();a={accessToken:y.token,expiresAt:new Date(y.expiration).toISOString()}}catch(y){throw new x(y.message,yn)}else try{a=await Po(e)}catch{throw new x(`The SSO session associated with this profile is invalid. ${c}`,yn)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new x(`The SSO session associated with this profile has expired. ${c}`,yn);let{accessToken:d}=a,l=s||new jo({region:n}),u;try{u=await l.send(new Xo({accountId:r,roleName:o,accessToken:d}))}catch(y){throw x.from(y,yn)}let{roleCredentials:{accessKeyId:p,secretAccessKey:m,sessionToken:f,expiration:E}={}}=u;if(!p||!m||!f||!E)throw new x("SSO returns an invalid temporary credential.",yn);return{accessKeyId:p,secretAccessKey:m,sessionToken:f,expiration:new Date(E)}};var Zo=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new x(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var es=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=ge(e);if(!t&&!r&&!n&&!o&&!i){let d=(await qt(e))[a];if(!d)throw new x(`Profile ${a} was not found.`);if(!un(d))throw new x(`Profile ${a} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let y=(await Fo(e))[d.sso_session],S=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==y.sso_region)throw new x("Conflicting SSO region"+S,!1);if(t&&t!==y.sso_start_url)throw new x("Conflicting SSO start_url"+S,!1);d.sso_region=y.sso_region,d.sso_start_url=y.sso_start_url}let{sso_start_url:l,sso_account_id:u,sso_region:p,sso_role_name:m,sso_session:f}=Zo(d);return fa({ssoStartUrl:l,ssoSession:f,ssoAccountId:u,ssoRegion:p,ssoRoleName:m,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new x('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return fa({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var Dm=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=Zo(e);return es({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var ha=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,ya=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var Fm=require("fs");var km=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new x(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var PC="AWS_WEB_IDENTITY_TOKEN_FILE",DC="AWS_ROLE_ARN",kC="AWS_ROLE_SESSION_NAME",ts=(e={})=>async()=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[PC],r=(e==null?void 0:e.roleArn)??process.env[DC],n=(e==null?void 0:e.roleSessionName)??process.env[kC];if(!t||!r)throw new x("Web identity configuration not specified");return km({...e,webIdentityToken:(0,Fm.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var Um=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,$m=async(e,t)=>ts({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var qo=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&ha(o))return ya(o);if(dp(o))return lp(e,t,r,n);if(ha(o))return ya(o);if(Um(o))return $m(o,r);if(hp(o))return yp(r,e);if(un(o))return Dm(o);throw new x(`Profile ${e} could not be found or parsed in shared credentials file.`)};var Lm=(e={})=>async()=>{let t=await qt(e);return qo(ge(e),t,e)};var FC="AWS_EC2_METADATA_DISABLED",Mm=e=>process.env[cn]||process.env[an]?Mo(e):process.env[FC]?async()=>{throw new x("EC2 Instance Metadata Service access disabled")}:Bo(e);var rs=(e={})=>yt(Dn(...e.profile||process.env[Yi]?[]:[Oo()],es(e),Lm(e),zo(e),ts(e),Mm(e),async()=>{throw new x("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var Jm="required",w="type",A="fn",b="argv",Wt="ref";var tr="booleanEquals",He="tree",W="stringEquals",Xm="sigv4",Qm="sts",Zm="us-east-1",U="endpoint",Bm="https://sts.{Region}.{PartitionResult#dnsSuffix}",$r="error",Ea="getAttr",qm={[Jm]:!1,[w]:"String"},ga={[Jm]:!0,default:!1,[w]:"Boolean"},ef={[Wt]:"Endpoint"},zm={[A]:"isSet",[b]:[{[Wt]:"Region"}]},K={[Wt]:"Region"},Vm={[A]:"aws.partition",[b]:[K],assign:"PartitionResult"},tf={[Wt]:"UseFIPS"},rf={[Wt]:"UseDualStack"},Y={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Xm,signingName:Qm,signingRegion:Zm}]},headers:{}},ce={},Hm={conditions:[{[A]:W,[b]:[K,"aws-global"]}],[U]:Y,[w]:U},nf={[A]:tr,[b]:[tf,!0]},of={[A]:tr,[b]:[rf,!0]},Gm={[A]:tr,[b]:[!0,{[A]:Ea,[b]:[{[Wt]:"PartitionResult"},"supportsFIPS"]}]},sf={[Wt]:"PartitionResult"},jm={[A]:tr,[b]:[!0,{[A]:Ea,[b]:[sf,"supportsDualStack"]}]},Wm=[{[A]:"isSet",[b]:[ef]}],Km=[nf],Ym=[of],UC={version:"1.0",parameters:{Region:qm,UseDualStack:ga,UseFIPS:ga,Endpoint:qm,UseGlobalEndpoint:ga},rules:[{conditions:[{[A]:tr,[b]:[{[Wt]:"UseGlobalEndpoint"},!0]},{[A]:"not",[b]:Wm},zm,Vm,{[A]:tr,[b]:[tf,!1]},{[A]:tr,[b]:[rf,!1]}],[w]:He,rules:[{conditions:[{[A]:W,[b]:[K,"ap-northeast-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"ap-south-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"ap-southeast-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"ap-southeast-2"]}],endpoint:Y,[w]:U},Hm,{conditions:[{[A]:W,[b]:[K,"ca-central-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"eu-central-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"eu-north-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"eu-west-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"eu-west-2"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"eu-west-3"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"sa-east-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,Zm]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"us-east-2"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"us-west-1"]}],endpoint:Y,[w]:U},{conditions:[{[A]:W,[b]:[K,"us-west-2"]}],endpoint:Y,[w]:U},{endpoint:{url:Bm,properties:{authSchemes:[{name:Xm,signingName:Qm,signingRegion:"{Region}"}]},headers:ce},[w]:U}]},{conditions:Wm,[w]:He,rules:[{conditions:Km,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[w]:$r},{conditions:Ym,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[w]:$r},{endpoint:{url:ef,properties:ce,headers:ce},[w]:U}]},{conditions:[zm],[w]:He,rules:[{conditions:[Vm],[w]:He,rules:[{conditions:[nf,of],[w]:He,rules:[{conditions:[Gm,jm],[w]:He,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ce,headers:ce},[w]:U}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[w]:$r}]},{conditions:Km,[w]:He,rules:[{conditions:[Gm],[w]:He,rules:[{conditions:[{[A]:W,[b]:["aws-us-gov",{[A]:Ea,[b]:[sf,"name"]}]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:ce,headers:ce},[w]:U},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ce,headers:ce},[w]:U}]},{error:"FIPS is enabled but this partition does not support FIPS",[w]:$r}]},{conditions:Ym,[w]:He,rules:[{conditions:[jm],[w]:He,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ce,headers:ce},[w]:U}]},{error:"DualStack is enabled but this partition does not support DualStack",[w]:$r}]},Hm,{endpoint:{url:Bm,properties:ce,headers:ce},[w]:U}]}]},{error:"Invalid Configuration: Missing Region",[w]:$r}]},af=UC;var cf=(e,t={})=>St(af,{endpointParams:e,logger:t.logger});var df=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Ue,base64Encoder:(e==null?void 0:e.base64Encoder)??$e,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??cf,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new ke,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??te,utf8Encoder:(e==null?void 0:e.utf8Encoder)??fe});var lf=e=>{Mt(process.version);let t=Gt(e),r=()=>t().then(Lt),n=df(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ht,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??$u(rs),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Vt({serviceId:n.serviceId,clientVersion:Fl.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??_(Ot),region:(e==null?void 0:e.region)??_(Pe,At),requestHandler:(e==null?void 0:e.requestHandler)??new Le(r),retryMode:(e==null?void 0:e.retryMode)??_({...Pt,default:async()=>(await r()).retryMode||De}),sha256:(e==null?void 0:e.sha256)??qe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Xe,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??_(_t),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??_(Rt)}};var xa=e=>e,uf=(e,t)=>{let r={...xa(Dr(e)),...xa(br(e)),...xa(yr(e))};return t.forEach(n=>n.configure(r)),{...e,...kr(r),...Ir(r),...gr(r)}};var gn=class e extends Fe{constructor(...[t]){let r=lf(t||{}),n=kl(r),o=bt(n),s=Tt(o),i=Nt(s),a=i,c=Dl(a,{stsClientCtor:e}),d=xt(c),l=uf(d,(t==null?void 0:t.extensions)||[]);super(l),this.config=l,this.middlewareStack.use(Dt(this.config)),this.middlewareStack.use(It(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(ht(this.config)),this.middlewareStack.use(Ct(this.config))}destroy(){super.destroy()}};var pf=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,$C=(e={},t)=>ji(e,pf(gn,t)),LC=(e={},t)=>Wi(e,pf(gn,t)),mf=e=>t=>e({roleAssumer:$C(t),roleAssumerWithWebIdentity:LC(t),...t});var vf="required",at="fn",ct="argv",Mr="ref",ff="isSet",it="tree",Lr="error",En="endpoint",wa="PartitionResult",hf={[vf]:!1,type:"String"},yf={[vf]:!0,default:!1,type:"Boolean"},gf={[Mr]:"Endpoint"},_f={[at]:"booleanEquals",[ct]:[{[Mr]:"UseFIPS"},!0]},Rf={[at]:"booleanEquals",[ct]:[{[Mr]:"UseDualStack"},!0]},Ge={},Ef={[at]:"booleanEquals",[ct]:[!0,{[at]:"getAttr",[ct]:[{[Mr]:wa},"supportsFIPS"]}]},xf={[at]:"booleanEquals",[ct]:[!0,{[at]:"getAttr",[ct]:[{[Mr]:wa},"supportsDualStack"]}]},wf=[_f],Sf=[Rf],Cf=[{[Mr]:"Region"}],MC={version:"1.0",parameters:{Region:hf,UseDualStack:yf,UseFIPS:yf,Endpoint:hf},rules:[{conditions:[{[at]:ff,[ct]:[gf]}],type:it,rules:[{conditions:wf,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Lr},{conditions:Sf,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Lr},{endpoint:{url:gf,properties:Ge,headers:Ge},type:En}]},{conditions:[{[at]:ff,[ct]:Cf}],type:it,rules:[{conditions:[{[at]:"aws.partition",[ct]:Cf,assign:wa}],type:it,rules:[{conditions:[_f,Rf],type:it,rules:[{conditions:[Ef,xf],type:it,rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ge,headers:Ge},type:En}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Lr}]},{conditions:wf,type:it,rules:[{conditions:[Ef],type:it,rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ge,headers:Ge},type:En}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Lr}]},{conditions:Sf,type:it,rules:[{conditions:[xf],type:it,rules:[{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ge,headers:Ge},type:En}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Lr}]},{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dnsSuffix}",properties:Ge,headers:Ge},type:En}]}]},{error:"Invalid Configuration: Missing Region",type:Lr}]},Af=MC;var bf=(e,t={})=>St(Af,{endpointParams:e,logger:t.logger});var If=e=>({apiVersion:"2020-05-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Ue,base64Encoder:(e==null?void 0:e.base64Encoder)??$e,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??bf,extensions:(e==null?void 0:e.extensions)??[],logger:(e==null?void 0:e.logger)??new ke,serviceId:(e==null?void 0:e.serviceId)??"AppRunner",urlParser:(e==null?void 0:e.urlParser)??re,utf8Decoder:(e==null?void 0:e.utf8Decoder)??te,utf8Encoder:(e==null?void 0:e.utf8Encoder)??fe});var Tf=e=>{Mt(process.version);let t=Gt(e),r=()=>t().then(Lt),n=If(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Ht,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??mf(rs),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Vt({serviceId:n.serviceId,clientVersion:Pl.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??_(Ot),region:(e==null?void 0:e.region)??_(Pe,At),requestHandler:(e==null?void 0:e.requestHandler)??new Le(r),retryMode:(e==null?void 0:e.retryMode)??_({...Pt,default:async()=>(await r()).retryMode||De}),sha256:(e==null?void 0:e.sha256)??qe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Xe,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??_(_t),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??_(Rt)}};var Sa=e=>e,Of=(e,t)=>{let r={...Sa(Dr(e)),...Sa(br(e)),...Sa(yr(e))};return t.forEach(n=>n.configure(r)),{...e,...kr(r),...Ir(r),...gr(r)}};var ns=class extends Fe{constructor(...[t]){let r=Tf(t||{}),n=Nl(r),o=bt(n),s=Tt(o),i=Nt(s),a=i,c=Yn(a),d=xt(c),l=Of(d,(t==null?void 0:t.extensions)||[]);super(l),this.config=l,this.middlewareStack.use(Dt(this.config)),this.middlewareStack.use(It(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(ht(this.config)),this.middlewareStack.use(Xn(this.config)),this.middlewareStack.use(Ct(this.config))}destroy(){super.destroy()}};var je=class e extends Be{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var os=class e extends je{constructor(t){super({name:"InternalServiceErrorException",$fault:"server",...t}),this.name="InternalServiceErrorException",this.$fault="server",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},ss=class e extends je{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},is=class e extends je{constructor(t){super({name:"InvalidStateException",$fault:"client",...t}),this.name="InvalidStateException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}};var as=class e extends je{constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}};var ds={CORRETTO_11:"CORRETTO_11",CORRETTO_8:"CORRETTO_8",DOTNET_6:"DOTNET_6",GO_1:"GO_1",NODEJS_12:"NODEJS_12",NODEJS_14:"NODEJS_14",NODEJS_16:"NODEJS_16",PHP_81:"PHP_81",PYTHON_3:"PYTHON_3",RUBY_31:"RUBY_31"};var Ca={ECR:"ECR",ECR_PUBLIC:"ECR_PUBLIC"},Br={CREATE_FAILED:"CREATE_FAILED",DELETED:"DELETED",DELETE_FAILED:"DELETE_FAILED",OPERATION_IN_PROGRESS:"OPERATION_IN_PROGRESS",PAUSED:"PAUSED",RUNNING:"RUNNING"};var cs=class e extends je{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype),this.Message=t.Message}},Nf={FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS",PENDING:"PENDING",ROLLBACK_FAILED:"ROLLBACK_FAILED",ROLLBACK_IN_PROGRESS:"ROLLBACK_IN_PROGRESS",ROLLBACK_SUCCEEDED:"ROLLBACK_SUCCEEDED",SUCCEEDED:"SUCCEEDED"};var BC=e=>({...e,...e.BuildCommand&&{BuildCommand:X},...e.StartCommand&&{StartCommand:X},...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:X},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:X}}),qC=e=>({...e,...e.CodeConfigurationValues&&{CodeConfigurationValues:BC(e.CodeConfigurationValues)}}),zC=e=>({...e,...e.CodeConfiguration&&{CodeConfiguration:qC(e.CodeConfiguration)}}),VC=e=>({...e,...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:X},...e.StartCommand&&{StartCommand:X},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:X}}),HC=e=>({...e,...e.ImageConfiguration&&{ImageConfiguration:VC(e.ImageConfiguration)}}),va=e=>({...e,...e.CodeRepository&&{CodeRepository:zC(e.CodeRepository)},...e.ImageRepository&&{ImageRepository:HC(e.ImageRepository)}}),Pf=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:va(e.SourceConfiguration)}}),ls=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:va(e.SourceConfiguration)}}),Df=e=>({...e,...e.Service&&{Service:ls(e.Service)}}),kf=e=>({...e,...e.Service&&{Service:ls(e.Service)}}),Ff=e=>({...e,...e.Service&&{Service:ls(e.Service)}});var Uf=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:va(e.SourceConfiguration)}}),$f=e=>({...e,...e.Service&&{Service:ls(e.Service)}});var Lf=async(e,t)=>{let r=ir("CreateService"),n;return n=JSON.stringify(D(e)),sr(t,r,"/",void 0,n)};var Mf=async(e,t)=>{let r=ir("DeleteService"),n;return n=JSON.stringify(D(e)),sr(t,r,"/",void 0,n)};var Bf=async(e,t)=>{let r=ir("DescribeService"),n;return n=JSON.stringify(D(e)),sr(t,r,"/",void 0,n)};var qf=async(e,t)=>{let r=ir("ListOperations"),n;return n=JSON.stringify(D(e)),sr(t,r,"/",void 0,n)},zf=async(e,t)=>{let r=ir("ListServices"),n;return n=JSON.stringify(D(e)),sr(t,r,"/",void 0,n)};var Vf=async(e,t)=>{let r=ir("TagResource"),n;return n=JSON.stringify(D(e)),sr(t,r,"/",void 0,n)};var Hf=async(e,t)=>{let r=ir("UpdateService"),n;return n=JSON.stringify(D(e)),sr(t,r,"/",void 0,n)};var Gf=async(e,t)=>{if(e.statusCode>=300)return GC(e,t);let r=await Kt(e.body,t),n={};return n=ev(r,t),{$metadata:xe(e),...n}},GC=async(e,t)=>{let r={...e,body:await ar(e.body,t)},n=cr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await rr(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await nr(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.apprunner#ServiceQuotaExceededException":throw await QC(r,t);default:let o=r.body;return or({output:e,parsedBody:o,errorCode:n})}};var jf=async(e,t)=>{if(e.statusCode>=300)return jC(e,t);let r=await Kt(e.body,t),n={};return n=tv(r,t),{$metadata:xe(e),...n}},jC=async(e,t)=>{let r={...e,body:await ar(e.body,t)},n=cr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await rr(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await nr(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await _a(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await xn(r,t);default:let o=r.body;return or({output:e,parsedBody:o,errorCode:n})}};var Wf=async(e,t)=>{if(e.statusCode>=300)return WC(e,t);let r=await Kt(e.body,t),n={};return n=rv(r,t),{$metadata:xe(e),...n}},WC=async(e,t)=>{let r={...e,body:await ar(e.body,t)},n=cr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await rr(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await nr(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await xn(r,t);default:let o=r.body;return or({output:e,parsedBody:o,errorCode:n})}};var Kf=async(e,t)=>{if(e.statusCode>=300)return KC(e,t);let r=await Kt(e.body,t),n={};return n=nv(r,t),{$metadata:xe(e),...n}},KC=async(e,t)=>{let r={...e,body:await ar(e.body,t)},n=cr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await rr(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await nr(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await xn(r,t);default:let o=r.body;return or({output:e,parsedBody:o,errorCode:n})}},Yf=async(e,t)=>{if(e.statusCode>=300)return YC(e,t);let r=await Kt(e.body,t),n={};return n=ov(r,t),{$metadata:xe(e),...n}},YC=async(e,t)=>{let r={...e,body:await ar(e.body,t)},n=cr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await rr(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await nr(r,t);default:let o=r.body;return or({output:e,parsedBody:o,errorCode:n})}};var Jf=async(e,t)=>{if(e.statusCode>=300)return JC(e,t);let r=await Kt(e.body,t),n={};return n=D(r),{$metadata:xe(e),...n}},JC=async(e,t)=>{let r={...e,body:await ar(e.body,t)},n=cr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await rr(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await nr(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await _a(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await xn(r,t);default:let o=r.body;return or({output:e,parsedBody:o,errorCode:n})}};var Xf=async(e,t)=>{if(e.statusCode>=300)return XC(e,t);let r=await Kt(e.body,t),n={};return n=dv(r,t),{$metadata:xe(e),...n}},XC=async(e,t)=>{let r={...e,body:await ar(e.body,t)},n=cr(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await rr(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await nr(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await _a(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await xn(r,t);default:let o=r.body;return or({output:e,parsedBody:o,errorCode:n})}};var rr=async(e,t)=>{let r=e.body,n=D(r),o=new os({$metadata:xe(e),...n});return v(o,r)},nr=async(e,t)=>{let r=e.body,n=D(r),o=new ss({$metadata:xe(e),...n});return v(o,r)},_a=async(e,t)=>{let r=e.body,n=D(r),o=new is({$metadata:xe(e),...n});return v(o,r)},xn=async(e,t)=>{let r=e.body,n=D(r),o=new cs({$metadata:xe(e),...n});return v(o,r)},QC=async(e,t)=>{let r=e.body,n=D(r),o=new as({$metadata:xe(e),...n});return v(o,r)};var ZC=(e,t)=>C(e,{AutoScalingConfigurationArn:h,AutoScalingConfigurationName:h,AutoScalingConfigurationRevision:Ut,CreatedAt:r=>M(Me(ie(r))),HasAssociatedService:Ni,IsDefault:Ni,Status:h});var ev=(e,t)=>C(e,{OperationId:h,Service:r=>us(r,t)});var tv=(e,t)=>C(e,{OperationId:h,Service:r=>us(r,t)});var rv=(e,t)=>C(e,{Service:r=>us(r,t)});var nv=(e,t)=>C(e,{NextToken:h,OperationSummaryList:r=>iv(r,t)}),ov=(e,t)=>C(e,{NextToken:h,ServiceSummaryList:r=>cv(r,t)});var sv=(e,t)=>C(e,{EndedAt:r=>M(Me(ie(r))),Id:h,StartedAt:r=>M(Me(ie(r))),Status:h,TargetArn:h,Type:h,UpdatedAt:r=>M(Me(ie(r)))}),iv=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>sv(n,t));var us=(e,t)=>C(e,{AutoScalingConfigurationSummary:r=>ZC(r,t),CreatedAt:r=>M(Me(ie(r))),DeletedAt:r=>M(Me(ie(r))),EncryptionConfiguration:D,HealthCheckConfiguration:D,InstanceConfiguration:D,NetworkConfiguration:D,ObservabilityConfiguration:D,ServiceArn:h,ServiceId:h,ServiceName:h,ServiceUrl:h,SourceConfiguration:D,Status:h,UpdatedAt:r=>M(Me(ie(r)))}),av=(e,t)=>C(e,{CreatedAt:r=>M(Me(ie(r))),ServiceArn:h,ServiceId:h,ServiceName:h,ServiceUrl:h,Status:h,UpdatedAt:r=>M(Me(ie(r)))}),cv=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>av(n,t));var dv=(e,t)=>C(e,{OperationId:h,Service:r=>us(r,t)});var xe=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),lv=(e,t)=>Ft(e,t).then(r=>t.utf8Encoder(r)),or=$t(je),sr=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new O(d)};function ir(e){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`AppRunner.${e}`}}var Kt=(e,t)=>lv(e,t).then(r=>r.length?JSON.parse(r):{}),ar=async(e,t)=>{let r=await Kt(e,t);return r.message=r.message??r.Message,r},cr=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var ps=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"CreateServiceCommand",inputFilterSensitiveLog:Pf,outputFilterSensitiveLog:Df,[L]:{service:"AppRunner",operation:"CreateService"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Lf(t,r)}deserialize(t,r){return Gf(t,r)}};var ms=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"DeleteServiceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:kf,[L]:{service:"AppRunner",operation:"DeleteService"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Mf(t,r)}deserialize(t,r){return jf(t,r)}};var fs=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"DescribeServiceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:Ff,[L]:{service:"AppRunner",operation:"DescribeService"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Bf(t,r)}deserialize(t,r){return Wf(t,r)}};var hs=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"ListOperationsCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[L]:{service:"AppRunner",operation:"ListOperations"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return qf(t,r)}deserialize(t,r){return Kf(t,r)}};var ys=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"ListServicesCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[L]:{service:"AppRunner",operation:"ListServices"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return zf(t,r)}deserialize(t,r){return Yf(t,r)}};var gs=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l,[L]:{service:"AppRunner",operation:"TagResource"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Vf(t,r)}deserialize(t,r){return Jf(t,r)}};var Es=class e extends T{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(N(r,this.serialize,this.deserialize)),this.middlewareStack.use(P(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"UpdateServiceCommand",inputFilterSensitiveLog:Uf,outputFilterSensitiveLog:$f,[L]:{service:"AppRunner",operation:"UpdateService"}},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Hf(t,r)}deserialize(t,r){return Xf(t,r)}};var yh=Ae(fr());var q=Ae(fr());function eh(e,{validation:t,intOnly:r}={}){let n=(0,q.getInput)(e,{required:!1,trimWhitespace:!0});if(!n)return;let o=r?Number.parseInt(n):Number.parseFloat(n);if(isNaN(o))throw new Error(`${e} value is not a valid number: ${n}`);if(t!=null&&t.min&&t.min>o)throw new Error(`${e} value (${o}) is less then the allowed minimum (${t.min})`);if(t!=null&&t.max&&t.max<o)throw new Error(`${e} value (${o}) is greater then the allowed maximum (${t.max})`);return o}function Ra(e,t,{validation:r,intOnly:n}={}){return eh(e,{validation:r,intOnly:n})??t}function uv(e,t){return(0,q.getInput)(e,{required:!1,trimWhitespace:!0})||t}function Qf(e,t){let r=(0,q.getInput)(e,{required:!1,...t});return r.length>0?r:void 0}function pv(e,t){let r=(0,q.getInput)(e,{required:!1,trimWhitespace:!0});return r?["1","true"].includes(r.toLowerCase()):t}function th(){let e=(0,q.getInput)("action",{required:!1,trimWhitespace:!0});switch(e.toLowerCase()||"create_or_update"){case"create_or_update":return mv();default:throw new Error(`Unsupported action: ${e}`)}}function mv(){let e="create_or_update",t=(0,q.getInput)("service",{required:!0,trimWhitespace:!0}),r=Ra("port",80,{intOnly:!0}),n=uv("region","us-east-1"),o=pv("wait-for-service-stability",!1),s=eh("wait-for-service-stability-seconds",{validation:{min:10,max:3600},intOnly:!0}),i=Ra("cpu",1),a=Ra("memory",2),c=(0,q.getInput)("image",{required:!1,trimWhitespace:!0}),d=(0,q.getMultilineInput)("copy-env-vars",{required:!1}),l=(0,q.getMultilineInput)("copy-secret-env-vars",{required:!1}),u=(0,q.getInput)("tags",{required:!1}),p=Qf("auto-scaling-config-arn",{trimWhitespace:!0}),m=Qf("instance-role-arn",{trimWhitespace:!0});return{action:e,serviceName:t,region:n,port:r,waitForService:o||!!s,waitTimeout:s??600,cpu:i,memory:a,sourceConfig:c?hv(c):yv(),environment:Zf(d),environmentSecret:Zf(l),tags:Ev(u),autoScalingConfigArn:p,instanceRoleArn:m}}function fv(){let e=(0,q.getInput)("branch",{required:!1})||"main";return e.startsWith("refs/")?e.split("/")[2]:e}function hv(e){if((0,q.getInput)("repo",{required:!1}))throw new Error("Either docker image registry or code repository expected, not both");return{sourceType:"image",imageUri:e,accessRoleArn:(0,q.getInput)("access-role-arn",{required:!0})}}function yv(){return{sourceType:"code",sourceConnectionArn:(0,q.getInput)("source-connection-arn",{required:!0}),repoUrl:(0,q.getInput)("repo",{required:!0}),branch:fv(),runtime:gv(),buildCommand:(0,q.getInput)("build-command",{required:!0}),startCommand:(0,q.getInput)("start-command",{required:!0})}}function gv(){let e=(0,q.getInput)("runtime",{required:!0}),t=e.toUpperCase();if(!Object.keys(ds).includes(t))throw new Error(`Specified runtime (${e}) does not belong to the supported range: ${JSON.stringify(Object.keys(ds))}`);return ds[t]}function Zf(e){if(e.length>0){let t=e.reduce((r,n)=>{let o=process.env[n];return o!==void 0&&(r[n]=o),r},{});if(Object.keys(t).length>0)return t}}function Ev(e){if(!e.length)return[];let t=JSON.parse(e);return Object.keys(t).reduce((r,n)=>[...r,{Key:n,Value:t[n]}],[])}var oe=Ae(fr());function rh(e){return new ps({ServiceName:e.serviceName,InstanceConfiguration:{Cpu:`${e.cpu} vCPU`,Memory:`${e.memory} GB`,InstanceRoleArn:e.instanceRoleArn},AutoScalingConfigurationArn:e.autoScalingConfigArn,SourceConfiguration:e.sourceConfig.sourceType=="image"?lh(e.port,e.sourceConfig,e.environment,e.environmentSecret):dh(e.port,e.sourceConfig,e.environment,e.environmentSecret),Tags:e.tags})}function nh(e,t){return new Es({ServiceArn:e,InstanceConfiguration:{Cpu:`${t.cpu} vCPU`,Memory:`${t.memory} GB`,InstanceRoleArn:t.instanceRoleArn},AutoScalingConfigurationArn:t.autoScalingConfigArn,SourceConfiguration:t.sourceConfig.sourceType=="image"?lh(t.port,t.sourceConfig,t.environment,t.environmentSecret):dh(t.port,t.sourceConfig,t.environment,t.environmentSecret)})}function oh(e,t){return new gs({ResourceArn:e,Tags:t.tags})}function sh(e){return new ms({ServiceArn:e})}function ih(e){return new fs({ServiceArn:e})}function ah(e){return new ys({NextToken:e})}function ch(e){return new hs({ServiceArn:e})}function xv(e){return e.startsWith("public.ecr")?Ca.ECR_PUBLIC:Ca.ECR}function dh(e,t,r,n){return{AuthenticationConfiguration:{ConnectionArn:t.sourceConnectionArn},AutoDeploymentsEnabled:!0,CodeRepository:{RepositoryUrl:t.repoUrl,SourceCodeVersion:{Type:"BRANCH",Value:t.branch},CodeConfiguration:{ConfigurationSource:"API",CodeConfigurationValues:{Runtime:t.runtime,BuildCommand:t.buildCommand,StartCommand:t.startCommand,Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:n}}}}}function lh(e,t,r,n){return{AuthenticationConfiguration:{AccessRoleArn:t.accessRoleArn},ImageRepository:{ImageIdentifier:t.imageUri,ImageRepositoryType:xv(t.imageUri),ImageConfiguration:{Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:n}}}}function wv(e){return new Promise(t=>setTimeout(t,e))}async function ph(e,t){let r;do{let n=await e.send(ah(r));if(r=n.NextToken,n.ServiceSummaryList){for(let o of n.ServiceSummaryList)if(o.ServiceName===t&&o.ServiceArn)return(0,oe.info)(`Discovered ${t} (${o.ServiceArn}) with the following status: ${o.Status}`),{ServiceArn:o.ServiceArn,Status:o.Status}}}while(r)}async function uh(e,t){(0,oe.info)(`Creating service ${t.serviceName}`);let r=rh(t);return(await e.send(r)).Service}async function Sv(e,t,r){(0,oe.info)(`Updating existing service ${t.serviceName} (${r})`);let n=nh(r,t);return await e.send(n)}async function Cv(e,t,r){if((0,oe.info)(`Updating tags service ${t.serviceName} (${r})`),t.tags.length){let n=oh(r,t);await e.send(n)}}async function vv(e,t,r){(0,oe.info)(`Deleting existing service ${t.serviceName} (${r})`);let n=sh(r),o=await e.send(n);(0,oe.info)(`Delete service response: ${JSON.stringify(o.Service)}`)}async function _v(e,t){let r=ch(t);return(await e.send(r)).OperationSummaryList}async function Rv(e,t,r){if(!t)throw new Error(`Failed to create or update service ${e.serviceName} - App Runner Client returned an empty response`);let n=t.ServiceId;if(n)(0,oe.info)(`Service ID: ${n}`);else throw new Error(`App Runner Client returned an empty ServiceId for ${e.serviceName}`);let o=t.ServiceArn;if(o)(0,oe.info)(`Service ARN: ${o}`);else throw new Error(`App Runner Client returned an empty ServiceArn for ${e.serviceName}`);let s=t.ServiceUrl??"";return s===""?(0,oe.info)(`App Runner Client returned an empty ServiceUrl for ${e.serviceName}, this could happen if the deployment is of an AWS App Runner Private Service`):(0,oe.info)(`Service URL: ${s}`),{ServiceId:n,ServiceArn:o,ServiceUrl:s,OperationId:r}}async function mh(e,t,r){let n,o;if(r)if((0,oe.info)(`Existing service info: ${JSON.stringify(r)}`),r.Status===Br.CREATE_FAILED){await vv(e,t,r.ServiceArn);let s=await Aa(e,r.ServiceArn,900);if(s===Br.DELETED)n=await uh(e,t);else throw new Error(`Failed to delete service ${t.serviceName} (${r.ServiceArn}). Its current status is ${s}`)}else{await Cv(e,t,r.ServiceArn);let s=await Sv(e,t,r.ServiceArn);n=s.Service,o=s.OperationId}else n=await uh(e,t);return Rv(t,n,o)}async function Av(e,t){let n=(await e.send(ih(t))).Service;if(!n)throw new Error(`App Runner Client returned an empty Service for ${t}`);return{ServiceArn:t,Status:n.Status}}async function fh(e,t,r){let n=await _v(e,t);if(n){for(let o of n)if(r===o.Id&&o.Status!==Nf.SUCCEEDED)throw new Error(`Operation ${r} is not successful. Its current status is ${o.Status}`)}}async function Aa(e,t,r){let n=new Date(new Date().getTime()+r*1e3).getTime(),o=Br.OPERATION_IN_PROGRESS;for((0,oe.info)(`Waiting for ${t} to reach stable state`);o===Br.OPERATION_IN_PROGRESS&&n>=new Date().getTime();){let s=new Date().getTime();if(o=(await Av(e,t)).Status,o!==Br.OPERATION_IN_PROGRESS)return(0,oe.info)(`Service ${t} has reached the stable state ${o}`),o;let c=1e3-(new Date().getTime()-s);c>0&&await wv(c)}throw new Error(`Service ${t} did not reach stable state within ${r} seconds`)}var hh="2.5.0";async function gh(){try{let e=th(),t=new ns({region:e.region}),r=await ph(t,e.serviceName),n=await mh(t,e,r);(0,we.setOutput)("service-id",n.ServiceId),(0,we.setOutput)("service-arn",n.ServiceArn),(0,we.setOutput)("service-url",n.ServiceUrl),e.waitForService?(await Aa(t,n.ServiceArn,e.waitTimeout),r&&n.OperationId&&await fh(t,n.ServiceArn,n.OperationId)):(0,we.info)(`Service ${n.ServiceId} has started an update. Watch for its progress in the AppRunner console`)}catch(e){e instanceof Error?((0,we.setFailed)(e.message),(0,yh.debug)(e.stack??"no stack info")):(0,we.setFailed)(JSON.stringify(e))}}require.main===module&&((0,we.info)(`Version: ${hh??"undefined"}`),gh().then(()=>{(0,we.info)("App Runner step - DONE!")}).catch(e=>{(0,we.setFailed)(`App Runner unhandled exception: ${e.message}`)}));0&&(module.exports={run});
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
