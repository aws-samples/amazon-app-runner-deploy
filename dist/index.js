"use strict";var Fm=Object.create;var qn=Object.defineProperty;var Um=Object.getOwnPropertyDescriptor;var $m=Object.getOwnPropertyNames;var Lm=Object.getPrototypeOf,Mm=Object.prototype.hasOwnProperty;var $=(e,t)=>()=>(e&&(t=e(e=0)),t);var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),tr=(e,t)=>{for(var r in t)qn(e,r,{get:t[r],enumerable:!0})},na=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of $m(t))!Mm.call(e,o)&&o!==r&&qn(e,o,{get:()=>t[o],enumerable:!(n=Um(t,o))||n.enumerable});return e};var be=(e,t,r)=>(r=e!=null?Fm(Lm(e)):{},na(t||!e||!e.__esModule?qn(r,"default",{value:e,enumerable:!0}):r,e)),dn=e=>na(qn({},"__esModule",{value:!0}),e);var zn=_(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.toCommandProperties=rr.toCommandValue=void 0;function Bm(e){return e==null?"":typeof e=="string"||e instanceof String?e:JSON.stringify(e)}rr.toCommandValue=Bm;function qm(e){return Object.keys(e).length?{title:e.title,file:e.file,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}}rr.toCommandProperties=qm});var aa=_(ce=>{"use strict";var zm=ce&&ce.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vm=ce&&ce.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),jm=ce&&ce.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&zm(t,e,r);return Vm(t,e),t};Object.defineProperty(ce,"__esModule",{value:!0});ce.issue=ce.issueCommand=void 0;var Gm=jm(require("os")),sa=zn();function ia(e,t,r){let n=new ls(e,t,r);process.stdout.write(n.toString()+Gm.EOL)}ce.issueCommand=ia;function Hm(e,t=""){ia(e,{},t)}ce.issue=Hm;var oa="::",ls=class{constructor(t,r,n){t||(t="missing.command"),this.command=t,this.properties=r,this.message=n}toString(){let t=oa+this.command;if(this.properties&&Object.keys(this.properties).length>0){t+=" ";let r=!0;for(let n in this.properties)if(this.properties.hasOwnProperty(n)){let o=this.properties[n];o&&(r?r=!1:t+=",",t+=`${n}=${Km(o)}`)}}return t+=`${oa}${Wm(this.message)}`,t}};function Wm(e){return sa.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function Km(e){return sa.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}});function ln(){return Vn>jn.length-16&&(ca.default.randomFillSync(jn),Vn=0),jn.slice(Vn,Vn+=16)}var ca,jn,Vn,us=$(()=>{ca=be(require("crypto")),jn=new Uint8Array(256),Vn=jn.length});var da,la=$(()=>{da=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function Ym(e){return typeof e=="string"&&da.test(e)}var et,un=$(()=>{la();et=Ym});function Jm(e,t=0){let r=(q[e[t+0]]+q[e[t+1]]+q[e[t+2]]+q[e[t+3]]+"-"+q[e[t+4]]+q[e[t+5]]+"-"+q[e[t+6]]+q[e[t+7]]+"-"+q[e[t+8]]+q[e[t+9]]+"-"+q[e[t+10]]+q[e[t+11]]+q[e[t+12]]+q[e[t+13]]+q[e[t+14]]+q[e[t+15]]).toLowerCase();if(!et(r))throw TypeError("Stringified UUID is invalid");return r}var q,tt,pn=$(()=>{un();q=[];for(let e=0;e<256;++e)q.push((e+256).toString(16).substr(1));tt=Jm});function Xm(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||ua,i=e.clockseq!==void 0?e.clockseq:ps;if(s==null||i==null){let p=e.random||(e.rng||ln)();s==null&&(s=ua=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),i==null&&(i=ps=(p[6]<<8|p[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:ms+1,d=a-fs+(c-ms)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>fs)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");fs=a,ms=c,ps=i,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;let u=a/4294967296*1e4&268435455;o[n++]=u>>>8&255,o[n++]=u&255,o[n++]=u>>>24&15|16,o[n++]=u>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let p=0;p<6;++p)o[n+p]=s[p];return t||tt(o)}var ua,ps,fs,ms,pa,fa=$(()=>{us();pn();fs=0,ms=0;pa=Xm});function Qm(e){if(!et(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Gn,hs=$(()=>{un();Gn=Qm});function Zm(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function Hn(e,t,r){function n(o,s,i,a){if(typeof o=="string"&&(o=Zm(o)),typeof s=="string"&&(s=Gn(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=r(c),c[6]=c[6]&15|t,c[8]=c[8]&63|128,i){a=a||0;for(let d=0;d<16;++d)i[a+d]=c[d];return i}return tt(c)}try{n.name=e}catch{}return n.DNS=eh,n.URL=th,n}var eh,th,ys=$(()=>{pn();hs();eh="6ba7b810-9dad-11d1-80b4-00c04fd430c8",th="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function rh(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),ma.default.createHash("md5").update(e).digest()}var ma,ha,ya=$(()=>{ma=be(require("crypto"));ha=rh});var nh,ga,Ea=$(()=>{ys();ya();nh=Hn("v3",48,ha),ga=nh});function oh(e,t,r){e=e||{};let n=e.random||(e.rng||ln)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return tt(n)}var Wn,wa=$(()=>{us();pn();Wn=oh});function sh(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),xa.default.createHash("sha1").update(e).digest()}var xa,Sa,Ca=$(()=>{xa=be(require("crypto"));Sa=sh});var ih,_a,ba=$(()=>{ys();Ca();ih=Hn("v5",80,Sa),_a=ih});var Ra,va=$(()=>{Ra="00000000-0000-0000-0000-000000000000"});function ah(e){if(!et(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Aa,Ia=$(()=>{un();Aa=ah});var Ta={};tr(Ta,{NIL:()=>Ra,parse:()=>Gn,stringify:()=>tt,v1:()=>pa,v3:()=>ga,v4:()=>Wn,v5:()=>_a,validate:()=>et,version:()=>Aa});var gs=$(()=>{fa();Ea();wa();ba();va();Ia();un();pn();hs()});var Da=_(de=>{"use strict";var ch=de&&de.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dh=de&&de.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Na=de&&de.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&ch(t,e,r);return dh(t,e),t};Object.defineProperty(de,"__esModule",{value:!0});de.prepareKeyValueMessage=de.issueFileCommand=void 0;var Oa=Na(require("fs")),Es=Na(require("os")),lh=(gs(),dn(Ta)),Pa=zn();function uh(e,t){let r=process.env[`GITHUB_${e}`];if(!r)throw new Error(`Unable to find environment variable for file command ${e}`);if(!Oa.existsSync(r))throw new Error(`Missing file at path: ${r}`);Oa.appendFileSync(r,`${Pa.toCommandValue(t)}${Es.EOL}`,{encoding:"utf8"})}de.issueFileCommand=uh;function ph(e,t){let r=`ghadelimiter_${lh.v4()}`,n=Pa.toCommandValue(t);if(e.includes(r))throw new Error(`Unexpected input: name should not contain the delimiter "${r}"`);if(n.includes(r))throw new Error(`Unexpected input: value should not contain the delimiter "${r}"`);return`${e}<<${r}${Es.EOL}${n}${Es.EOL}${r}`}de.prepareKeyValueMessage=ph});var Fa=_(nr=>{"use strict";Object.defineProperty(nr,"__esModule",{value:!0});nr.checkBypass=nr.getProxyUrl=void 0;function fh(e){let t=e.protocol==="https:";if(ka(e))return;let r=(()=>t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY)();if(r)return new URL(r)}nr.getProxyUrl=fh;function ka(e){if(!e.hostname)return!1;let t=process.env.no_proxy||process.env.NO_PROXY||"";if(!t)return!1;let r;e.port?r=Number(e.port):e.protocol==="http:"?r=80:e.protocol==="https:"&&(r=443);let n=[e.hostname.toUpperCase()];typeof r=="number"&&n.push(`${n[0]}:${r}`);for(let o of t.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(n.some(s=>s===o))return!0;return!1}nr.checkBypass=ka});var Ma=_(or=>{"use strict";var f0=require("net"),mh=require("tls"),ws=require("http"),Ua=require("https"),hh=require("events"),m0=require("assert"),yh=require("util");or.httpOverHttp=gh;or.httpsOverHttp=Eh;or.httpOverHttps=wh;or.httpsOverHttps=xh;function gh(e){var t=new ze(e);return t.request=ws.request,t}function Eh(e){var t=new ze(e);return t.request=ws.request,t.createSocket=$a,t.defaultPort=443,t}function wh(e){var t=new ze(e);return t.request=Ua.request,t}function xh(e){var t=new ze(e);return t.request=Ua.request,t.createSocket=$a,t.defaultPort=443,t}function ze(e){var t=this;t.options=e||{},t.proxyOptions=t.options.proxy||{},t.maxSockets=t.options.maxSockets||ws.Agent.defaultMaxSockets,t.requests=[],t.sockets=[],t.on("free",function(n,o,s,i){for(var a=La(o,s,i),c=0,d=t.requests.length;c<d;++c){var l=t.requests[c];if(l.host===a.host&&l.port===a.port){t.requests.splice(c,1),l.request.onSocket(n);return}}n.destroy(),t.removeSocket(n)})}yh.inherits(ze,hh.EventEmitter);ze.prototype.addRequest=function(t,r,n,o){var s=this,i=xs({request:t},s.options,La(r,n,o));if(s.sockets.length>=this.maxSockets){s.requests.push(i);return}s.createSocket(i,function(a){a.on("free",c),a.on("close",d),a.on("agentRemove",d),t.onSocket(a);function c(){s.emit("free",a,i)}function d(l){s.removeSocket(a),a.removeListener("free",c),a.removeListener("close",d),a.removeListener("agentRemove",d)}})};ze.prototype.createSocket=function(t,r){var n=this,o={};n.sockets.push(o);var s=xs({},n.proxyOptions,{method:"CONNECT",path:t.host+":"+t.port,agent:!1,headers:{host:t.host+":"+t.port}});t.localAddress&&(s.localAddress=t.localAddress),s.proxyAuth&&(s.headers=s.headers||{},s.headers["Proxy-Authorization"]="Basic "+new Buffer(s.proxyAuth).toString("base64")),rt("making CONNECT request");var i=n.request(s);i.useChunkedEncodingByDefault=!1,i.once("response",a),i.once("upgrade",c),i.once("connect",d),i.once("error",l),i.end();function a(u){u.upgrade=!0}function c(u,p,f){process.nextTick(function(){d(u,p,f)})}function d(u,p,f){if(i.removeAllListeners(),p.removeAllListeners(),u.statusCode!==200){rt("tunneling socket could not be established, statusCode=%d",u.statusCode),p.destroy();var m=new Error("tunneling socket could not be established, statusCode="+u.statusCode);m.code="ECONNRESET",t.request.emit("error",m),n.removeSocket(o);return}if(f.length>0){rt("got illegal response body from proxy"),p.destroy();var m=new Error("got illegal response body from proxy");m.code="ECONNRESET",t.request.emit("error",m),n.removeSocket(o);return}return rt("tunneling connection has established"),n.sockets[n.sockets.indexOf(o)]=p,r(p)}function l(u){i.removeAllListeners(),rt(`tunneling socket could not be established, cause=%s
`,u.message,u.stack);var p=new Error("tunneling socket could not be established, cause="+u.message);p.code="ECONNRESET",t.request.emit("error",p),n.removeSocket(o)}};ze.prototype.removeSocket=function(t){var r=this.sockets.indexOf(t);if(r!==-1){this.sockets.splice(r,1);var n=this.requests.shift();n&&this.createSocket(n,function(o){n.request.onSocket(o)})}};function $a(e,t){var r=this;ze.prototype.createSocket.call(r,e,function(n){var o=e.request.getHeader("host"),s=xs({},r.options,{socket:n,servername:o?o.replace(/:.*$/,""):e.host}),i=mh.connect(0,s);r.sockets[r.sockets.indexOf(n)]=i,t(i)})}function La(e,t,r){return typeof e=="string"?{host:e,port:t,localAddress:r}:e}function xs(e){for(var t=1,r=arguments.length;t<r;++t){var n=arguments[t];if(typeof n=="object")for(var o=Object.keys(n),s=0,i=o.length;s<i;++s){var a=o[s];n[a]!==void 0&&(e[a]=n[a])}}return e}var rt;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?rt=function(){var e=Array.prototype.slice.call(arguments);typeof e[0]=="string"?e[0]="TUNNEL: "+e[0]:e.unshift("TUNNEL:"),console.error.apply(console,e)}:rt=function(){};or.debug=rt});var qa=_((y0,Ba)=>{Ba.exports=Ma()});var Va=_(A=>{"use strict";var Sh=A&&A.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Ch=A&&A.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Qn=A&&A.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Sh(t,e,r);return Ch(t,e),t},L=A&&A.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(A,"__esModule",{value:!0});A.HttpClient=A.isHttps=A.HttpClientResponse=A.HttpClientError=A.getProxyUrl=A.MediaTypes=A.Headers=A.HttpCodes=void 0;var Kn=Qn(require("http")),Ss=Qn(require("https")),za=Qn(Fa()),Yn=Qn(qa()),Se;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(Se=A.HttpCodes||(A.HttpCodes={}));var Y;(function(e){e.Accept="accept",e.ContentType="content-type"})(Y=A.Headers||(A.Headers={}));var nt;(function(e){e.ApplicationJson="application/json"})(nt=A.MediaTypes||(A.MediaTypes={}));function _h(e){let t=za.getProxyUrl(new URL(e));return t?t.href:""}A.getProxyUrl=_h;var bh=[Se.MovedPermanently,Se.ResourceMoved,Se.SeeOther,Se.TemporaryRedirect,Se.PermanentRedirect],Rh=[Se.BadGateway,Se.ServiceUnavailable,Se.GatewayTimeout],vh=["OPTIONS","GET","DELETE","HEAD"],Ah=10,Ih=5,sr=class extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,sr.prototype)}};A.HttpClientError=sr;var Xn=class{constructor(t){this.message=t}readBody(){return L(this,void 0,void 0,function*(){return new Promise(t=>L(this,void 0,void 0,function*(){let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})}))})}};A.HttpClientResponse=Xn;function Th(e){return new URL(e).protocol==="https:"}A.isHttps=Th;var Cs=class{constructor(t,r,n){this._ignoreSslError=!1,this._allowRedirects=!0,this._allowRedirectDowngrade=!1,this._maxRedirects=50,this._allowRetries=!1,this._maxRetries=1,this._keepAlive=!1,this._disposed=!1,this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}options(t,r){return L(this,void 0,void 0,function*(){return this.request("OPTIONS",t,null,r||{})})}get(t,r){return L(this,void 0,void 0,function*(){return this.request("GET",t,null,r||{})})}del(t,r){return L(this,void 0,void 0,function*(){return this.request("DELETE",t,null,r||{})})}post(t,r,n){return L(this,void 0,void 0,function*(){return this.request("POST",t,r,n||{})})}patch(t,r,n){return L(this,void 0,void 0,function*(){return this.request("PATCH",t,r,n||{})})}put(t,r,n){return L(this,void 0,void 0,function*(){return this.request("PUT",t,r,n||{})})}head(t,r){return L(this,void 0,void 0,function*(){return this.request("HEAD",t,null,r||{})})}sendStream(t,r,n,o){return L(this,void 0,void 0,function*(){return this.request(t,r,n,o)})}getJson(t,r={}){return L(this,void 0,void 0,function*(){r[Y.Accept]=this._getExistingOrDefaultHeader(r,Y.Accept,nt.ApplicationJson);let n=yield this.get(t,r);return this._processResponse(n,this.requestOptions)})}postJson(t,r,n={}){return L(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Y.Accept]=this._getExistingOrDefaultHeader(n,Y.Accept,nt.ApplicationJson),n[Y.ContentType]=this._getExistingOrDefaultHeader(n,Y.ContentType,nt.ApplicationJson);let s=yield this.post(t,o,n);return this._processResponse(s,this.requestOptions)})}putJson(t,r,n={}){return L(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Y.Accept]=this._getExistingOrDefaultHeader(n,Y.Accept,nt.ApplicationJson),n[Y.ContentType]=this._getExistingOrDefaultHeader(n,Y.ContentType,nt.ApplicationJson);let s=yield this.put(t,o,n);return this._processResponse(s,this.requestOptions)})}patchJson(t,r,n={}){return L(this,void 0,void 0,function*(){let o=JSON.stringify(r,null,2);n[Y.Accept]=this._getExistingOrDefaultHeader(n,Y.Accept,nt.ApplicationJson),n[Y.ContentType]=this._getExistingOrDefaultHeader(n,Y.ContentType,nt.ApplicationJson);let s=yield this.patch(t,o,n);return this._processResponse(s,this.requestOptions)})}request(t,r,n,o){return L(this,void 0,void 0,function*(){if(this._disposed)throw new Error("Client has already been disposed.");let s=new URL(r),i=this._prepareRequest(t,s,o),a=this._allowRetries&&vh.includes(t)?this._maxRetries+1:1,c=0,d;do{if(d=yield this.requestRaw(i,n),d&&d.message&&d.message.statusCode===Se.Unauthorized){let u;for(let p of this.handlers)if(p.canHandleAuthentication(d)){u=p;break}return u?u.handleAuthentication(this,i,n):d}let l=this._maxRedirects;for(;d.message.statusCode&&bh.includes(d.message.statusCode)&&this._allowRedirects&&l>0;){let u=d.message.headers.location;if(!u)break;let p=new URL(u);if(s.protocol==="https:"&&s.protocol!==p.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(yield d.readBody(),p.hostname!==s.hostname)for(let f in o)f.toLowerCase()==="authorization"&&delete o[f];i=this._prepareRequest(t,p,o),d=yield this.requestRaw(i,n),l--}if(!d.message.statusCode||!Rh.includes(d.message.statusCode))return d;c+=1,c<a&&(yield d.readBody(),yield this._performExponentialBackoff(c))}while(c<a);return d})}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}requestRaw(t,r){return L(this,void 0,void 0,function*(){return new Promise((n,o)=>{function s(i,a){i?o(i):a?n(a):o(new Error("Unknown error"))}this.requestRawWithCallback(t,r,s)})})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let o=!1;function s(c,d){o||(o=!0,n(c,d))}let i=t.httpModule.request(t.options,c=>{let d=new Xn(c);s(void 0,d)}),a;i.on("socket",c=>{a=c}),i.setTimeout(this._socketTimeout||3*6e4,()=>{a&&a.end(),s(new Error(`Request timeout: ${t.options.path}`))}),i.on("error",function(c){s(c)}),r&&typeof r=="string"&&i.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){i.end()}),r.pipe(i)):i.end()}getAgent(t){let r=new URL(t);return this._getAgent(r)}_prepareRequest(t,r,n){let o={};o.parsedUrl=r;let s=o.parsedUrl.protocol==="https:";o.httpModule=s?Ss:Kn;let i=s?443:80;if(o.options={},o.options.host=o.parsedUrl.hostname,o.options.port=o.parsedUrl.port?parseInt(o.parsedUrl.port):i,o.options.path=(o.parsedUrl.pathname||"")+(o.parsedUrl.search||""),o.options.method=t,o.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(o.options.headers["user-agent"]=this.userAgent),o.options.agent=this._getAgent(o.parsedUrl),this.handlers)for(let a of this.handlers)a.prepareRequest(o.options);return o}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Jn(this.requestOptions.headers),Jn(t||{})):Jn(t||{})}_getExistingOrDefaultHeader(t,r,n){let o;return this.requestOptions&&this.requestOptions.headers&&(o=Jn(this.requestOptions.headers)[r]),t[r]||o||n}_getAgent(t){let r,n=za.getProxyUrl(t),o=n&&n.hostname;if(this._keepAlive&&o&&(r=this._proxyAgent),this._keepAlive&&!o&&(r=this._agent),r)return r;let s=t.protocol==="https:",i=100;if(this.requestOptions&&(i=this.requestOptions.maxSockets||Kn.globalAgent.maxSockets),n&&n.hostname){let a={maxSockets:i,keepAlive:this._keepAlive,proxy:Object.assign(Object.assign({},(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`}),{host:n.hostname,port:n.port})},c,d=n.protocol==="https:";s?c=d?Yn.httpsOverHttps:Yn.httpsOverHttp:c=d?Yn.httpOverHttps:Yn.httpOverHttp,r=c(a),this._proxyAgent=r}if(this._keepAlive&&!r){let a={keepAlive:this._keepAlive,maxSockets:i};r=s?new Ss.Agent(a):new Kn.Agent(a),this._agent=r}return r||(r=s?Ss.globalAgent:Kn.globalAgent),s&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}_performExponentialBackoff(t){return L(this,void 0,void 0,function*(){t=Math.min(Ah,t);let r=Ih*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))})}_processResponse(t,r){return L(this,void 0,void 0,function*(){return new Promise((n,o)=>L(this,void 0,void 0,function*(){let s=t.message.statusCode||0,i={statusCode:s,result:null,headers:{}};s===Se.NotFound&&n(i);function a(l,u){if(typeof u=="string"){let p=new Date(u);if(!isNaN(p.valueOf()))return p}return u}let c,d;try{d=yield t.readBody(),d&&d.length>0&&(r&&r.deserializeDates?c=JSON.parse(d,a):c=JSON.parse(d),i.result=c),i.headers=t.message.headers}catch{}if(s>299){let l;c&&c.message?l=c.message:d&&d.length>0?l=d:l=`Failed request: (${s})`;let u=new sr(l,s);u.result=i.result,o(u)}else n(i)}))})}};A.HttpClient=Cs;var Jn=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{})});var ja=_(Re=>{"use strict";var vs=Re&&Re.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Re,"__esModule",{value:!0});Re.PersonalAccessTokenCredentialHandler=Re.BearerCredentialHandler=Re.BasicCredentialHandler=void 0;var _s=class{constructor(t,r){this.username=t,this.password=r}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return vs(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Re.BasicCredentialHandler=_s;var bs=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return vs(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Re.BearerCredentialHandler=bs;var Rs=class{constructor(t){this.token=t}prepareRequest(t){if(!t.headers)throw Error("The request has no headers");t.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return vs(this,void 0,void 0,function*(){throw new Error("not implemented")})}};Re.PersonalAccessTokenCredentialHandler=Rs});var Wa=_(ir=>{"use strict";var Ga=ir&&ir.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(ir,"__esModule",{value:!0});ir.OidcClient=void 0;var Oh=Va(),Nh=ja(),Ha=ar(),ot=class{static createHttpClient(t=!0,r=10){let n={allowRetries:t,maxRetries:r};return new Oh.HttpClient("actions/oidc-client",[new Nh.BearerCredentialHandler(ot.getRequestToken())],n)}static getRequestToken(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return t}static getIDTokenUrl(){let t=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!t)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return t}static getCall(t){var r;return Ga(this,void 0,void 0,function*(){let s=(r=(yield ot.createHttpClient().getJson(t).catch(i=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${i.statusCode}
 
        Error Message: ${i.result.message}`)})).result)===null||r===void 0?void 0:r.value;if(!s)throw new Error("Response json body do not have ID Token field");return s})}static getIDToken(t){return Ga(this,void 0,void 0,function*(){try{let r=ot.getIDTokenUrl();if(t){let o=encodeURIComponent(t);r=`${r}&audience=${o}`}Ha.debug(`ID token url is ${r}`);let n=yield ot.getCall(r);return Ha.setSecret(n),n}catch(r){throw new Error(`Error message: ${r.message}`)}})}};ir.OidcClient=ot});var Os=_(Q=>{"use strict";var As=Q&&Q.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Q,"__esModule",{value:!0});Q.summary=Q.markdownSummary=Q.SUMMARY_DOCS_URL=Q.SUMMARY_ENV_VAR=void 0;var Ph=require("os"),Is=require("fs"),{access:Dh,appendFile:kh,writeFile:Fh}=Is.promises;Q.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY";Q.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";var Ts=class{constructor(){this._buffer=""}filePath(){return As(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;let t=process.env[Q.SUMMARY_ENV_VAR];if(!t)throw new Error(`Unable to find environment variable for $${Q.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield Dh(t,Is.constants.R_OK|Is.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${t}'. Check if the file has correct read/write permissions.`)}return this._filePath=t,this._filePath})}wrap(t,r,n={}){let o=Object.entries(n).map(([s,i])=>` ${s}="${i}"`).join("");return r?`<${t}${o}>${r}</${t}>`:`<${t}${o}>`}write(t){return As(this,void 0,void 0,function*(){let r=!!(t!=null&&t.overwrite),n=yield this.filePath();return yield(r?Fh:kh)(n,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return As(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(t,r=!1){return this._buffer+=t,r?this.addEOL():this}addEOL(){return this.addRaw(Ph.EOL)}addCodeBlock(t,r){let n=Object.assign({},r&&{lang:r}),o=this.wrap("pre",this.wrap("code",t),n);return this.addRaw(o).addEOL()}addList(t,r=!1){let n=r?"ol":"ul",o=t.map(i=>this.wrap("li",i)).join(""),s=this.wrap(n,o);return this.addRaw(s).addEOL()}addTable(t){let r=t.map(o=>{let s=o.map(i=>{if(typeof i=="string")return this.wrap("td",i);let{header:a,data:c,colspan:d,rowspan:l}=i,u=a?"th":"td",p=Object.assign(Object.assign({},d&&{colspan:d}),l&&{rowspan:l});return this.wrap(u,c,p)}).join("");return this.wrap("tr",s)}).join(""),n=this.wrap("table",r);return this.addRaw(n).addEOL()}addDetails(t,r){let n=this.wrap("details",this.wrap("summary",t)+r);return this.addRaw(n).addEOL()}addImage(t,r,n){let{width:o,height:s}=n||{},i=Object.assign(Object.assign({},o&&{width:o}),s&&{height:s}),a=this.wrap("img",null,Object.assign({src:t,alt:r},i));return this.addRaw(a).addEOL()}addHeading(t,r){let n=`h${r}`,o=["h1","h2","h3","h4","h5","h6"].includes(n)?n:"h1",s=this.wrap(o,t);return this.addRaw(s).addEOL()}addSeparator(){let t=this.wrap("hr",null);return this.addRaw(t).addEOL()}addBreak(){let t=this.wrap("br",null);return this.addRaw(t).addEOL()}addQuote(t,r){let n=Object.assign({},r&&{cite:r}),o=this.wrap("blockquote",t,n);return this.addRaw(o).addEOL()}addLink(t,r){let n=this.wrap("a",t,{href:r});return this.addRaw(n).addEOL()}},Ka=new Ts;Q.markdownSummary=Ka;Q.summary=Ka});var Ya=_(Z=>{"use strict";var Uh=Z&&Z.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),$h=Z&&Z.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Lh=Z&&Z.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Uh(t,e,r);return $h(t,e),t};Object.defineProperty(Z,"__esModule",{value:!0});Z.toPlatformPath=Z.toWin32Path=Z.toPosixPath=void 0;var Mh=Lh(require("path"));function Bh(e){return e.replace(/[\\]/g,"/")}Z.toPosixPath=Bh;function qh(e){return e.replace(/[/]/g,"\\")}Z.toWin32Path=qh;function zh(e){return e.replace(/[/\\]/g,Mh.sep)}Z.toPlatformPath=zh});var ar=_(E=>{"use strict";var Vh=E&&E.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jh=E&&E.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),Ja=E&&E.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.hasOwnProperty.call(e,r)&&Vh(t,e,r);return jh(t,e),t},Xa=E&&E.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(E,"__esModule",{value:!0});E.getIDToken=E.getState=E.saveState=E.group=E.endGroup=E.startGroup=E.info=E.notice=E.warning=E.error=E.debug=E.isDebug=E.setFailed=E.setCommandEcho=E.setOutput=E.getBooleanInput=E.getMultilineInput=E.getInput=E.addPath=E.setSecret=E.exportVariable=E.ExitCode=void 0;var le=aa(),qt=Da(),cr=zn(),Qa=Ja(require("os")),Gh=Ja(require("path")),Hh=Wa(),Za;(function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"})(Za=E.ExitCode||(E.ExitCode={}));function Wh(e,t){let r=cr.toCommandValue(t);if(process.env[e]=r,process.env.GITHUB_ENV||"")return qt.issueFileCommand("ENV",qt.prepareKeyValueMessage(e,t));le.issueCommand("set-env",{name:e},r)}E.exportVariable=Wh;function Kh(e){le.issueCommand("add-mask",{},e)}E.setSecret=Kh;function Yh(e){process.env.GITHUB_PATH||""?qt.issueFileCommand("PATH",e):le.issueCommand("add-path",{},e),process.env.PATH=`${e}${Gh.delimiter}${process.env.PATH}`}E.addPath=Yh;function Ns(e,t){let r=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!r)throw new Error(`Input required and not supplied: ${e}`);return t&&t.trimWhitespace===!1?r:r.trim()}E.getInput=Ns;function Jh(e,t){let r=Ns(e,t).split(`
`).filter(n=>n!=="");return t&&t.trimWhitespace===!1?r:r.map(n=>n.trim())}E.getMultilineInput=Jh;function Xh(e,t){let r=["true","True","TRUE"],n=["false","False","FALSE"],o=Ns(e,t);if(r.includes(o))return!0;if(n.includes(o))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}E.getBooleanInput=Xh;function Qh(e,t){if(process.env.GITHUB_OUTPUT||"")return qt.issueFileCommand("OUTPUT",qt.prepareKeyValueMessage(e,t));process.stdout.write(Qa.EOL),le.issueCommand("set-output",{name:e},cr.toCommandValue(t))}E.setOutput=Qh;function Zh(e){le.issue("echo",e?"on":"off")}E.setCommandEcho=Zh;function ey(e){process.exitCode=Za.Failure,ec(e)}E.setFailed=ey;function ty(){return process.env.RUNNER_DEBUG==="1"}E.isDebug=ty;function ry(e){le.issueCommand("debug",{},e)}E.debug=ry;function ec(e,t={}){le.issueCommand("error",cr.toCommandProperties(t),e instanceof Error?e.toString():e)}E.error=ec;function ny(e,t={}){le.issueCommand("warning",cr.toCommandProperties(t),e instanceof Error?e.toString():e)}E.warning=ny;function oy(e,t={}){le.issueCommand("notice",cr.toCommandProperties(t),e instanceof Error?e.toString():e)}E.notice=oy;function sy(e){process.stdout.write(e+Qa.EOL)}E.info=sy;function tc(e){le.issue("group",e)}E.startGroup=tc;function rc(){le.issue("endgroup")}E.endGroup=rc;function iy(e,t){return Xa(this,void 0,void 0,function*(){tc(e);let r;try{r=yield t()}finally{rc()}return r})}E.group=iy;function ay(e,t){if(process.env.GITHUB_STATE||"")return qt.issueFileCommand("STATE",qt.prepareKeyValueMessage(e,t));le.issueCommand("save-state",{name:e},cr.toCommandValue(t))}E.saveState=ay;function cy(e){return process.env[`STATE_${e}`]||""}E.getState=cy;function dy(e){return Xa(this,void 0,void 0,function*(){return yield Hh.OidcClient.getIDToken(e)})}E.getIDToken=dy;var ly=Os();Object.defineProperty(E,"summary",{enumerable:!0,get:function(){return ly.summary}});var uy=Os();Object.defineProperty(E,"markdownSummary",{enumerable:!0,get:function(){return uy.markdownSummary}});var Ps=Ya();Object.defineProperty(E,"toPosixPath",{enumerable:!0,get:function(){return Ps.toPosixPath}});Object.defineProperty(E,"toWin32Path",{enumerable:!0,get:function(){return Ps.toWin32Path}});Object.defineProperty(E,"toPlatformPath",{enumerable:!0,get:function(){return Ps.toPlatformPath}})});var zs={};tr(zs,{__assign:()=>Bs,__asyncDelegator:()=>ng,__asyncGenerator:()=>rg,__asyncValues:()=>og,__await:()=>mn,__awaiter:()=>Jy,__classPrivateFieldGet:()=>cg,__classPrivateFieldSet:()=>dg,__createBinding:()=>Qy,__decorate:()=>Wy,__exportStar:()=>Zy,__extends:()=>Gy,__generator:()=>Xy,__importDefault:()=>ag,__importStar:()=>ig,__makeTemplateObject:()=>sg,__metadata:()=>Yy,__param:()=>Ky,__read:()=>vc,__rest:()=>Hy,__spread:()=>eg,__spreadArrays:()=>tg,__values:()=>qs});function Gy(e,t){Ms(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Hy(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function Wy(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function Ky(e,t){return function(r,n){t(r,n,e)}}function Yy(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Jy(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function Xy(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Qy(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Zy(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function qs(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function vc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function eg(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(vc(arguments[t]));return e}function tg(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function mn(e){return this instanceof mn?(this.v=e,this):new mn(e)}function rg(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(p){n[p]&&(o[p]=function(f){return new Promise(function(m,g){s.push([p,f,m,g])>1||a(p,f)})})}function a(p,f){try{c(n[p](f))}catch(m){u(s[0][3],m)}}function c(p){p.value instanceof mn?Promise.resolve(p.value.v).then(d,l):u(s[0][2],p)}function d(p){a("next",p)}function l(p){a("throw",p)}function u(p,f){p(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function ng(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:mn(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function og(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof qs=="function"?qs(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function sg(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function ig(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function ag(e){return e&&e.__esModule?e:{default:e}}function cg(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function dg(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var Ms,Bs,Vs=$(()=>{Ms=function(e,t){return Ms=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},Ms(e,t)};Bs=function(){return Bs=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},Bs.apply(this,arguments)}});var Ac,Ic,Tc=$(()=>{Ac=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},Ic=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let i="%"+[o,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t}});function Oc(e){return new TextEncoder().encode(e)}function Nc(e){return new TextDecoder("utf-8").decode(e)}var Pc=$(()=>{});var Dc={};tr(Dc,{fromUtf8:()=>lg,toUtf8:()=>ug});var lg,ug,kc=$(()=>{Tc();Pc();lg=e=>typeof TextEncoder=="function"?Oc(e):Ac(e),ug=e=>typeof TextDecoder=="function"?Nc(e):Ic(e)});var Fc=_(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.convertToBuffer=void 0;var pg=(kc(),dn(Dc)),fg=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:pg.fromUtf8;function mg(e){return e instanceof Uint8Array?e:typeof e=="string"?fg(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}io.convertToBuffer=mg});var Uc=_(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.isEmptyData=void 0;function hg(e){return typeof e=="string"?e.length===0:e.byteLength===0}ao.isEmptyData=hg});var $c=_(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.numToUint8=void 0;function yg(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}co.numToUint8=yg});var Lc=_(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.uint32ArrayFrom=void 0;function gg(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}lo.uint32ArrayFrom=gg});var js=_(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.uint32ArrayFrom=Te.numToUint8=Te.isEmptyData=Te.convertToBuffer=void 0;var Eg=Fc();Object.defineProperty(Te,"convertToBuffer",{enumerable:!0,get:function(){return Eg.convertToBuffer}});var wg=Uc();Object.defineProperty(Te,"isEmptyData",{enumerable:!0,get:function(){return wg.isEmptyData}});var xg=$c();Object.defineProperty(Te,"numToUint8",{enumerable:!0,get:function(){return xg.numToUint8}});var Sg=Lc();Object.defineProperty(Te,"uint32ArrayFrom",{enumerable:!0,get:function(){return Sg.uint32ArrayFrom}})});var qc=_(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.AwsCrc32=void 0;var Mc=(Vs(),dn(zs)),Gs=js(),Bc=po(),Cg=function(){function e(){this.crc32=new Bc.Crc32}return e.prototype.update=function(t){(0,Gs.isEmptyData)(t)||this.crc32.update((0,Gs.convertToBuffer)(t))},e.prototype.digest=function(){return Mc.__awaiter(this,void 0,void 0,function(){return Mc.__generator(this,function(t){return[2,(0,Gs.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new Bc.Crc32},e}();uo.AwsCrc32=Cg});var po=_(xt=>{"use strict";Object.defineProperty(xt,"__esModule",{value:!0});xt.AwsCrc32=xt.Crc32=xt.crc32=void 0;var _g=(Vs(),dn(zs)),bg=js();function Rg(e){return new zc().update(e).digest()}xt.crc32=Rg;var zc=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=_g.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^Ag[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();xt.Crc32=zc;var vg=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],Ag=(0,bg.uint32ArrayFrom)(vg),Ig=qc();Object.defineProperty(xt,"AwsCrc32",{enumerable:!0,get:function(){return Ig.AwsCrc32}})});var wi=_(Ge=>{"use strict";var al=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",NE=al+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",cl="["+al+"]["+NE+"]*",PE=new RegExp("^"+cl+"$"),DE=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},kE=function(e){let t=PE.exec(e);return!(t===null||typeof t>"u")};Ge.isExist=function(e){return typeof e<"u"};Ge.isEmptyObject=function(e){return Object.keys(e).length===0};Ge.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};Ge.getValue=function(e){return Ge.isExist(e)?e:""};Ge.isName=kE;Ge.getAllMatches=DE;Ge.nameRegexp=cl});var Si=_(fl=>{"use strict";var xi=wi(),FE={allowBooleanAttributes:!1,unpairedTags:[]};fl.validate=function(e,t){t=Object.assign({},FE,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=ll(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=ul(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!VE(c)){let u;return c.trim().length===0?u="Invalid space after '<'.":u="Tag '"+c+"' is an invalid name.",F("InvalidTag",u,oe(e,s))}let d=LE(e,s);if(d===!1)return F("InvalidAttr","Attributes for '"+c+"' have open quote.",oe(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let u=s-l.length;l=l.substring(0,l.length-1);let p=pl(l,t);if(p===!0)n=!0;else return F(p.err.code,p.err.msg,oe(e,u+p.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return F("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",oe(e,i));{let u=r.pop();if(c!==u.tagName){let p=oe(e,u.tagStartPos);return F("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",oe(e,i))}r.length==0&&(o=!0)}}else return F("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",oe(e,s));else{let u=pl(l,t);if(u!==!0)return F(u.err.code,u.err.msg,oe(e,s-l.length+u.err.line));if(o===!0)return F("InvalidXml","Multiple possible root nodes found.",oe(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=ul(e,s);continue}else if(e[s+1]==="?"){if(s=ll(e,++s),s.err)return s}else break;else if(e[s]==="&"){let u=qE(e,s);if(u==-1)return F("InvalidChar","char '&' is not expected.",oe(e,s));s=u}else if(o===!0&&!dl(e[s]))return F("InvalidXml","Extra text at the end",oe(e,s));e[s]==="<"&&s--}}else{if(dl(e[s]))continue;return F("InvalidChar","char '"+e[s]+"' is not expected.",oe(e,s))}if(n){if(r.length==1)return F("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",oe(e,r[0].tagStartPos));if(r.length>0)return F("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return F("InvalidXml","Start tag expected.",1);return!0};function dl(e){return e===" "||e==="	"||e===`
`||e==="\r"}function ll(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return F("InvalidXml","XML declaration allowed only at the start of the document.",oe(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function ul(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var UE='"',$E="'";function LE(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===UE||e[t]===$E)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var ME=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function pl(e,t){let r=xi.getAllMatches(e,ME),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return F("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",Cn(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return F("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",Cn(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return F("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",Cn(r[o]));let s=r[o][2];if(!zE(s))return F("InvalidAttr","Attribute '"+s+"' is an invalid name.",Cn(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return F("InvalidAttr","Attribute '"+s+"' is repeated.",Cn(r[o]))}return!0}function BE(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function qE(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,BE(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function F(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function zE(e){return xi.isName(e)}function VE(e){return xi.isName(e)}function oe(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Cn(e){return e.startIndex+e[1].length}});var hl=_(Ci=>{var ml={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},jE=function(e){return Object.assign({},ml,e)};Ci.buildOptions=jE;Ci.defaultOptions=ml});var gl=_((HP,yl)=>{"use strict";var _i=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};yl.exports=_i});var xl=_((WP,wl)=>{function GE(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&KE(e,t))t+=7,[entityName,val,t]=HE(e,t+1),val.indexOf("&")===-1&&(r[QE(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&YE(e,t))t+=8;else if(o&&JE(e,t))t+=8;else if(o&&XE(e,t))t+=9;else if(WE)s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function HE(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function WE(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function KE(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function YE(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function JE(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function XE(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}var El="!?\\/[]$%{}^&*()<>|+";function QE(e){for(let t=0;t<El.length;t++){let r=El[t];if(e.indexOf(r)!==-1)throw new Error(`Invalid character ${r} in entity name`)}return e}wl.exports=GE});var Cl=_((KP,Sl)=>{var ZE=/^[-+]?0x[a-fA-F0-9]+$/,ew=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var tw={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function rw(e,t={}){if(t=Object.assign({},tw,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&ZE.test(r))return Number.parseInt(r,16);{let n=ew.exec(r);if(n){let o=n[1],s=n[2],i=nw(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function nw(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Sl.exports=rw});var bl=_((JP,_l)=>{"use strict";var Ai=wi(),_n=gl(),ow=xl(),sw=Cl(),YP="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Ai.nameRegexp),bi=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=iw,this.parseXml=uw,this.parseTextData=aw,this.resolveNameSpace=cw,this.buildAttributesMap=lw,this.isItStopNode=hw,this.replaceEntitiesValue=fw,this.readStopNodeData=gw,this.saveTextToParentTag=mw,this.addChild=pw}};function iw(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function aw(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?vi(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?vi(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function cw(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var dw=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function lw(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=Ai.getAllMatches(e,dw),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]),c=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let l=this.options.attributeValueProcessor(a,c,t);l==null?s[d]=c:typeof l!=typeof c||l!==c?s[d]=l:s[d]=vi(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var uw=function(e){e=e.replace(/\r\n?/g,`
`);let t=new _n("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=Gt(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=Ri(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new _n(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=Gt(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=ow(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=Gt(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=Ri(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,l=a.attrExpPresent,u=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let f="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let g=this.readStopNodeData(e,c,u+1);if(!g)throw new Error(`Unexpected end of ${c}`);s=g.i,f=g.tagContent}let m=new _n(c);c!==d&&l&&(m[":@"]=this.buildAttributesMap(d,o,c)),f&&(f=this.parseTextData(f,c,o,!0,l,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),m.add(this.options.textNodeName,f),this.addChild(r,m,o)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let f=new _n(c);c!==d&&l&&(f[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,f,o),o=o.substr(0,o.lastIndexOf("."))}else{let f=new _n(c);this.tagsNodeStack.push(r),c!==d&&l&&(f[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,f,o),r=f}n="",s=u}}else n+=e[s];return t.child};function pw(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var fw=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function mw(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function hw(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function yw(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Gt(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function Ri(e,t,r,n=">"){let o=yw(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==o.data.substr(l+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function gw(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Gt(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=Gt(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Gt(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Gt(e,"]]>",r,"StopNode is not closed.")-2;else{let s=Ri(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function vi(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:sw(e,r)}else return Ai.isExist(e)?e:""}_l.exports=bi});var Al=_(vl=>{"use strict";function Ew(e,t){return Rl(e,t)}function Rl(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=ww(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Rl(i[a],t,c),l=Sw(d,t);i[":@"]?xw(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function ww(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function xw(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Sw(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}vl.prettify=Ew});var Tl=_((QP,Il)=>{var{buildOptions:Cw}=hl(),_w=bl(),{prettify:bw}=Al(),Rw=Si(),Ii=class{constructor(t){this.externalEntities={},this.options=Cw(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=Rw.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new _w(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:bw(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};Il.exports=Ii});var kl=_((ZP,Dl)=>{var vw=`
`;function Aw(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=vw),Nl(e,t,"",r)}function Nl(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i],c=Iw(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let m=a[c];Tw(d,t)||(m=t.tagValueProcessor(c,m),m=Pl(m,t)),s&&(o+=n),o+=m,s=!1;continue}else if(c===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,s=!1;continue}else if(c===t.commentPropName){o+=n+`<!--${a[c][0][t.textNodeName]}-->`,s=!0;continue}else if(c[0]==="?"){let m=Ol(a[":@"],t),g=c==="?xml"?"":n,h=a[c][0][t.textNodeName];h=h.length!==0?" "+h:"",o+=g+`<${c}${h}${m}?>`,s=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let u=Ol(a[":@"],t),p=n+`<${c}${u}`,f=Nl(a[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=p+">":o+=p+"/>":(!f||f.length===0)&&t.suppressEmptyNode?o+=p+"/>":f&&f.endsWith(">")?o+=p+`>${f}${n}</${c}>`:(o+=p+">",f&&n!==""&&(f.includes("/>")||f.includes("</"))?o+=n+t.indentBy+f+n:o+=f,o+=`</${c}>`),s=!0}return o}function Iw(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Ol(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=Pl(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function Tw(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function Pl(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}Dl.exports=Aw});var Ul=_((eD,Fl)=>{"use strict";var Ow=kl(),Nw={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Tt(e){this.options=Object.assign({},Nw,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=kw),this.processTextOrObjNode=Pw,this.options.format?(this.indentate=Dw,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Tt.prototype.build=function(e){return this.options.preserveOrder?Ow(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Tt.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,i="";for(let a=0;a<s;a++){let c=e[o][a];typeof c>"u"||(c===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?i+=this.j2x(c,t+1).val:i+=this.processTextOrObjNode(c,o,t):i+=this.buildTextValNode(c,o,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,"",t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};Tt.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function Pw(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Tt.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};Tt.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Tt.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};Tt.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Dw(e){return this.options.indentBy.repeat(e)}function kw(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Fl.exports=Tt});var Ll=_((tD,$l)=>{"use strict";var Fw=Si(),Uw=Tl(),$w=Ul();$l.exports={XMLParser:Uw,XMLValidator:Fw,XMLBuilder:$w}});var bC={};tr(bC,{run:()=>Pm});module.exports=dn(bC);var xe=be(ar());var st;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(st||(st={}));var dr=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var py="AWS_USE_DUALSTACK_ENDPOINT",fy="use_dualstack_endpoint";var it={environmentVariableSelector:e=>dr(e,py,st.ENV),configFileSelector:e=>dr(e,fy,st.CONFIG),default:!1};var my="AWS_USE_FIPS_ENDPOINT",hy="use_fips_endpoint";var at={environmentVariableSelector:e=>dr(e,my,st.ENV),configFileSelector:e=>dr(e,hy,st.CONFIG),default:!1};var z=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var yy="AWS_REGION",gy="region",ve={environmentVariableSelector:e=>e[yy],configFileSelector:e=>e[gy],default:()=>{throw new Error("Region is missing")}},ct={preferredFile:"credentials"};var Zn=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Ds=e=>Zn(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var dt=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Ds(t);let n=await t();return Ds(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Zn(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var ks;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(ks||(ks={}));var M=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new M({...this,headers:{...this.headers}});return t.query&&(t.query=Ey(t.query)),t}};function Ey(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Ae=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var nc="content-length";function wy(e){return t=>async r=>{let n=r.request;if(M.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(nc)===-1)try{let i=e(o);n.headers={...n.headers,[nc]:String(i)}}catch{}}return t({...r,request:n})}}var xy={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},lt=e=>({applyToStack:t=>{t.add(wy(e.bodyLengthChecker),xy)}});var oc=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Ry(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!by(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Sy=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Cy=/(\d+\.){3}\d+/,_y=/\.\./;var by=e=>Sy.test(e)&&!Cy.test(e)&&!_y.test(e),Ry=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var sc=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var ic=async(e,t,r,n)=>{let o=await vy(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},vy=async(e,t,r)=>{var s;let n={},o=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,a]of Object.entries(o))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=e[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await sc(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await oc(n),n};function ac(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var ee=e=>{if(typeof e=="string")return ee(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=ac(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var cc=e=>typeof e=="object"?"url"in e?ee(e.url):e:ee(e);var dc=({config:e,instructions:t})=>(r,n)=>async o=>{var a,c;let s=await ic(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;let i=(c=n.authSchemes)==null?void 0:c[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var lc=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var uc=(e,t)=>(r,n)=>async o=>{var a;let s=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var Ay={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Fs={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function P(e,t,r){return{applyToStack:n=>{n.add(lc(e,r),Ay),n.add(uc(e,t),Fs)}}}var Iy={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Fs.name},D=(e,t)=>({applyToStack:r=>{r.addRelativeTo(dc({config:e,instructions:t}),Iy)}});var ut=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>cc(await z(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:z(e.useDualstackEndpoint??!1),useFipsEndpoint:z(e.useFipsEndpoint??!1)}};var Ty=e=>t=>async r=>{if(!M.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},Oy={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},pt=e=>({applyToStack:t=>{t.add(Ty(e),Oy)}});var Ny=()=>(e,t)=>async r=>{var n,o;try{let s=await e(r),{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:u}=d,p=l??t.inputFilterSensitiveLog,f=u??t.outputFilterSensitiveLog,{$metadata:m,...g}=s.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:i,commandName:a,input:p(r.input),output:f(g),metadata:m}),s}catch(s){let{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,u=l??t.inputFilterSensitiveLog;throw(o=c==null?void 0:c.error)==null||o.call(c,{clientName:i,commandName:a,input:u(r.input),error:s,metadata:s.$metadata}),s}},Py={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},ft=e=>({applyToStack:t=>{t.add(Ny(),Py)}});var pc="X-Amzn-Trace-Id",Dy="AWS_LAMBDA_FUNCTION_NAME",ky="_X_AMZN_TRACE_ID",Fy=e=>t=>async r=>{let{request:n}=r;if(!M.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(pc))return t(r);let o=process.env[Dy],s=process.env[ky],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[pc]=s),t({...r,request:n})},Uy={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},mt=e=>({applyToStack:t=>{t.add(Fy(e),Uy)}});var Ce;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ce||(Ce={}));var zt=3,Ie=Ce.STANDARD;var fc=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],mc=["AbortError","TimeoutError","RequestTimeout","RequestTimeoutException"],hc=[500,502,503,504],yc=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var lr=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||fc.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},eo=e=>{var t;return mc.includes(e.name)||yc.includes((e==null?void 0:e.code)||"")||hc.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},gc=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!eo(e)}return!1};var fn=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),lr(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var to="amz-sdk-invocation-id",ro="amz-sdk-request";var Ec=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var Us=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var Vt=class{constructor(t){this.maxAttempts=t,this.mode=Ce.STANDARD,this.capacity=500,this.retryBackoffStrategy=Ec(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Us({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,Us({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${zt}`),zt}}shouldRetry(t,r,n){return t.getRetryCount()<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var oo=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=Ce.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new fn,this.standardRetryStrategy=new Vt(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Ls=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var _c="AWS_MAX_ATTEMPTS",bc="max_attempts",ht={environmentVariableSelector:e=>{let t=e[_c];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${_c} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[bc];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${bc} mast be a number, got "${t}"`);return r},default:zt},yt=e=>{let{retryStrategy:t}=e,r=z(e.maxAttempts??zt);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await z(e.retryMode)()===Ce.ADAPTIVE?new oo(r):new Vt(r))}},$y="AWS_RETRY_MODE",Ly="retry_mode",gt={environmentVariableSelector:e=>e[$y],configFileSelector:e=>e[Ly],default:Ie};gs();var My=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(By(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n;for(M.isInstance(l)&&(l.headers[to]=Wn());;)try{M.isInstance(l)&&(l.headers[ro]=`attempt=${c+1}; max=${s}`);let{response:u,output:p}=await t(n);return o.recordSuccess(i),p.$metadata.attempts=c+1,p.$metadata.totalRetryDelay=d,{response:u,output:p}}catch(u){let p=qy(u);a=Ls(u);try{i=await o.refreshRetryTokenForRetry(i,p)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let f=i.getRetryDelay();d+=f,await new Promise(m=>setTimeout(m,f))}}else return o=o,o!=null&&o.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},By=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",qy=e=>{let t={errorType:zy(e)},r=jy(e.$response);return r&&(t.retryAfterHint=r),t},zy=e=>lr(e)?"THROTTLING":eo(e)?"TRANSIENT":gc(e)?"SERVER_ERROR":"CLIENT_ERROR",Vy={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Et=e=>({applyToStack:t=>{t.add(My(e),Vy)}}),jy=e=>{if(!Ae.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var te=class extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,te.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var w=class extends te{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,w.prototype)}};var re=class extends te{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,re.prototype)}};function so(...e){return()=>{let t=Promise.reject(new te("No providers in chain"));for(let r of e)t=t.catch(n=>{if(n!=null&&n.tryNextLink)return r();throw n});return t}}var Rc=e=>()=>Promise.resolve(e);var wt=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),n):async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var zg=be(po());var Vc={},Hs={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),Vc[e]=t,Hs[t]=e}function jc(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in Hs)t[r/2]=Hs[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function V(e){let t="";for(let r=0;r<e.byteLength;r++)t+=Vc[e[r]];return t}var St=class{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Gc(r),new St(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Gc(t),parseInt(V(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function Gc(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var hn=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(St.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!$g.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(jc(t.value.replace(/\-/g,"")),1),u}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:Wc,value:!0};break;case 1:r[s]={type:Wc,value:!1};break;case 2:r[s]={type:Tg,value:t.getInt8(n++)};break;case 3:r[s]={type:Og,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:Ng,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:Pg,value:new St(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:Dg,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:kg,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:Fg,value:new Date(new St(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:Ug,value:`${V(c.subarray(0,4))}-${V(c.subarray(4,6))}-${V(c.subarray(6,8))}-${V(c.subarray(8,10))}-${V(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},Hc;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(Hc||(Hc={}));var Wc="boolean",Tg="byte",Og="short",Ng="integer",Pg="long",Dg="binary",kg="string",Fg="timestamp",Ug="uuid",$g=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var Lg=be(po()),Mg=4,Bg=Mg*2,qg=4,Nv=Bg+qg*2;var Kc=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var Yc=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var Jc=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var Xc=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};var fo=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var mo=require("buffer"),jt=(e,t=0,r=e.byteLength-t)=>{if(!fo(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return mo.Buffer.from(e,t,r)},pr=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?mo.Buffer.from(e,t):mo.Buffer.from(e)};var ue=e=>{let t=pr(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Oe=e=>typeof e=="string"?ue(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Ne=e=>jt(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var Qc="X-Amz-Algorithm",Zc="X-Amz-Credential",Ws="X-Amz-Date",ed="X-Amz-SignedHeaders",td="X-Amz-Expires",Ks="X-Amz-Signature",Ys="X-Amz-Security-Token";var Js="authorization",Xs=Ws.toLowerCase(),Vg="date",rd=[Js,Xs,Vg],nd=Ks.toLowerCase(),yn="x-amz-content-sha256",od=Ys.toLowerCase();var sd={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},id=/^proxy-/,ad=/^sec-/;var ho="AWS4-HMAC-SHA256";var cd="AWS4-HMAC-SHA256-PAYLOAD",dd="UNSIGNED-PAYLOAD",ld=50,Qs="aws4_request",ud=60*60*24*7;var yo={},Zs=[],go=(e,t,r)=>`${e}/${t}/${r}/${Qs}`,fd=async(e,t,r,n,o)=>{let s=await pd(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${V(s)}:${t.sessionToken}`;if(i in yo)return yo[i];for(Zs.push(i);Zs.length>ld;)delete yo[Zs.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,Qs])a=await pd(e,a,c);return yo[i]=a};var pd=(e,t,r)=>{let n=new e(t);return n.update(Oe(r)),n.digest()};var Eo=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in sd||t!=null&&t.has(s)||id.test(s)||ad.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var Pe=e=>encodeURIComponent(e).replace(/[!'()*]/g,jg),jg=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var ei=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===nd)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${Pe(n)}=${Pe(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).sort().reduce((s,i)=>s.concat([`${Pe(n)}=${Pe(i)}`]),[]).join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var gn=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===yn)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||fo(t)){let n=new r;return n.update(Oe(t)),V(await n.digest())}return dd};var md=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var wo=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?Gg(t):void 0}),Gg=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var ti=(e,t={})=>{var o;let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():wo(e);for(let s of Object.keys(r)){let i=s.toLowerCase();i.slice(0,6)==="x-amz-"&&!((o=t.unhoistableHeaders)!=null&&o.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}};var xo=e=>{e=typeof e.clone=="function"?e.clone():wo(e);for(let t of Object.keys(e.headers))rd.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var hd=e=>Hg(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Hg=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var En=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.headerMarshaller=new hn(Ne,ue),this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=z(n),this.credentialProvider=z(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let u=c??await this.regionProvider(),{longDate:p,shortDate:f}=So(n);if(o>ud)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let m=go(f,u,d??this.service),g=ti(xo(t),{unhoistableHeaders:i});l.sessionToken&&(g.query[Ys]=l.sessionToken),g.query[Qc]=ho,g.query[Zc]=`${l.accessKeyId}/${m}`,g.query[Ws]=p,g.query[td]=o.toString(10);let h=Eo(g,s,a);return g.query[ed]=yd(h),g.query[Ks]=await this.getSignature(p,m,this.getSigningKey(l,u,f,d),this.createCanonicalRequest(g,h,await gn(t,this.sha256))),g}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=So(n),l=go(c,a,i??this.service),u=await gn({headers:{},body:r},this.sha256),p=new this.sha256;p.update(t);let f=V(await p.digest()),m=[cd,d,l,o,f,u].join(`
`);return this.signString(m,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=So(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(Oe(t)),V(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=xo(t),{longDate:l,shortDate:u}=So(r),p=go(u,c,i??this.service);d.headers[Xs]=l,a.sessionToken&&(d.headers[od]=a.sessionToken);let f=await gn(d,this.sha256);!md(yn,d.headers)&&this.applyChecksum&&(d.headers[yn]=f);let m=Eo(d,o,n),g=await this.getSignature(l,p,this.getSigningKey(a,c,u,i),this.createCanonicalRequest(d,m,f));return d.headers[Js]=`${ho} Credential=${a.accessKeyId}/${p}, SignedHeaders=${yd(m)}, Signature=${g}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${ei(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(Oe(n));let s=await o.digest();return`${ho}
${t}
${r}
${V(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(Oe(s)),V(await i.digest())}getSigningKey(t,r,n,o){return fd(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},So=e=>{let t=hd(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},yd=e=>Object.keys(e).sort().join(";");var Wg=3e5,Co=e=>{let t=e.credentials?Kg(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=z(e.signer):e.regionInfoProvider?s=()=>z(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},u=e.signerConstructor||En;return new u(l)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await z(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},l=e.signerConstructor||En;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var Kg=e=>typeof e=="function"?wt(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<Wg,t=>t.expiration!==void 0):z(e);var _o=e=>new Date(Date.now()+e);var gd=(e,t)=>Math.abs(_o(t).getTime()-e)>=3e5;var ri=(e,t)=>{let r=Date.parse(e);return gd(r,t)?r-Date.now():t};var Yg=e=>(t,r)=>async function(n){var d,l,u,p;if(!M.isInstance(n.request))return t(n);let o=(u=(l=(d=r.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:u[0],s=(o==null?void 0:o.name)==="sigv4a"?(p=o==null?void 0:o.signingRegionSet)==null?void 0:p.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:_o(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(f=>{let m=f.ServerTime??Ed(f.$response);throw m&&(e.systemClockOffset=ri(m,e.systemClockOffset)),f}),c=Ed(a.response);return c&&(e.systemClockOffset=ri(c,e.systemClockOffset)),a},Ed=e=>{var t,r;return Ae.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},Jg={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},bo=e=>({applyToStack:t=>{t.addRelativeTo(Yg(e),Jg)}});function Ct(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var ni={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var wd=ni,xd="",Qg=e=>{let{partitions:t}=wd;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Sd=(e,t="")=>{wd=e,xd=t},Zg=()=>{Sd(ni,"")},oi=()=>xd;var Ve="endpoints";function pe(e){return typeof e!="object"||e==null?e:"ref"in e?`$${pe(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(pe).join(", ")})`:JSON.stringify(e,null,2)}var T=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var ci={};tr(ci,{aws:()=>si,booleanEquals:()=>nE,getAttr:()=>ii,isSet:()=>oE,isValidHostLabel:()=>vo,not:()=>sE,parseURL:()=>iE,stringEquals:()=>aE,substring:()=>cE,uriEncode:()=>dE});var si={};tr(si,{getUserAgentPrefix:()=>oi,isVirtualHostableS3Bucket:()=>Cd,parseArn:()=>rE,partition:()=>Qg,setPartitionInfo:()=>Sd,useDefaultPartitionInfo:()=>Zg});var eE=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Ro=e=>eE.test(e)||e.startsWith("[")&&e.endsWith("]");var tE=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),vo=(e,t=!1)=>{if(!t)return tE.test(e);let r=e.split(".");for(let n of r)if(!vo(n))return!1;return!0};var Cd=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Cd(r))return!1;return!0}return!(!vo(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Ro(e))};var rE=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var nE=(e,t)=>e===t;var _d=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new T(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new T(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var ii=(e,t)=>_d(t).reduce((r,n)=>{if(typeof r!="object")throw new T(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var oE=e=>e!=null;var sE=e=>!e;var bd;(function(e){e.HEADER="header",e.QUERY="query"})(bd||(bd={}));var Rd;(function(e){e.AAAA="AAAA",e.A="A"})(Rd||(Rd={}));var fr;(function(e){e.HTTP="http",e.HTTPS="https"})(fr||(fr={}));var vd;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(vd||(vd={}));var ai={[fr.HTTP]:80,[fr.HTTPS]:443},iE=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:p,port:f,protocol:m="",path:g="",query:h={}}=e,ie=new URL(`${m}//${p}${f?`:${f}`:""}${g}`);return ie.search=Object.entries(h).map(([Dm,km])=>`${Dm}=${km}`).join("&"),ie}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(fr).includes(c))return null;let d=Ro(o),l=r.includes(`${n}:${ai[c]}`)||typeof e=="string"&&e.includes(`${n}:${ai[c]}`),u=`${n}${l?`:${ai[c]}`:""}`;return{scheme:c,authority:u,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var aE=(e,t)=>e===t;var cE=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var dE=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var Ao=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(ii(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var Ad=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var _t=(e,t,r)=>{if(typeof e=="string")return Ao(e,r);if(e.fn)return Io(e,r);if(e.ref)return Ad(e,r);throw new T(`'${t}': ${String(e)} is not a string, function or reference.`)};var Io=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:_t(o,"arg",r));return e.split(".").reduce((o,s)=>o[s],ci)(...n)};var Id=({assign:e,...t},r)=>{var o,s;if(e&&e in r.referenceRecord)throw new T(`'${e}' is already defined in Reference Record.`);let n=Io(t,r);return(s=(o=r.logger)==null?void 0:o.debug)==null||s.call(o,Ve,`evaluateCondition: ${pe(t)} = ${pe(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var mr=(e=[],t)=>{var n,o;let r={};for(let s of e){let{result:i,toAssign:a}=Id(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(o=(n=t.logger)==null?void 0:n.debug)==null||o.call(n,Ve,`assign: ${a.name} := ${pe(a.value)}`))}return{result:!0,referenceRecord:r}};var Td=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=_t(s,"Header value entry",t);if(typeof i!="string")throw new T(`Header '${n}' value '${i}' is not a string`);return i})}),{});var di=(e,t)=>{if(Array.isArray(e))return e.map(r=>di(r,t));switch(typeof e){case"string":return Ao(e,t);case"object":if(e===null)throw new T(`Unexpected endpoint property: ${e}`);return To(e,t);case"boolean":return e;default:throw new T(`Unexpected endpoint property type: ${typeof e}`)}};var To=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:di(o,t)}),{});var Od=(e,t)=>{let r=_t(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new T(`Endpoint URL must be a string, got ${typeof r}`)};var Nd=(e,t)=>{var l,u;let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=mr(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return(u=(l=t.logger)==null?void 0:l.debug)==null||u.call(l,Ve,`Resolving endpoint from template: ${pe(n)}`),{...d!=null&&{headers:Td(d,i)},...c!=null&&{properties:To(c,i)},url:Od(a,i)}};var Pd=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=mr(r,t);if(o)throw new T(_t(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var Dd=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=mr(r,t);if(o)return Oo(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var Oo=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=Nd(r,t);if(n)return n}else if(r.type==="error")Pd(r,t);else if(r.type==="tree"){let n=Dd(r,t);if(n)return n}else throw new T(`Unknown endpoint rule: ${r}`);throw new T("Rules evaluation failed")};var bt=(e,t)=>{var d,l,u,p,f;let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,`${Ve} Initial EndpointParams: ${pe(r)}`);let i=Object.entries(o).filter(([,m])=>m.default!=null).map(([m,g])=>[m,g.default]);if(i.length>0)for(let[m,g]of i)r[m]=r[m]??g;let a=Object.entries(o).filter(([,m])=>m.required).map(([m])=>m);for(let m of a)if(r[m]==null)throw new T(`Missing required parameter: '${m}'`);let c=Oo(s,{endpointParams:r,logger:n,referenceRecord:{}});if((u=t.endpointParams)!=null&&u.Endpoint)try{let m=new URL(t.endpointParams.Endpoint),{protocol:g,port:h}=m;c.url.protocol=g,c.url.port=h}catch{}return(f=(p=t.logger)==null?void 0:p.debug)==null||f.call(p,`${Ve} Resolved endpoint: ${pe(c)}`),c};var li="user-agent",No="x-amz-user-agent",ui=" ",Po="/",kd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,Fd=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,pi="-";var lE=e=>(t,r)=>async n=>{var p,f;let{request:o}=n;if(!M.isInstance(o))return t(n);let{headers:s}=o,i=((p=r==null?void 0:r.userAgent)==null?void 0:p.map(fi))||[],a=(await e.defaultUserAgentProvider()).map(fi),c=((f=e==null?void 0:e.customUserAgent)==null?void 0:f.map(fi))||[],d=oi(),l=(d?[d]:[]).concat([...a,...i,...c]).join(ui),u=[...a.filter(m=>m.startsWith("aws-sdk-")),...c].join(ui);return e.runtime!=="browser"?(u&&(s[No]=s[No]?`${s[li]} ${u}`:u),s[li]=l):s[No]=l,t({...n,request:o})},fi=e=>{var i;let t=e[0].split(Po).map(a=>a.replace(kd,pi)).join(Po),r=(i=e[1])==null?void 0:i.replace(Fd,pi),n=t.indexOf(Po),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(a=>a&&a.length>0).reduce((a,c,d)=>{switch(d){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},uE={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Rt=e=>({applyToStack:t=>{t.add(lE(e),uE)}});var De=class{trace(){}debug(){}info(){}warn(){}error(){}};var hr=()=>{let e=[],t=[],r=new Set,n=l=>l.sort((u,p)=>Ud[p.step]-Ud[u.step]||$d[p.priority||"normal"]-$d[u.priority||"normal"]),o=l=>{let u=!1,p=f=>f.name&&f.name===l?(u=!0,r.delete(l),!1):!0;return e=e.filter(p),t=t.filter(p),u},s=l=>{let u=!1,p=f=>f.middleware===l?(u=!0,f.name&&r.delete(f.name),!1):!0;return e=e.filter(p),t=t.filter(p),u},i=l=>(e.forEach(u=>{l.add(u.middleware,{...u})}),t.forEach(u=>{l.addRelativeTo(u.middleware,{...u})}),l),a=l=>{let u=[];return l.before.forEach(p=>{p.before.length===0&&p.after.length===0?u.push(p):u.push(...a(p))}),u.push(l),l.after.reverse().forEach(p=>{p.before.length===0&&p.after.length===0?u.push(p):u.push(...a(p))}),u},c=(l=!1)=>{let u=[],p=[],f={};return e.forEach(g=>{let h={...g,before:[],after:[]};h.name&&(f[h.name]=h),u.push(h)}),t.forEach(g=>{let h={...g,before:[],after:[]};h.name&&(f[h.name]=h),p.push(h)}),p.forEach(g=>{if(g.toMiddleware){let h=f[g.toMiddleware];if(h===void 0){if(l)return;throw new Error(`${g.toMiddleware} is not found when adding ${g.name||"anonymous"} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&h.after.push(g),g.relation==="before"&&h.before.push(g)}}),n(u).map(a).reduce((g,h)=>(g.push(...h),g),[])},d={add:(l,u={})=>{let{name:p,override:f}=u,m={step:"initialize",priority:"normal",middleware:l,...u};if(p){if(r.has(p)){if(!f)throw new Error(`Duplicate middleware name '${p}'`);let g=e.findIndex(ie=>ie.name===p),h=e[g];if(h.step!==m.step||h.priority!==m.priority)throw new Error(`"${p}" middleware with ${h.priority} priority in ${h.step} step cannot be overridden by same-name middleware with ${m.priority} priority in ${m.step} step.`);e.splice(g,1)}r.add(p)}e.push(m)},addRelativeTo:(l,u)=>{let{name:p,override:f}=u,m={middleware:l,...u};if(p){if(r.has(p)){if(!f)throw new Error(`Duplicate middleware name '${p}'`);let g=t.findIndex(ie=>ie.name===p),h=t[g];if(h.toMiddleware!==m.toMiddleware||h.relation!==m.relation)throw new Error(`"${p}" middleware ${h.relation} "${h.toMiddleware}" middleware cannot be overridden by same-name middleware ${m.relation} "${m.toMiddleware}" middleware.`);t.splice(g,1)}r.add(p)}t.push(m)},clone:()=>i(hr()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?o(l):s(l),removeByTag:l=>{let u=!1,p=f=>{let{tags:m,name:g}=f;return m&&m.includes(l)?(g&&r.delete(g),u=!0,!1):!0};return e=e.filter(p),t=t.filter(p),u},concat:l=>{let u=i(hr());return u.use(l),u},applyToStack:i,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,u)=>{for(let p of c().map(f=>f.middleware).reverse())l=p(l,u);return l}};return d},Ud={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},$d={high:3,normal:2,low:1};var ke=class{constructor(t){this.middlewareStack=hr(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var O=class{constructor(){this.middlewareStack=hr()}};var J="***SensitiveInformation***";var fe=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Wd.warn(Hd(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},pE=Math.ceil(34028234663852886e22),Ld=e=>{let t=fe(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>pE)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},qd=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var wn=e=>mi(e,32),Md=e=>mi(e,16),Bd=e=>mi(e,8),mi=(e,t)=>{let r=qd(e);if(r!==void 0&&fE(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},fE=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},j=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Do=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},y=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Wd.warn(Hd(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var zd=e=>fe(typeof e=="string"?xn(e):e);var Vd=e=>Ld(typeof e=="string"?xn(e):e),mE=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,xn=e=>{let t=e.match(mE);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var hi=e=>wn(typeof e=="string"?xn(e):e),jd=e=>Md(typeof e=="string"?xn(e):e),Gd=e=>Bd(typeof e=="string"?xn(e):e),Hd=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Wd={warn:console.warn};var hE=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var TN=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var yE=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Kd=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=yE.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,l]=t,u=jd(Yd(n)),p=Sn(o,"month",1,12),f=Sn(s,"day",1,31),m=gE(u,p,f,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&m.setTime(m.getTime()-CE(l)),m},ON=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),NN=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),PN=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var je=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=zd(e);else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},gE=(e,t,r,n)=>{let o=t-1;return wE(e,o,r),new Date(Date.UTC(e,o,r,Sn(n.hours,"hour",0,23),Sn(n.minutes,"minute",0,59),Sn(n.seconds,"seconds",0,60),SE(n.fractionalMilliseconds)))};var DN=50*365*24*60*60*1e3;var EE=[31,28,31,30,31,30,31,31,30,31,30,31],wE=(e,t,r)=>{let n=EE[t];if(t===1&&xE(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${hE[t]} in ${e}: ${r}`)},xE=e=>e%4===0&&(e%100!==0||e%400===0),Sn=(e,t,r,n)=>{let o=Gd(Yd(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},SE=e=>e==null?0:Vd("0."+e)*1e3,CE=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},Yd=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var me=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,me.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},S=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var _E=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=bE(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||s||"UnknownError",$fault:"client",$metadata:o});throw S(i,t)},vt=e=>({output:t,parsedBody:r,errorCode:n})=>{_E({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},bE=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var At=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var Jd=!1,It=e=>{e&&!Jd&&parseInt(e.substring(1,e.indexOf(".")))<14&&(Jd=!0)};function ko(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var yi=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=yi(e[r]));return e};var gi=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};gi.prototype=Object.create(String.prototype,{constructor:{value:gi,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(gi,String);function k(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,RE(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}Xd(n,null,s,i)}return n}var v=(e,t)=>{let r={};for(let n in t)Xd(r,e,t,n);return r},RE=(e,t,r)=>k(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),Xd=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=vE,c=AE,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},vE=e=>e!=null,AE=e=>e;var I=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=I(e[r]));return t}return e};var Qd=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"apprunner"});var Zd={name:"@aws-sdk/client-apprunner",description:"AWS SDK for JavaScript Apprunner Client for Node.js, Browser and React Native",version:"3.352.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo apprunner"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.352.0","@aws-sdk/config-resolver":"3.347.0","@aws-sdk/credential-provider-node":"3.352.0","@aws-sdk/fetch-http-handler":"3.347.0","@aws-sdk/hash-node":"3.347.0","@aws-sdk/invalid-dependency":"3.347.0","@aws-sdk/middleware-content-length":"3.347.0","@aws-sdk/middleware-endpoint":"3.347.0","@aws-sdk/middleware-host-header":"3.347.0","@aws-sdk/middleware-logger":"3.347.0","@aws-sdk/middleware-recursion-detection":"3.347.0","@aws-sdk/middleware-retry":"3.347.0","@aws-sdk/middleware-serde":"3.347.0","@aws-sdk/middleware-signing":"3.347.0","@aws-sdk/middleware-stack":"3.347.0","@aws-sdk/middleware-user-agent":"3.352.0","@aws-sdk/node-config-provider":"3.347.0","@aws-sdk/node-http-handler":"3.350.0","@aws-sdk/smithy-client":"3.347.0","@aws-sdk/types":"3.347.0","@aws-sdk/url-parser":"3.347.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.347.0","@aws-sdk/util-defaults-mode-node":"3.347.0","@aws-sdk/util-endpoints":"3.352.0","@aws-sdk/util-retry":"3.347.0","@aws-sdk/util-user-agent-browser":"3.347.0","@aws-sdk/util-user-agent-node":"3.347.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-apprunner",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-apprunner"}};var el=(e,{stsClientCtor:t})=>Co({...e,stsClientCtor:t});var tl=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var rl={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.352.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.347.0","@aws-sdk/credential-provider-node":"3.352.0","@aws-sdk/fetch-http-handler":"3.347.0","@aws-sdk/hash-node":"3.347.0","@aws-sdk/invalid-dependency":"3.347.0","@aws-sdk/middleware-content-length":"3.347.0","@aws-sdk/middleware-endpoint":"3.347.0","@aws-sdk/middleware-host-header":"3.347.0","@aws-sdk/middleware-logger":"3.347.0","@aws-sdk/middleware-recursion-detection":"3.347.0","@aws-sdk/middleware-retry":"3.347.0","@aws-sdk/middleware-sdk-sts":"3.347.0","@aws-sdk/middleware-serde":"3.347.0","@aws-sdk/middleware-signing":"3.347.0","@aws-sdk/middleware-stack":"3.347.0","@aws-sdk/middleware-user-agent":"3.352.0","@aws-sdk/node-config-provider":"3.347.0","@aws-sdk/node-http-handler":"3.350.0","@aws-sdk/smithy-client":"3.347.0","@aws-sdk/types":"3.347.0","@aws-sdk/url-parser":"3.347.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.347.0","@aws-sdk/util-defaults-mode-node":"3.347.0","@aws-sdk/util-endpoints":"3.352.0","@aws-sdk/util-retry":"3.347.0","@aws-sdk/util-user-agent-browser":"3.347.0","@aws-sdk/util-user-agent-node":"3.347.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0","fast-xml-parser":"4.2.4",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var ne=class extends me{constructor(t){super(t),Object.setPrototypeOf(this,ne.prototype)}};var yr=class extends ne{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,yr.prototype)}},gr=class extends ne{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,gr.prototype)}},Er=class extends ne{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,Er.prototype)}},wr=class extends ne{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,wr.prototype)}},xr=class extends ne{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,xr.prototype)}},Sr=class extends ne{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,Sr.prototype)}},Cr=class extends ne{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,Cr.prototype)}};var nl=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:J}}),ol=e=>({...e,...e.Credentials&&{Credentials:nl(e.Credentials)}});var sl=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:J}}),il=e=>({...e,...e.Credentials&&{Credentials:nl(e.Credentials)}});var Ei;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Ei||(Ei={}));var he=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/"}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new he({...this,headers:{...this.headers}});return t.query&&(t.query=OE(t.query)),t}};function OE(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Ml=be(Ll());var Bl=async(e,t)=>{let r=Zl,n;return n=tu({...Vw(e,t),Action:"AssumeRole",Version:"2011-06-15"}),Ql(t,r,"/",void 0,n)};var ql=async(e,t)=>{let r=Zl,n;return n=tu({...jw(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),Ql(t,r,"/",void 0,n)};var zl=async(e,t)=>{if(e.statusCode>=300)return Lw(e,t);let r=await Ti(e.body,t),n={};return n=Yw(r.AssumeRoleResult,t),{$metadata:He(e),...n}},Lw=async(e,t)=>{let r={...e,body:await eu(e.body,t)},n=ru(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await jl(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Gl(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Hl(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Wl(r,t);default:let o=r.body;return Xl({output:e,parsedBody:o.Error,errorCode:n})}};var Vl=async(e,t)=>{if(e.statusCode>=300)return Mw(e,t);let r=await Ti(e.body,t),n={};return n=Jw(r.AssumeRoleWithWebIdentityResult,t),{$metadata:He(e),...n}},Mw=async(e,t)=>{let r={...e,body:await eu(e.body,t)},n=ru(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await jl(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Bw(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await qw(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await zw(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await Gl(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await Hl(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await Wl(r,t);default:let o=r.body;return Xl({output:e,parsedBody:o.Error,errorCode:n})}};var jl=async(e,t)=>{let r=e.body,n=Xw(r.Error,t),o=new yr({$metadata:He(e),...n});return S(o,r)},Bw=async(e,t)=>{let r=e.body,n=Qw(r.Error,t),o=new Cr({$metadata:He(e),...n});return S(o,r)},qw=async(e,t)=>{let r=e.body,n=Zw(r.Error,t),o=new xr({$metadata:He(e),...n});return S(o,r)};var zw=async(e,t)=>{let r=e.body,n=ex(r.Error,t),o=new Sr({$metadata:He(e),...n});return S(o,r)},Gl=async(e,t)=>{let r=e.body,n=tx(r.Error,t),o=new gr({$metadata:He(e),...n});return S(o,r)},Hl=async(e,t)=>{let r=e.body,n=rx(r.Error,t),o=new Er({$metadata:He(e),...n});return S(o,r)},Wl=async(e,t)=>{let r=e.body,n=nx(r.Error,t),o=new wr({$metadata:He(e),...n});return S(o,r)},Vw=(e,t)=>{var n,o,s;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let i=Kl(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(i).forEach(([a,c])=>{let d=`PolicyArns.${a}`;r[d]=c})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let i=Kw(e.Tags,t);((o=e.Tags)==null?void 0:o.length)===0&&(r.Tags=[]),Object.entries(i).forEach(([a,c])=>{let d=`Tags.${a}`;r[d]=c})}if(e.TransitiveTagKeys!=null){let i=Ww(e.TransitiveTagKeys,t);((s=e.TransitiveTagKeys)==null?void 0:s.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(i).forEach(([a,c])=>{let d=`TransitiveTagKeys.${a}`;r[d]=c})}return e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),r};var jw=(e,t)=>{var n;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let o=Kl(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(o).forEach(([s,i])=>{let a=`PolicyArns.${s}`;r[a]=i})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var Kl=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Gw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Gw=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},Hw=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},Ww=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},Kw=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Hw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Yl=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=y(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=y(e.Arn)),r},Yw=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Jl(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=Yl(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=hi(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=y(e.SourceIdentity)),r};var Jw=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=Jl(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=y(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=Yl(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=hi(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=y(e.Provider)),e.Audience!==void 0&&(r.Audience=y(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=y(e.SourceIdentity)),r},Jl=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=y(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=y(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=y(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=j(Kd(e.Expiration))),r};var Xw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=y(e.message)),r};var Qw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=y(e.message)),r},Zw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=y(e.message)),r};var ex=(e,t)=>{let r={};return e.message!==void 0&&(r.message=y(e.message)),r},tx=(e,t)=>{let r={};return e.message!==void 0&&(r.message=y(e.message)),r},rx=(e,t)=>{let r={};return e.message!==void 0&&(r.message=y(e.message)),r},nx=(e,t)=>{let r={};return e.message!==void 0&&(r.message=y(e.message)),r},He=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),ox=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),sx=(e,t)=>ox(e,t).then(r=>t.utf8Encoder(r)),Xl=vt(ne),Ql=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new he(d)},Zl={"content-type":"application/x-www-form-urlencoded"},Ti=(e,t)=>sx(e,t).then(r=>{if(r.length){let n=new Ml.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),yi(a)}return{}}),eu=async(e,t)=>{let r=await Ti(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},tu=e=>Object.entries(e).map(([t,r])=>ko(t)+"="+ko(r)).join("&"),ru=(e,t)=>{var r;if(((r=t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var _r=class extends O{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,_r.getEndpointParameterInstructions())),this.middlewareStack.use(bo(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:ol},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Bl(t,r)}deserialize(t,r){return zl(t,r)}};var br=class extends O{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,br.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:sl,outputFilterSensitiveLog:il},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return ql(t,r)}deserialize(t,r){return Vl(t,r)}};var nu="us-east-1",ou=e=>typeof e!="function"?e===void 0?nu:e:async()=>{try{return await e()}catch{return nu}},Oi=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:ou(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new _r(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},Ni=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:ou(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new br(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},su=e=>t=>e({roleAssumer:Oi(t,t.stsClientCtor),roleAssumerWithWebIdentity:Ni(t,t.stsClientCtor),...t});var ix="AWS_ACCESS_KEY_ID",ax="AWS_SECRET_ACCESS_KEY",cx="AWS_SESSION_TOKEN",dx="AWS_CREDENTIAL_EXPIRATION",Fo=()=>async()=>{let e=process.env[ix],t=process.env[ax],r=process.env[cx],n=process.env[dx];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new w("Unable to find environment variable credentials.")};var iu=require("os"),au=require("path"),Rr=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${au.sep}`}=process.env;return e||t||(r?`${n}${r}`:(0,iu.homedir)())};var Pi="AWS_PROFILE",lx="default",ye=e=>e.profile||process.env[Pi]||lx;var cu=require("crypto"),du=require("path");var Uo=e=>{let r=(0,cu.createHash)("sha1").update(e).digest("hex");return(0,du.join)(Rr(),".aws","sso","cache",`${r}.json`)};var lu=require("fs");var{readFile:ux}=lu.promises,$o=async e=>{let t=Uo(e),r=await ux(t,"utf8");return JSON.parse(r)};var uu=require("path");var px="AWS_CONFIG_FILE",Lo=()=>process.env[px]||(0,uu.join)(Rr(),".aws","config");var pu=require("path");var fx="AWS_SHARED_CREDENTIALS_FILE",fu=()=>process.env[fx]||(0,pu.join)(Rr(),".aws","credentials");var mu=/^profile\s(["'])?([^\1]+)\1$/,hu=e=>Object.entries(e).filter(([t])=>mu.test(t)).reduce((t,[r,n])=>({...t,[mu.exec(r)[2]]:n}),{...e.default&&{default:e.default}});var mx=["__proto__","profile __proto__"],bn=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),mx.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let s=n.indexOf("="),i=0,a=n.length-1;if(s!==-1&&s!==i&&s!==a){let[d,l]=[n.substring(0,s).trim(),n.substring(s+1).trim()];t[r]=t[r]||{},t[r][d]=l}}return t};var yu=require("fs"),{readFile:hx}=yu.promises,Di={},Rn=(e,t)=>((!Di[e]||t!=null&&t.ignoreCache)&&(Di[e]=hx(e,"utf8")),Di[e]);var gu=()=>({}),Mo=async(e={})=>{let{filepath:t=fu(),configFilepath:r=Lo()}=e,n=await Promise.all([Rn(r,{ignoreCache:e.ignoreCache}).then(bn).then(hu).catch(gu),Rn(t,{ignoreCache:e.ignoreCache}).then(bn).catch(gu)]);return{configFile:n[0],credentialsFile:n[1]}};var Eu=/^sso-session\s(["'])?([^\1]+)\1$/,wu=e=>Object.entries(e).filter(([t])=>Eu.test(t)).reduce((t,[r,n])=>({...t,[Eu.exec(r)[2]]:n}),{});var yx=()=>({}),Bo=async(e={})=>Rn(e.configFilepath??Lo()).then(bn).then(wu).catch(yx);var xu=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t};var Ot=async e=>{let t=await Mo(e);return xu(t.configFile,t.credentialsFile)};var bu=require("url");var Su=require("buffer"),Cu=require("http");function We(e){return new Promise((t,r)=>{var o;let n=(0,Cu.request)({method:"GET",...e,hostname:(o=e.hostname)==null?void 0:o.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new te("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new te("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new te("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let a=[];s.on("data",c=>{a.push(c)}),s.on("end",()=>{t(Su.Buffer.concat(a)),n.destroy()})}),n.end()})}var qo=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",zo=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var Vo=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var vn=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var An="AWS_CONTAINER_CREDENTIALS_FULL_URI",In="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",_u="AWS_CONTAINER_AUTHORIZATION_TOKEN",jo=(e={})=>{let{timeout:t,maxRetries:r}=Vo(e);return()=>vn(async()=>{let n=await Sx(),o=JSON.parse(await gx(t,n));if(!qo(o))throw new w("Invalid response received from instance metadata service.");return zo(o)},r)},gx=async(e,t)=>(process.env[_u]&&(t.headers={...t.headers,Authorization:process.env[_u]}),(await We({...t,timeout:e})).toString()),Ex="169.254.170.2",wx={localhost:!0,"127.0.0.1":!0},xx={"http:":!0,"https:":!0},Sx=async()=>{if(process.env[In])return{hostname:Ex,path:process.env[In]};if(process.env[An]){let e=(0,bu.parse)(process.env[An]);if(!e.hostname||!(e.hostname in wx))throw new w(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in xx))throw new w(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new w(`The container metadata credential provider cannot be used unless the ${In} or ${An} environment variable is set`,!1)};var Ru=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new w(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var vu=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=ye(r),{configFile:o,credentialsFile:s}=await Mo(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new w(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var Cx=e=>typeof e=="function",Au=e=>Cx(e)?async()=>await e():Rc(e);var C=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>wt(so(Ru(e),vu(t,n),Au(r)));var Tn;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Tn||(Tn={}));var _x="AWS_EC2_METADATA_SERVICE_ENDPOINT",bx="ec2_metadata_service_endpoint",Iu={environmentVariableSelector:e=>e[_x],configFileSelector:e=>e[bx],default:void 0};var Nt;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(Nt||(Nt={}));var Rx="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",vx="ec2_metadata_service_endpoint_mode",Tu={environmentVariableSelector:e=>e[Rx],configFileSelector:e=>e[vx],default:Nt.IPv4};var On=async()=>ee(await Ax()||await Ix()),Ax=async()=>C(Iu)(),Ix=async()=>{let e=await C(Tu)();switch(e){case Nt.IPv4:return Tn.IPv4;case Nt.IPv6:return Tn.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(Nt)}`)}};var Tx="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",ki=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+Tx);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var Ou=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=ki(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=ki(n,r);else throw s}return n=o,o}};var Nu="/latest/meta-data/iam/security-credentials/",Ox="/latest/api/token",Go=(e={})=>Ou(Nx(e),{logger:e.logger}),Nx=e=>{let t=!1,{timeout:r,maxRetries:n}=Vo(e),o=async(s,i)=>{let a=(await vn(async()=>{let c;try{c=await Dx(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return vn(async()=>{let c;try{c=await kx(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await On();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await Px({...s,timeout:r})).toString()}catch(a){if((a==null?void 0:a.statusCode)===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},Px=async e=>We({...e,path:Ox,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),Dx=async e=>(await We({...e,path:Nu})).toString(),kx=async(e,t)=>{let r=JSON.parse((await We({...t,path:Nu+e})).toString());if(!qo(r))throw new w("Invalid response received from instance metadata service.");return zo(r)};var Pu=(e,t)=>{let r={EcsContainer:jo,Ec2InstanceMetadata:Go,Environment:Fo};if(e in r)return r[e]();throw new w(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var Du=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Fx(e)||Ux(e)),Fx=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",Ux=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",ku=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new w(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new w(`Detected a cycle attempting to resolve credentials for profile ${ye(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?Ho(s,t,r,{...n,[s]:!0}):Pu(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new w(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};var Uu=require("child_process"),$u=require("util");var Fu=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Lu=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=(0,$u.promisify)(Uu.exec);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Fu(e,i)}catch(s){throw new w(s.message)}}else throw new w(`Profile ${e} did not contain credential_process.`)}else throw new w(`Profile ${e} could not be found in shared credentials file.`)};var Wo=(e={})=>async()=>{let t=await Ot(e);return Lu(ye(e),t)};var Mu=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Bu=async(e,t)=>Wo({...e,profile:t})();var Nn=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var qu=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var zu={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.352.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.347.0","@aws-sdk/fetch-http-handler":"3.347.0","@aws-sdk/hash-node":"3.347.0","@aws-sdk/invalid-dependency":"3.347.0","@aws-sdk/middleware-content-length":"3.347.0","@aws-sdk/middleware-endpoint":"3.347.0","@aws-sdk/middleware-host-header":"3.347.0","@aws-sdk/middleware-logger":"3.347.0","@aws-sdk/middleware-recursion-detection":"3.347.0","@aws-sdk/middleware-retry":"3.347.0","@aws-sdk/middleware-serde":"3.347.0","@aws-sdk/middleware-stack":"3.347.0","@aws-sdk/middleware-user-agent":"3.352.0","@aws-sdk/node-config-provider":"3.347.0","@aws-sdk/node-http-handler":"3.350.0","@aws-sdk/smithy-client":"3.347.0","@aws-sdk/types":"3.347.0","@aws-sdk/url-parser":"3.347.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.347.0","@aws-sdk/util-defaults-mode-node":"3.347.0","@aws-sdk/util-endpoints":"3.352.0","@aws-sdk/util-retry":"3.347.0","@aws-sdk/util-user-agent-browser":"3.347.0","@aws-sdk/util-user-agent-node":"3.347.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var ju=require("buffer"),Ko=require("crypto"),Fe=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(Oe(Vu(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,Ko.createHmac)(this.algorithmIdentifier,Vu(this.secret)):(0,Ko.createHash)(this.algorithmIdentifier)}};function Vu(e,t){return ju.Buffer.isBuffer(e)?e:typeof e=="string"?pr(e,t):ArrayBuffer.isView(e)?jt(e.buffer,e.byteOffset,e.byteLength):jt(e)}function Fi(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Pe(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Pe(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Pe(n)}`),t.push(o)}}return t.join("&")}var Yo=require("http"),Jo=require("https");var Gu=["ECONNRESET","EPIPE","ETIMEDOUT"];var Ui=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var Hu=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",o=>{o.connecting?o.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})};var Wu=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})};var Ku=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};var Ju=require("stream"),Yu=1e3;async function $i(e,t,r=Yu){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(a=>{s=Number(setTimeout(a,Math.max(Yu,r)))}),new Promise(a=>{e.on("continue",()=>{clearTimeout(s),a()}),e.on("error",()=>{i=!0,clearTimeout(s),a()})})]),i||Lx(e,t.body)}function Lx(e,t){t instanceof Ju.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var Ue=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:s||new Yo.Agent({keepAlive:a,maxSockets:c}),httpsAgent:i||new Jo.Agent({keepAlive:a,maxSockets:c})}}destroy(){var t,r,n,o;(r=(t=this.config)==null?void 0:t.httpAgent)==null||r.destroy(),(o=(n=this.config)==null?void 0:n.httpsAgent)==null||o.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let s,i=async h=>{await s,n(h)},a=async h=>{await s,o(h)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let h=new Error("Request aborted");h.name="AbortError",a(h);return}let c=t.protocol==="https:",d=Fi(t.query||{}),l;if(t.username!=null||t.password!=null){let h=t.username??"",ie=t.password??"";l=`${h}:${ie}`}let u=t.path;d&&(u+=`?${d}`),t.fragment&&(u+=`#${t.fragment}`);let p={headers:t.headers,host:t.hostname,method:t.method,path:u,port:t.port,agent:c?this.config.httpsAgent:this.config.httpAgent,auth:l},m=(c?Jo.request:Yo.request)(p,h=>{let ie=new Ae({statusCode:h.statusCode||-1,reason:h.statusMessage,headers:Ui(h.headers),body:h});i({response:ie})});m.on("error",h=>{Gu.includes(h.code)?a(Object.assign(h,{name:"TimeoutError"})):a(h)}),Hu(m,a,this.config.connectionTimeout),Ku(m,a,this.config.requestTimeout),r&&(r.onabort=()=>{m.abort();let h=new Error("Request aborted");h.name="AbortError",a(h)});let g=p.agent;typeof g=="object"&&"keepAlive"in g&&Wu(m,{keepAlive:g.keepAlive,keepAliveMsecs:g.keepAliveMsecs}),s=$i(m,t,this.config.requestTimeout)})}};var Li=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};var Xu=require("stream"),Xo=class extends Xu.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var Pt=e=>new Promise((t,r)=>{let n=new Xo;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});var Qo=require("fs"),Dt=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,Qo.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,Qo.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var Zo=require("os"),Pn=require("process");var Qu=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var Mx="AWS_SDK_UA_APP_ID",Bx="sdk-ua-app-id",kt=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,Zo.platform)()}`,(0,Zo.release)()],["lang/js"],["md/nodejs",`${Pn.versions.node}`]],n=Qu();n&&r.push(n),e&&r.push([`api/${e}`,t]),Pn.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${Pn.env.AWS_EXECUTION_ENV}`]);let o=C({environmentVariableSelector:i=>i[Mx],configFileSelector:i=>i[Bx],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var qx=/^[A-Za-z0-9+/]*={0,2}$/,Ft=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!qx.exec(e))throw new TypeError("Invalid base64 string.");let t=pr(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var Ut=e=>jt(e.buffer,e.byteOffset,e.byteLength).toString("base64");var ip="required",Ke="fn",Ye="argv",vr="ref",Mi="PartitionResult",$e="tree",Dn="error",kn="endpoint",Zu={[ip]:!1,type:"String"},ep={[ip]:!0,default:!1,type:"Boolean"},ap={[vr]:"Endpoint"},cp={[Ke]:"booleanEquals",[Ye]:[{[vr]:"UseFIPS"},!0]},dp={[Ke]:"booleanEquals",[Ye]:[{[vr]:"UseDualStack"},!0]},Le={},tp={[Ke]:"booleanEquals",[Ye]:[!0,{[Ke]:"getAttr",[Ye]:[{[vr]:Mi},"supportsFIPS"]}]},rp={[Ke]:"booleanEquals",[Ye]:[!0,{[Ke]:"getAttr",[Ye]:[{[vr]:Mi},"supportsDualStack"]}]},np=[ap],op=[cp],sp=[dp],zx={version:"1.0",parameters:{Region:Zu,UseDualStack:ep,UseFIPS:ep,Endpoint:Zu},rules:[{conditions:[{[Ke]:"aws.partition",[Ye]:[{[vr]:"Region"}],assign:Mi}],type:$e,rules:[{conditions:[{[Ke]:"isSet",[Ye]:np},{[Ke]:"parseURL",[Ye]:np,assign:"url"}],type:$e,rules:[{conditions:op,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Dn},{type:$e,rules:[{conditions:sp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Dn},{endpoint:{url:ap,properties:Le,headers:Le},type:kn}]}]},{conditions:[cp,dp],type:$e,rules:[{conditions:[tp,rp],type:$e,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Le,headers:Le},type:kn}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Dn}]},{conditions:op,type:$e,rules:[{conditions:[tp],type:$e,rules:[{type:$e,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Le,headers:Le},type:kn}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Dn}]},{conditions:sp,type:$e,rules:[{conditions:[rp],type:$e,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Le,headers:Le},type:kn}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Dn}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Le,headers:Le},type:kn}]}]},lp=zx;var up=(e,t={})=>bt(lp,{endpointParams:e,logger:t.logger});var pp=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Ft,base64Encoder:(e==null?void 0:e.base64Encoder)??Ut,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??up,logger:(e==null?void 0:e.logger)??new De,serviceId:(e==null?void 0:e.serviceId)??"SSO",urlParser:(e==null?void 0:e.urlParser)??ee,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ue,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Ne});var fp="AWS_EXECUTION_ENV",Bi="AWS_REGION",qi="AWS_DEFAULT_REGION",mp="AWS_EC2_METADATA_DISABLED",hp=["in-region","cross-region","mobile","standard","legacy"],yp="/latest/meta-data/placement/region";var Vx="AWS_DEFAULTS_MODE",jx="defaults_mode",gp={environmentVariableSelector:e=>e[Vx],configFileSelector:e=>e[jx],default:"legacy"};var $t=({region:e=C(ve),defaultsMode:t=C(gp)}={})=>wt(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return Gx(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${hp.join(", ")}, got ${r}`)}}),Gx=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await Hx();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},Hx=async()=>{if(process.env[fp]&&(process.env[Bi]||process.env[qi]))return process.env[Bi]??process.env[qi];if(!process.env[mp])try{let e=await On();return(await We({...e,path:yp})).toString()}catch{}};var Ep=e=>{It(process.version);let t=$t(e),r=()=>t().then(At),n=pp(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Dt,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??kt({serviceId:n.serviceId,clientVersion:zu.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??C(ht),region:(e==null?void 0:e.region)??C(ve,ct),requestHandler:(e==null?void 0:e.requestHandler)??new Ue(r),retryMode:(e==null?void 0:e.retryMode)??C({...gt,default:async()=>(await r()).retryMode||Ie}),sha256:(e==null?void 0:e.sha256)??Fe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Pt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??C(it),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??C(at)}};var es=class extends ke{constructor(t){let r=Ep(t),n=qu(r),o=dt(n),s=ut(o),i=yt(s),a=i,c=Ct(a);super(c),this.config=c,this.middlewareStack.use(Et(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(Rt(this.config))}destroy(){super.destroy()}};var _e=class extends me{constructor(t){super(t),Object.setPrototypeOf(this,_e.prototype)}};var Ar=class extends _e{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Ar.prototype)}},Ir=class extends _e{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Ir.prototype)}},Tr=class extends _e{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,Tr.prototype)}},Or=class extends _e{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,Or.prototype)}},wp=e=>({...e,...e.accessToken&&{accessToken:J}}),Wx=e=>({...e,...e.secretAccessKey&&{secretAccessKey:J},...e.sessionToken&&{sessionToken:J}}),xp=e=>({...e,...e.roleCredentials&&{roleCredentials:Wx(e.roleCredentials)}});var Sp=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=k({},rS,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=k({role_name:[,j(e.roleName,"roleName")],account_id:[,j(e.accountId,"accountId")]}),d;return new he({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Cp=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Kx(e,t);let r=k({$metadata:Fn(e)}),n=j(Do(await _p(e.body,t)),"body"),o=v(n,{roleCredentials:I});return Object.assign(r,o),r},Kx=async(e,t)=>{let r={...e,body:await nS(e.body,t)},n=oS(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Jx(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await Xx(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await Qx(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Zx(r,t);default:let o=r.body;return Yx({output:e,parsedBody:o,errorCode:n})}};var Yx=vt(_e),Jx=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{message:y});Object.assign(r,o);let s=new Ar({$metadata:Fn(e),...r});return S(s,e.body)},Xx=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{message:y});Object.assign(r,o);let s=new Ir({$metadata:Fn(e),...r});return S(s,e.body)},Qx=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{message:y});Object.assign(r,o);let s=new Tr({$metadata:Fn(e),...r});return S(s,e.body)},Zx=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{message:y});Object.assign(r,o);let s=new Or({$metadata:Fn(e),...r});return S(s,e.body)},Fn=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),eS=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),tS=(e,t)=>eS(e,t).then(r=>t.utf8Encoder(r)),rS=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),_p=(e,t)=>tS(e,t).then(r=>r.length?JSON.parse(r):{}),nS=async(e,t)=>{let r=await _p(e,t);return r.message=r.message??r.Message,r},oS=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Nr=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,Nr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:wp,outputFilterSensitiveLog:xp},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Sp(t,r)}deserialize(t,r){return Cp(t,r)}};var Pr="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var bp=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"});var Rp={name:"@aws-sdk/client-sso-oidc",description:"AWS SDK for JavaScript Sso Oidc Client for Node.js, Browser and React Native",version:"3.352.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso-oidc"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/config-resolver":"3.347.0","@aws-sdk/fetch-http-handler":"3.347.0","@aws-sdk/hash-node":"3.347.0","@aws-sdk/invalid-dependency":"3.347.0","@aws-sdk/middleware-content-length":"3.347.0","@aws-sdk/middleware-endpoint":"3.347.0","@aws-sdk/middleware-host-header":"3.347.0","@aws-sdk/middleware-logger":"3.347.0","@aws-sdk/middleware-recursion-detection":"3.347.0","@aws-sdk/middleware-retry":"3.347.0","@aws-sdk/middleware-serde":"3.347.0","@aws-sdk/middleware-stack":"3.347.0","@aws-sdk/middleware-user-agent":"3.352.0","@aws-sdk/node-config-provider":"3.347.0","@aws-sdk/node-http-handler":"3.350.0","@aws-sdk/smithy-client":"3.347.0","@aws-sdk/types":"3.347.0","@aws-sdk/url-parser":"3.347.0","@aws-sdk/util-base64":"3.310.0","@aws-sdk/util-body-length-browser":"3.310.0","@aws-sdk/util-body-length-node":"3.310.0","@aws-sdk/util-defaults-mode-browser":"3.347.0","@aws-sdk/util-defaults-mode-node":"3.347.0","@aws-sdk/util-endpoints":"3.352.0","@aws-sdk/util-retry":"3.347.0","@aws-sdk/util-user-agent-browser":"3.347.0","@aws-sdk/util-user-agent-node":"3.347.0","@aws-sdk/util-utf8":"3.310.0","@smithy/protocol-http":"^1.0.1","@smithy/types":"^1.0.0",tslib:"^2.5.0"},devDependencies:{"@aws-sdk/service-client-documentation-generator":"3.310.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso-oidc",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso-oidc"}};var Dp="required",Je="fn",Xe="argv",Dr="ref",Vi="PartitionResult",Me="tree",Un="error",$n="endpoint",vp={[Dp]:!1,type:"String"},Ap={[Dp]:!0,default:!1,type:"Boolean"},kp={[Dr]:"Endpoint"},Fp={[Je]:"booleanEquals",[Xe]:[{[Dr]:"UseFIPS"},!0]},Up={[Je]:"booleanEquals",[Xe]:[{[Dr]:"UseDualStack"},!0]},Be={},Ip={[Je]:"booleanEquals",[Xe]:[!0,{[Je]:"getAttr",[Xe]:[{[Dr]:Vi},"supportsFIPS"]}]},Tp={[Je]:"booleanEquals",[Xe]:[!0,{[Je]:"getAttr",[Xe]:[{[Dr]:Vi},"supportsDualStack"]}]},Op=[kp],Np=[Fp],Pp=[Up],iS={version:"1.0",parameters:{Region:vp,UseDualStack:Ap,UseFIPS:Ap,Endpoint:vp},rules:[{conditions:[{[Je]:"aws.partition",[Xe]:[{[Dr]:"Region"}],assign:Vi}],type:Me,rules:[{conditions:[{[Je]:"isSet",[Xe]:Op},{[Je]:"parseURL",[Xe]:Op,assign:"url"}],type:Me,rules:[{conditions:Np,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Un},{type:Me,rules:[{conditions:Pp,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Un},{endpoint:{url:kp,properties:Be,headers:Be},type:$n}]}]},{conditions:[Fp,Up],type:Me,rules:[{conditions:[Ip,Tp],type:Me,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Be,headers:Be},type:$n}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Un}]},{conditions:Np,type:Me,rules:[{conditions:[Ip],type:Me,rules:[{type:Me,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Be,headers:Be},type:$n}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Un}]},{conditions:Pp,type:Me,rules:[{conditions:[Tp],type:Me,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Be,headers:Be},type:$n}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Un}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:Be,headers:Be},type:$n}]}]},$p=iS;var Lp=(e,t={})=>bt($p,{endpointParams:e,logger:t.logger});var Mp=e=>({apiVersion:"2019-06-10",base64Decoder:(e==null?void 0:e.base64Decoder)??Ft,base64Encoder:(e==null?void 0:e.base64Encoder)??Ut,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Lp,logger:(e==null?void 0:e.logger)??new De,serviceId:(e==null?void 0:e.serviceId)??"SSO OIDC",urlParser:(e==null?void 0:e.urlParser)??ee,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ue,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Ne});var Bp=e=>{It(process.version);let t=$t(e),r=()=>t().then(At),n=Mp(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Dt,defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??kt({serviceId:n.serviceId,clientVersion:Rp.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??C(ht),region:(e==null?void 0:e.region)??C(ve,ct),requestHandler:(e==null?void 0:e.requestHandler)??new Ue(r),retryMode:(e==null?void 0:e.retryMode)??C({...gt,default:async()=>(await r()).retryMode||Ie}),sha256:(e==null?void 0:e.sha256)??Fe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Pt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??C(it),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??C(at)}};var ts=class extends ke{constructor(t){let r=Bp(t),n=bp(r),o=dt(n),s=ut(o),i=yt(s),a=i,c=Ct(a);super(c),this.config=c,this.middlewareStack.use(Et(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(Rt(this.config))}destroy(){super.destroy()}};var B=class extends me{constructor(t){super(t),Object.setPrototypeOf(this,B.prototype)}};var kr=class extends B{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,kr.prototype),this.error=t.error,this.error_description=t.error_description}},Fr=class extends B{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,Fr.prototype),this.error=t.error,this.error_description=t.error_description}},Ur=class extends B{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Ur.prototype),this.error=t.error,this.error_description=t.error_description}},$r=class extends B{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,$r.prototype),this.error=t.error,this.error_description=t.error_description}},Lr=class extends B{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Lr.prototype),this.error=t.error,this.error_description=t.error_description}},Mr=class extends B{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Mr.prototype),this.error=t.error,this.error_description=t.error_description}},Br=class extends B{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Br.prototype),this.error=t.error,this.error_description=t.error_description}},qr=class extends B{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,qr.prototype),this.error=t.error,this.error_description=t.error_description}},zr=class extends B{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,zr.prototype),this.error=t.error,this.error_description=t.error_description}},Vr=class extends B{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Vr.prototype),this.error=t.error,this.error_description=t.error_description}},jr=class extends B{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,jr.prototype),this.error=t.error,this.error_description=t.error_description}};var qp=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(v(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>I(d)})),new he({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})};var zp=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return aS(e,t);let r=k({$metadata:ge(e)}),n=j(Do(await Vp(e.body,t)),"body"),o=v(n,{accessToken:y,expiresIn:wn,idToken:y,refreshToken:y,tokenType:y});return Object.assign(r,o),r},aS=async(e,t)=>{let r={...e,body:await CS(e.body,t)},n=_S(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await dS(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await lS(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await uS(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await pS(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await fS(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await mS(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await hS(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await yS(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await gS(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await ES(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await wS(r,t);default:let o=r.body;return cS({output:e,parsedBody:o,errorCode:n})}};var cS=vt(B),dS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new kr({$metadata:ge(e),...r});return S(s,e.body)},lS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new Fr({$metadata:ge(e),...r});return S(s,e.body)},uS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new Ur({$metadata:ge(e),...r});return S(s,e.body)},pS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new $r({$metadata:ge(e),...r});return S(s,e.body)},fS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new Lr({$metadata:ge(e),...r});return S(s,e.body)};var mS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new Mr({$metadata:ge(e),...r});return S(s,e.body)},hS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new Br({$metadata:ge(e),...r});return S(s,e.body)},yS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new qr({$metadata:ge(e),...r});return S(s,e.body)},gS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new zr({$metadata:ge(e),...r});return S(s,e.body)},ES=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new Vr({$metadata:ge(e),...r});return S(s,e.body)},wS=async(e,t)=>{let r=k({}),n=e.body,o=v(n,{error:y,error_description:y});Object.assign(r,o);let s=new jr({$metadata:ge(e),...r});return S(s,e.body)},ge=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),xS=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),SS=(e,t)=>xS(e,t).then(r=>t.utf8Encoder(r));var Vp=(e,t)=>SS(e,t).then(r=>r.length?JSON.parse(r):{}),CS=async(e,t)=>{let r=await Vp(e,t);return r.message=r.message??r.Message,r},_S=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Gr=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,Gr.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return qp(t,r)}deserialize(t,r){return zp(t,r)}};var ji={},jp=e=>{if(ji[e])return ji[e];let t=new ts({region:e});return ji[e]=t,t};var Gp=(e,t)=>jp(t).send(new Gr({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var Gi=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new re(`Token is expired. ${Pr}`,!1)};var Lt=(e,t,r=!1)=>{if(typeof t>"u")throw new re(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Pr}`,!1)};var Hp=require("fs"),{writeFile:bS}=Hp.promises,Wp=(e,t)=>{let r=Uo(e),n=JSON.stringify(t,null,2);return bS(r,n)};var Kp=new Date(0),Yp=(e={})=>async()=>{let t=await Ot(e),r=ye(e),n=t[r];if(n){if(!n.sso_session)throw new re(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new re(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await Bo(e))[o];if(!i)throw new re(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let f of["sso_start_url","sso_region"])if(!i[f])throw new re(`Sso session '${o}' is missing required property '${f}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await $o(o)}catch{throw new re(`The SSO session token associated with profile=${r} was not found or is invalid. ${Pr}`,!1)}Lt("accessToken",d.accessToken),Lt("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:u}=d,p={token:l,expiration:new Date(u)};if(p.expiration.getTime()-Date.now()>3e5)return p;if(Date.now()-Kp.getTime()<30*1e3)return Gi(p),p;Lt("clientId",d.clientId,!0),Lt("clientSecret",d.clientSecret,!0),Lt("refreshToken",d.refreshToken,!0);try{Kp.setTime(Date.now());let f=await Gp(d,c);Lt("accessToken",f.accessToken),Lt("expiresIn",f.expiresIn);let m=new Date(Date.now()+f.expiresIn*1e3);try{await Wp(o,{...d,accessToken:f.accessToken,expiresAt:m.toISOString(),refreshToken:f.refreshToken})}catch{}return{token:f.accessToken,expiration:m}}catch{return Gi(p),p}};var vS=15*60*1e3,Ln=!1,Hi=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let h=await Yp({profile:i})();a={accessToken:h.token,expiresAt:new Date(h.expiration).toISOString()}}catch(h){throw new w(h.message,Ln)}else try{a=await $o(e)}catch{throw new w(`The SSO session associated with this profile is invalid. ${c}`,Ln)}if(new Date(a.expiresAt).getTime()-Date.now()<=vS)throw new w(`The SSO session associated with this profile has expired. ${c}`,Ln);let{accessToken:d}=a,l=s||new es({region:n}),u;try{u=await l.send(new Nr({accountId:r,roleName:o,accessToken:d}))}catch(h){throw w.from(h,Ln)}let{roleCredentials:{accessKeyId:p,secretAccessKey:f,sessionToken:m,expiration:g}={}}=u;if(!p||!f||!m||!g)throw new w("SSO returns an invalid temporary credential.",Ln);return{accessKeyId:p,secretAccessKey:f,sessionToken:m,expiration:new Date(g)}};var rs=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new w(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var ns=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=ye(e);if(!t&&!r&&!n&&!o&&!i){let d=(await Ot(e))[a];if(!d)throw new w(`Profile ${a} was not found.`);if(!Nn(d))throw new w(`Profile ${a} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let h=(await Bo(e))[d.sso_session],ie=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==h.sso_region)throw new w("Conflicting SSO region"+ie,!1);if(t&&t!==h.sso_start_url)throw new w("Conflicting SSO start_url"+ie,!1);d.sso_region=h.sso_region,d.sso_start_url=h.sso_start_url}let{sso_start_url:l,sso_account_id:u,sso_region:p,sso_role_name:f,sso_session:m}=rs(d);return Hi({ssoStartUrl:l,ssoSession:m,ssoAccountId:u,ssoRegion:p,ssoRoleName:f,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new w('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return Hi({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var Jp=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=rs(e);return ns({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var Wi=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,Ki=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var Qp=require("fs");var Xp=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new w(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var AS="AWS_WEB_IDENTITY_TOKEN_FILE",IS="AWS_ROLE_ARN",TS="AWS_ROLE_SESSION_NAME",os=(e={})=>async()=>OS(e),OS=e=>{let t=(e==null?void 0:e.webIdentityTokenFile)??process.env[AS],r=(e==null?void 0:e.roleArn)??process.env[IS],n=(e==null?void 0:e.roleSessionName)??process.env[TS];if(!t||!r)throw new w("Web identity configuration not specified");return Xp({...e,webIdentityToken:(0,Qp.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var Zp=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,ef=async(e,t)=>os({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var Ho=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&Wi(o))return Ki(o);if(Du(o))return ku(e,t,r,n);if(Wi(o))return Ki(o);if(Zp(o))return ef(o,r);if(Mu(o))return Bu(r,e);if(Nn(o))return Jp(o);throw new w(`Profile ${e} could not be found or parsed in shared credentials file.`)};var tf=(e={})=>async()=>{let t=await Ot(e);return Ho(ye(e),t,e)};var NS="AWS_EC2_METADATA_DISABLED",rf=e=>process.env[In]||process.env[An]?jo(e):process.env[NS]?async()=>{throw new w("EC2 Instance Metadata Service access disabled")}:Go(e);var ss=(e={})=>wt(so(...e.profile||process.env[Pi]?[]:[Fo()],ns(e),tf(e),Wo(e),os(e),rf(e),async()=>{throw new w("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var mf="required",x="type",b="fn",R="argv",Mt="ref";var Ht="booleanEquals",W="tree",G="stringEquals",hf="sigv4",yf="sts",gf="us-east-1",N="endpoint",nf="https://sts.{Region}.{PartitionResult#dnsSuffix}",Hr="error",Ji="getAttr",of={[mf]:!1,[x]:"String"},Yi={[mf]:!0,default:!1,[x]:"Boolean"},Ef={[Mt]:"Endpoint"},sf={[b]:"isSet",[R]:[{[Mt]:"Region"}]},H={[Mt]:"Region"},af={[b]:"aws.partition",[R]:[H],assign:"PartitionResult"},wf={[Mt]:"UseFIPS"},xf={[Mt]:"UseDualStack"},K={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:hf,signingName:yf,signingRegion:gf}]},headers:{}},ae={},cf={conditions:[{[b]:G,[R]:[H,"aws-global"]}],[N]:K,[x]:N},Sf={[b]:Ht,[R]:[wf,!0]},Cf={[b]:Ht,[R]:[xf,!0]},df={[b]:Ht,[R]:[!0,{[b]:Ji,[R]:[{[Mt]:"PartitionResult"},"supportsFIPS"]}]},_f={[Mt]:"PartitionResult"},lf={[b]:Ht,[R]:[!0,{[b]:Ji,[R]:[_f,"supportsDualStack"]}]},uf=[{[b]:"isSet",[R]:[Ef]}],pf=[Sf],ff=[Cf],PS={version:"1.0",parameters:{Region:of,UseDualStack:Yi,UseFIPS:Yi,Endpoint:of,UseGlobalEndpoint:Yi},rules:[{conditions:[{[b]:Ht,[R]:[{[Mt]:"UseGlobalEndpoint"},!0]},{[b]:"not",[R]:uf},sf,af,{[b]:Ht,[R]:[wf,!1]},{[b]:Ht,[R]:[xf,!1]}],[x]:W,rules:[{conditions:[{[b]:G,[R]:[H,"ap-northeast-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"ap-south-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"ap-southeast-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"ap-southeast-2"]}],endpoint:K,[x]:N},cf,{conditions:[{[b]:G,[R]:[H,"ca-central-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"eu-central-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"eu-north-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"eu-west-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"eu-west-2"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"eu-west-3"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"sa-east-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,gf]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"us-east-2"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"us-west-1"]}],endpoint:K,[x]:N},{conditions:[{[b]:G,[R]:[H,"us-west-2"]}],endpoint:K,[x]:N},{endpoint:{url:nf,properties:{authSchemes:[{name:hf,signingName:yf,signingRegion:"{Region}"}]},headers:ae},[x]:N}]},{conditions:uf,[x]:W,rules:[{conditions:pf,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[x]:Hr},{[x]:W,rules:[{conditions:ff,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[x]:Hr},{endpoint:{url:Ef,properties:ae,headers:ae},[x]:N}]}]},{[x]:W,rules:[{conditions:[sf],[x]:W,rules:[{conditions:[af],[x]:W,rules:[{conditions:[Sf,Cf],[x]:W,rules:[{conditions:[df,lf],[x]:W,rules:[{[x]:W,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ae,headers:ae},[x]:N}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[x]:Hr}]},{conditions:pf,[x]:W,rules:[{conditions:[df],[x]:W,rules:[{[x]:W,rules:[{conditions:[{[b]:G,[R]:["aws-us-gov",{[b]:Ji,[R]:[_f,"name"]}]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:ae,headers:ae},[x]:N},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ae,headers:ae},[x]:N}]}]},{error:"FIPS is enabled but this partition does not support FIPS",[x]:Hr}]},{conditions:ff,[x]:W,rules:[{conditions:[lf],[x]:W,rules:[{[x]:W,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ae,headers:ae},[x]:N}]}]},{error:"DualStack is enabled but this partition does not support DualStack",[x]:Hr}]},{[x]:W,rules:[cf,{endpoint:{url:nf,properties:ae,headers:ae},[x]:N}]}]}]},{error:"Invalid Configuration: Missing Region",[x]:Hr}]}]},bf=PS;var Rf=(e,t={})=>bt(bf,{endpointParams:e,logger:t.logger});var vf=e=>({apiVersion:"2011-06-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Ft,base64Encoder:(e==null?void 0:e.base64Encoder)??Ut,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Rf,logger:(e==null?void 0:e.logger)??new De,serviceId:(e==null?void 0:e.serviceId)??"STS",urlParser:(e==null?void 0:e.urlParser)??ee,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ue,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Ne});var Af=e=>{It(process.version);let t=$t(e),r=()=>t().then(At),n=vf(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Dt,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??su(ss),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??kt({serviceId:n.serviceId,clientVersion:rl.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??C(ht),region:(e==null?void 0:e.region)??C(ve,ct),requestHandler:(e==null?void 0:e.requestHandler)??new Ue(r),retryMode:(e==null?void 0:e.retryMode)??C({...gt,default:async()=>(await r()).retryMode||Ie}),sha256:(e==null?void 0:e.sha256)??Fe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Pt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??C(it),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??C(at)}};var Wt=class extends ke{constructor(t){let r=Af(t),n=tl(r),o=dt(n),s=ut(o),i=yt(s),a=i,c=el(a,{stsClientCtor:Wt}),d=Ct(c);super(d),this.config=d,this.middlewareStack.use(Et(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(Rt(this.config))}destroy(){super.destroy()}};var If=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,DS=(e={},t)=>Oi(e,If(Wt,t)),kS=(e={},t)=>Ni(e,If(Wt,t)),Tf=e=>t=>e({roleAssumer:DS(t),roleAssumerWithWebIdentity:kS(t),...t});var Mf="required",Qe="fn",Ze="argv",Kr="ref",Of="isSet",X="tree",Wr="error",Mn="endpoint",Xi="PartitionResult",Nf={[Mf]:!1,type:"String"},Pf={[Mf]:!0,default:!1,type:"Boolean"},Df={[Kr]:"Endpoint"},Bf={[Qe]:"booleanEquals",[Ze]:[{[Kr]:"UseFIPS"},!0]},qf={[Qe]:"booleanEquals",[Ze]:[{[Kr]:"UseDualStack"},!0]},qe={},kf={[Qe]:"booleanEquals",[Ze]:[!0,{[Qe]:"getAttr",[Ze]:[{[Kr]:Xi},"supportsFIPS"]}]},Ff={[Qe]:"booleanEquals",[Ze]:[!0,{[Qe]:"getAttr",[Ze]:[{[Kr]:Xi},"supportsDualStack"]}]},Uf=[Bf],$f=[qf],Lf=[{[Kr]:"Region"}],FS={version:"1.0",parameters:{Region:Nf,UseDualStack:Pf,UseFIPS:Pf,Endpoint:Nf},rules:[{conditions:[{[Qe]:Of,[Ze]:[Df]}],type:X,rules:[{conditions:Uf,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Wr},{type:X,rules:[{conditions:$f,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Wr},{endpoint:{url:Df,properties:qe,headers:qe},type:Mn}]}]},{type:X,rules:[{conditions:[{[Qe]:Of,[Ze]:Lf}],type:X,rules:[{conditions:[{[Qe]:"aws.partition",[Ze]:Lf,assign:Xi}],type:X,rules:[{conditions:[Bf,qf],type:X,rules:[{conditions:[kf,Ff],type:X,rules:[{type:X,rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:qe,headers:qe},type:Mn}]}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Wr}]},{conditions:Uf,type:X,rules:[{conditions:[kf],type:X,rules:[{type:X,rules:[{endpoint:{url:"https://apprunner-fips.{Region}.{PartitionResult#dnsSuffix}",properties:qe,headers:qe},type:Mn}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Wr}]},{conditions:$f,type:X,rules:[{conditions:[Ff],type:X,rules:[{type:X,rules:[{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:qe,headers:qe},type:Mn}]}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Wr}]},{type:X,rules:[{endpoint:{url:"https://apprunner.{Region}.{PartitionResult#dnsSuffix}",properties:qe,headers:qe},type:Mn}]}]}]},{error:"Invalid Configuration: Missing Region",type:Wr}]}]},zf=FS;var Vf=(e,t={})=>bt(zf,{endpointParams:e,logger:t.logger});var jf=e=>({apiVersion:"2020-05-15",base64Decoder:(e==null?void 0:e.base64Decoder)??Ft,base64Encoder:(e==null?void 0:e.base64Encoder)??Ut,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??Vf,logger:(e==null?void 0:e.logger)??new De,serviceId:(e==null?void 0:e.serviceId)??"AppRunner",urlParser:(e==null?void 0:e.urlParser)??ee,utf8Decoder:(e==null?void 0:e.utf8Decoder)??ue,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Ne});var Gf=e=>{It(process.version);let t=$t(e),r=()=>t().then(At),n=jf(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??Dt,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??Tf(ss),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??kt({serviceId:n.serviceId,clientVersion:Zd.version}),maxAttempts:(e==null?void 0:e.maxAttempts)??C(ht),region:(e==null?void 0:e.region)??C(ve,ct),requestHandler:(e==null?void 0:e.requestHandler)??new Ue(r),retryMode:(e==null?void 0:e.retryMode)??C({...gt,default:async()=>(await r()).retryMode||Ie}),sha256:(e==null?void 0:e.sha256)??Fe.bind(null,"sha256"),streamCollector:(e==null?void 0:e.streamCollector)??Pt,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??C(it),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??C(at)}};var is=class extends ke{constructor(t){let r=Gf(t),n=Qd(r),o=dt(n),s=ut(o),i=yt(s),a=i,c=Co(a),d=Ct(c);super(d),this.config=d,this.middlewareStack.use(Et(this.config)),this.middlewareStack.use(lt(this.config)),this.middlewareStack.use(pt(this.config)),this.middlewareStack.use(ft(this.config)),this.middlewareStack.use(mt(this.config)),this.middlewareStack.use(bo(this.config)),this.middlewareStack.use(Rt(this.config))}destroy(){super.destroy()}};var Ee=class extends me{constructor(t){super(t),Object.setPrototypeOf(this,Ee.prototype)}};var Yr=class extends Ee{constructor(t){super({name:"InternalServiceErrorException",$fault:"server",...t}),this.name="InternalServiceErrorException",this.$fault="server",Object.setPrototypeOf(this,Yr.prototype),this.Message=t.Message}},Jr=class extends Ee{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Jr.prototype),this.Message=t.Message}},Xr=class extends Ee{constructor(t){super({name:"InvalidStateException",$fault:"client",...t}),this.name="InvalidStateException",this.$fault="client",Object.setPrototypeOf(this,Xr.prototype),this.Message=t.Message}};var Qr=class extends Ee{constructor(t){super({name:"ServiceQuotaExceededException",$fault:"client",...t}),this.name="ServiceQuotaExceededException",this.$fault="client",Object.setPrototypeOf(this,Qr.prototype),this.Message=t.Message}};var as={CORRETTO_11:"CORRETTO_11",CORRETTO_8:"CORRETTO_8",DOTNET_6:"DOTNET_6",GO_1:"GO_1",NODEJS_12:"NODEJS_12",NODEJS_14:"NODEJS_14",NODEJS_16:"NODEJS_16",PHP_81:"PHP_81",PYTHON_3:"PYTHON_3",RUBY_31:"RUBY_31"};var Qi={ECR:"ECR",ECR_PUBLIC:"ECR_PUBLIC"},en={CREATE_FAILED:"CREATE_FAILED",DELETED:"DELETED",DELETE_FAILED:"DELETE_FAILED",OPERATION_IN_PROGRESS:"OPERATION_IN_PROGRESS",PAUSED:"PAUSED",RUNNING:"RUNNING"};var Zr=class extends Ee{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,Zr.prototype),this.Message=t.Message}},Hf={FAILED:"FAILED",IN_PROGRESS:"IN_PROGRESS",PENDING:"PENDING",ROLLBACK_FAILED:"ROLLBACK_FAILED",ROLLBACK_IN_PROGRESS:"ROLLBACK_IN_PROGRESS",ROLLBACK_SUCCEEDED:"ROLLBACK_SUCCEEDED",SUCCEEDED:"SUCCEEDED"};var US=e=>({...e,...e.BuildCommand&&{BuildCommand:J},...e.StartCommand&&{StartCommand:J},...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:J},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:J}}),$S=e=>({...e,...e.CodeConfigurationValues&&{CodeConfigurationValues:US(e.CodeConfigurationValues)}}),LS=e=>({...e,...e.CodeConfiguration&&{CodeConfiguration:$S(e.CodeConfiguration)}}),MS=e=>({...e,...e.RuntimeEnvironmentVariables&&{RuntimeEnvironmentVariables:J},...e.StartCommand&&{StartCommand:J},...e.RuntimeEnvironmentSecrets&&{RuntimeEnvironmentSecrets:J}}),BS=e=>({...e,...e.ImageConfiguration&&{ImageConfiguration:MS(e.ImageConfiguration)}}),Zi=e=>({...e,...e.CodeRepository&&{CodeRepository:LS(e.CodeRepository)},...e.ImageRepository&&{ImageRepository:BS(e.ImageRepository)}}),Wf=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Zi(e.SourceConfiguration)}}),cs=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Zi(e.SourceConfiguration)}}),Kf=e=>({...e,...e.Service&&{Service:cs(e.Service)}}),Yf=e=>({...e,...e.Service&&{Service:cs(e.Service)}}),Jf=e=>({...e,...e.Service&&{Service:cs(e.Service)}});var Xf=e=>({...e,...e.SourceConfiguration&&{SourceConfiguration:Zi(e.SourceConfiguration)}}),Qf=e=>({...e,...e.Service&&{Service:cs(e.Service)}});var Zf=async(e,t)=>{let r=Qt("CreateService"),n;return n=JSON.stringify(I(e)),Xt(t,r,"/",void 0,n)};var em=async(e,t)=>{let r=Qt("DeleteService"),n;return n=JSON.stringify(I(e)),Xt(t,r,"/",void 0,n)};var tm=async(e,t)=>{let r=Qt("DescribeService"),n;return n=JSON.stringify(I(e)),Xt(t,r,"/",void 0,n)};var rm=async(e,t)=>{let r=Qt("ListOperations"),n;return n=JSON.stringify(I(e)),Xt(t,r,"/",void 0,n)},nm=async(e,t)=>{let r=Qt("ListServices"),n;return n=JSON.stringify(I(e)),Xt(t,r,"/",void 0,n)};var om=async(e,t)=>{let r=Qt("TagResource"),n;return n=JSON.stringify(I(e)),Xt(t,r,"/",void 0,n)};var sm=async(e,t)=>{let r=Qt("UpdateService"),n;return n=JSON.stringify(I(e)),Xt(t,r,"/",void 0,n)};var im=async(e,t)=>{if(e.statusCode>=300)return qS(e,t);let r=await Bt(e.body,t),n={};return n=YS(r,t),{$metadata:we(e),...n}},qS=async(e,t)=>{let r={...e,body:await Zt(e.body,t)},n=er(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Kt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Yt(r,t);case"ServiceQuotaExceededException":case"com.amazonaws.apprunner#ServiceQuotaExceededException":throw await KS(r,t);default:let o=r.body;return Jt({output:e,parsedBody:o,errorCode:n})}};var am=async(e,t)=>{if(e.statusCode>=300)return zS(e,t);let r=await Bt(e.body,t),n={};return n=JS(r,t),{$metadata:we(e),...n}},zS=async(e,t)=>{let r={...e,body:await Zt(e.body,t)},n=er(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Kt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Yt(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await ea(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await Bn(r,t);default:let o=r.body;return Jt({output:e,parsedBody:o,errorCode:n})}};var cm=async(e,t)=>{if(e.statusCode>=300)return VS(e,t);let r=await Bt(e.body,t),n={};return n=XS(r,t),{$metadata:we(e),...n}},VS=async(e,t)=>{let r={...e,body:await Zt(e.body,t)},n=er(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Kt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Yt(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await Bn(r,t);default:let o=r.body;return Jt({output:e,parsedBody:o,errorCode:n})}};var dm=async(e,t)=>{if(e.statusCode>=300)return jS(e,t);let r=await Bt(e.body,t),n={};return n=QS(r,t),{$metadata:we(e),...n}},jS=async(e,t)=>{let r={...e,body:await Zt(e.body,t)},n=er(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Kt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Yt(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await Bn(r,t);default:let o=r.body;return Jt({output:e,parsedBody:o,errorCode:n})}},lm=async(e,t)=>{if(e.statusCode>=300)return GS(e,t);let r=await Bt(e.body,t),n={};return n=ZS(r,t),{$metadata:we(e),...n}},GS=async(e,t)=>{let r={...e,body:await Zt(e.body,t)},n=er(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Kt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Yt(r,t);default:let o=r.body;return Jt({output:e,parsedBody:o,errorCode:n})}};var um=async(e,t)=>{if(e.statusCode>=300)return HS(e,t);let r=await Bt(e.body,t),n={};return n=I(r),{$metadata:we(e),...n}},HS=async(e,t)=>{let r={...e,body:await Zt(e.body,t)},n=er(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Kt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Yt(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await ea(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await Bn(r,t);default:let o=r.body;return Jt({output:e,parsedBody:o,errorCode:n})}};var pm=async(e,t)=>{if(e.statusCode>=300)return WS(e,t);let r=await Bt(e.body,t),n={};return n=oC(r,t),{$metadata:we(e),...n}},WS=async(e,t)=>{let r={...e,body:await Zt(e.body,t)},n=er(e,r.body);switch(n){case"InternalServiceErrorException":case"com.amazonaws.apprunner#InternalServiceErrorException":throw await Kt(r,t);case"InvalidRequestException":case"com.amazonaws.apprunner#InvalidRequestException":throw await Yt(r,t);case"InvalidStateException":case"com.amazonaws.apprunner#InvalidStateException":throw await ea(r,t);case"ResourceNotFoundException":case"com.amazonaws.apprunner#ResourceNotFoundException":throw await Bn(r,t);default:let o=r.body;return Jt({output:e,parsedBody:o,errorCode:n})}};var Kt=async(e,t)=>{let r=e.body,n=I(r),o=new Yr({$metadata:we(e),...n});return S(o,r)},Yt=async(e,t)=>{let r=e.body,n=I(r),o=new Jr({$metadata:we(e),...n});return S(o,r)},ea=async(e,t)=>{let r=e.body,n=I(r),o=new Xr({$metadata:we(e),...n});return S(o,r)},Bn=async(e,t)=>{let r=e.body,n=I(r),o=new Zr({$metadata:we(e),...n});return S(o,r)},KS=async(e,t)=>{let r=e.body,n=I(r),o=new Qr({$metadata:we(e),...n});return S(o,r)};var YS=(e,t)=>v(e,{OperationId:y,Service:r=>ds(r,t)});var JS=(e,t)=>v(e,{OperationId:y,Service:r=>ds(r,t)});var XS=(e,t)=>v(e,{Service:r=>ds(r,t)});var QS=(e,t)=>v(e,{NextToken:y,OperationSummaryList:r=>tC(r,t)}),ZS=(e,t)=>v(e,{NextToken:y,ServiceSummaryList:r=>nC(r,t)});var eC=(e,t)=>v(e,{EndedAt:r=>j(je(fe(r))),Id:y,StartedAt:r=>j(je(fe(r))),Status:y,TargetArn:y,Type:y,UpdatedAt:r=>j(je(fe(r)))}),tC=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>eC(n,t));var ds=(e,t)=>v(e,{AutoScalingConfigurationSummary:I,CreatedAt:r=>j(je(fe(r))),DeletedAt:r=>j(je(fe(r))),EncryptionConfiguration:I,HealthCheckConfiguration:I,InstanceConfiguration:I,NetworkConfiguration:I,ObservabilityConfiguration:I,ServiceArn:y,ServiceId:y,ServiceName:y,ServiceUrl:y,SourceConfiguration:I,Status:y,UpdatedAt:r=>j(je(fe(r)))}),rC=(e,t)=>v(e,{CreatedAt:r=>j(je(fe(r))),ServiceArn:y,ServiceId:y,ServiceName:y,ServiceUrl:y,Status:y,UpdatedAt:r=>j(je(fe(r)))}),nC=(e,t)=>(e||[]).filter(n=>n!=null).map(n=>rC(n,t)),oC=(e,t)=>v(e,{OperationId:y,Service:r=>ds(r,t)});var we=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),sC=(e=new Uint8Array,t)=>e instanceof Uint8Array?Promise.resolve(e):t.streamCollector(e)||Promise.resolve(new Uint8Array),iC=(e,t)=>sC(e,t).then(r=>t.utf8Encoder(r)),Jt=vt(Ee),Xt=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new he(d)};function Qt(e){return{"content-type":"application/x-amz-json-1.0","x-amz-target":`AppRunner.${e}`}}var Bt=(e,t)=>iC(e,t).then(r=>r.length?JSON.parse(r):{}),Zt=async(e,t)=>{let r=await Bt(e,t);return r.message=r.message??r.Message,r},er=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var tn=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,tn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"CreateServiceCommand",inputFilterSensitiveLog:Wf,outputFilterSensitiveLog:Kf},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Zf(t,r)}deserialize(t,r){return im(t,r)}};var rn=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,rn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"DeleteServiceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:Yf},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return em(t,r)}deserialize(t,r){return am(t,r)}};var nn=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,nn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"DescribeServiceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:Jf},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return tm(t,r)}deserialize(t,r){return cm(t,r)}};var on=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,on.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"ListOperationsCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return rm(t,r)}deserialize(t,r){return dm(t,r)}};var sn=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,sn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"ListServicesCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return nm(t,r)}deserialize(t,r){return lm(t,r)}};var an=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,an.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"TagResourceCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return om(t,r)}deserialize(t,r){return um(t,r)}};var cn=class extends O{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(P(r,this.serialize,this.deserialize)),this.middlewareStack.use(D(r,cn.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"AppRunnerClient",commandName:"UpdateServiceCommand",inputFilterSensitiveLog:Xf,outputFilterSensitiveLog:Qf},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return sm(t,r)}deserialize(t,r){return pm(t,r)}};var Nm=be(ar());var U=be(ar());function hm(e,{validation:t,intOnly:r}={}){let n=(0,U.getInput)(e,{required:!1,trimWhitespace:!0});if(!n)return;let o=r?Number.parseInt(n):Number.parseFloat(n);if(isNaN(o))throw new Error(`${e} value is not a valid number: ${n}`);if(t!=null&&t.min&&t.min>o)throw new Error(`${e} value (${o}) is less then the allowed minimum (${t.min})`);if(t!=null&&t.max&&t.max<o)throw new Error(`${e} value (${o}) is greater then the allowed maximum (${t.max})`);return o}function ta(e,t,{validation:r,intOnly:n}={}){return hm(e,{validation:r,intOnly:n})??t}function aC(e,t){return(0,U.getInput)(e,{required:!1,trimWhitespace:!0})||t}function fm(e,t){let r=(0,U.getInput)(e,{required:!1,...t});return r.length>0?r:void 0}function cC(e,t){let r=(0,U.getInput)(e,{required:!1,trimWhitespace:!0});return r?["1","true"].includes(r.toLowerCase()):t}function ym(){let e=(0,U.getInput)("action",{required:!1,trimWhitespace:!0});switch(e.toLowerCase()||"create_or_update"){case"create_or_update":return dC();default:throw new Error(`Unsupported action: ${e}`)}}function dC(){let e="create_or_update",t=(0,U.getInput)("service",{required:!0,trimWhitespace:!0}),r=ta("port",80,{intOnly:!0}),n=aC("region","us-east-1"),o=cC("wait-for-service-stability",!1),s=hm("wait-for-service-stability-seconds",{validation:{min:10,max:3600},intOnly:!0}),i=ta("cpu",1),a=ta("memory",2),c=(0,U.getInput)("image",{required:!1,trimWhitespace:!0}),d=(0,U.getMultilineInput)("copy-env-vars",{required:!1}),l=(0,U.getMultilineInput)("copy-secret-env-vars",{required:!1}),u=(0,U.getInput)("tags",{required:!1}),p=fm("auto-scaling-config-arn",{trimWhitespace:!0}),f=fm("instance-role-arn",{trimWhitespace:!0});return{action:e,serviceName:t,region:n,port:r,waitForService:o||!!s,waitTimeout:s??600,cpu:i,memory:a,sourceConfig:c?uC(c):pC(),environment:mm(d),environmentSecret:mm(l),tags:mC(u),autoScalingConfigArn:p,instanceRoleArn:f}}function lC(){let e=(0,U.getInput)("branch",{required:!1})||"main";return e.startsWith("refs/")?e.split("/")[2]:e}function uC(e){if((0,U.getInput)("repo",{required:!1}))throw new Error("Either docker image registry or code repository expected, not both");return{sourceType:"image",imageUri:e,accessRoleArn:(0,U.getInput)("access-role-arn",{required:!0})}}function pC(){return{sourceType:"code",sourceConnectionArn:(0,U.getInput)("source-connection-arn",{required:!0}),repoUrl:(0,U.getInput)("repo",{required:!0}),branch:lC(),runtime:fC(),buildCommand:(0,U.getInput)("build-command",{required:!0}),startCommand:(0,U.getInput)("start-command",{required:!0})}}function fC(){let e=(0,U.getInput)("runtime",{required:!0}),t=e.toUpperCase();if(!Object.keys(as).includes(t))throw new Error(`Specified runtime (${e}) does not belong to the supported range: ${JSON.stringify(Object.keys(as))}`);return as[t]}function mm(e){if(e.length>0){let t=e.reduce((r,n)=>{let o=process.env[n];return o!==void 0&&(r[n]=o),r},{});if(Object.keys(t).length>0)return t}}function mC(e){if(!e.length)return[];let t=JSON.parse(e);return Object.keys(t).reduce((r,n)=>[...r,{Key:n,Value:t[n]}],[])}var se=be(ar());function gm(e){return new tn({ServiceName:e.serviceName,InstanceConfiguration:{Cpu:`${e.cpu} vCPU`,Memory:`${e.memory} GB`,InstanceRoleArn:e.instanceRoleArn},AutoScalingConfigurationArn:e.autoScalingConfigArn,SourceConfiguration:e.sourceConfig.sourceType=="image"?Rm(e.port,e.sourceConfig,e.environment,e.environmentSecret):bm(e.port,e.sourceConfig,e.environment,e.environmentSecret),Tags:e.tags})}function Em(e,t){return new cn({ServiceArn:e,InstanceConfiguration:{Cpu:`${t.cpu} vCPU`,Memory:`${t.memory} GB`,InstanceRoleArn:t.instanceRoleArn},AutoScalingConfigurationArn:t.autoScalingConfigArn,SourceConfiguration:t.sourceConfig.sourceType=="image"?Rm(t.port,t.sourceConfig,t.environment,t.environmentSecret):bm(t.port,t.sourceConfig,t.environment,t.environmentSecret)})}function wm(e,t){return new an({ResourceArn:e,Tags:t.tags})}function xm(e){return new rn({ServiceArn:e})}function Sm(e){return new nn({ServiceArn:e})}function Cm(e){return new sn({NextToken:e})}function _m(e){return new on({ServiceArn:e})}function hC(e){return e.startsWith("public.ecr")?Qi.ECR_PUBLIC:Qi.ECR}function bm(e,t,r,n){return{AuthenticationConfiguration:{ConnectionArn:t.sourceConnectionArn},AutoDeploymentsEnabled:!0,CodeRepository:{RepositoryUrl:t.repoUrl,SourceCodeVersion:{Type:"BRANCH",Value:t.branch},CodeConfiguration:{ConfigurationSource:"API",CodeConfigurationValues:{Runtime:t.runtime,BuildCommand:t.buildCommand,StartCommand:t.startCommand,Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:n}}}}}function Rm(e,t,r,n){return{AuthenticationConfiguration:{AccessRoleArn:t.accessRoleArn},ImageRepository:{ImageIdentifier:t.imageUri,ImageRepositoryType:hC(t.imageUri),ImageConfiguration:{Port:`${e}`,RuntimeEnvironmentVariables:r,RuntimeEnvironmentSecrets:n}}}}function yC(e){return new Promise(t=>setTimeout(t,e))}async function Am(e,t){let r;do{let n=await e.send(Cm(r));if(r=n.NextToken,n.ServiceSummaryList){for(let o of n.ServiceSummaryList)if(o.ServiceName===t&&o.ServiceArn)return(0,se.info)(`Discovered ${t} (${o.ServiceArn}) with the following status: ${o.Status}`),{ServiceArn:o.ServiceArn,Status:o.Status}}}while(r)}async function vm(e,t){(0,se.info)(`Creating service ${t.serviceName}`);let r=gm(t);return(await e.send(r)).Service}async function gC(e,t,r){(0,se.info)(`Updating existing service ${t.serviceName} (${r})`);let n=Em(r,t);return await e.send(n)}async function EC(e,t,r){if((0,se.info)(`Updating tags service ${t.serviceName} (${r})`),t.tags.length){let n=wm(r,t);await e.send(n)}}async function wC(e,t,r){(0,se.info)(`Deleting existing service ${t.serviceName} (${r})`);let n=xm(r),o=await e.send(n);(0,se.info)(`Delete service response: ${JSON.stringify(o.Service)}`)}async function xC(e,t){let r=_m(t);return(await e.send(r)).OperationSummaryList}async function SC(e,t,r){if(!t)throw new Error(`Failed to create or update service ${e.serviceName} - App Runner Client returned an empty response`);let n=t.ServiceId;if(n)(0,se.info)(`Service ID: ${n}`);else throw new Error(`App Runner Client returned an empty ServiceId for ${e.serviceName}`);let o=t.ServiceArn;if(o)(0,se.info)(`Service ARN: ${o}`);else throw new Error(`App Runner Client returned an empty ServiceArn for ${e.serviceName}`);let s=t.ServiceUrl??"";return s===""?(0,se.info)(`App Runner Client returned an empty ServiceUrl for ${e.serviceName}, this could happen if the deployment is of an AWS App Runner Private Service`):(0,se.info)(`Service URL: ${s}`),{ServiceId:n,ServiceArn:o,ServiceUrl:s,OperationId:r}}async function Im(e,t,r){let n,o;if(r)if((0,se.info)(`Existing service info: ${JSON.stringify(r)}`),r.Status===en.CREATE_FAILED){await wC(e,t,r.ServiceArn);let s=await ra(e,r.ServiceArn,900);if(s===en.DELETED)n=await vm(e,t);else throw new Error(`Failed to delete service ${t.serviceName} (${r.ServiceArn}). Its current status is ${s}`)}else{await EC(e,t,r.ServiceArn);let s=await gC(e,t,r.ServiceArn);n=s.Service,o=s.OperationId}else n=await vm(e,t);return SC(t,n,o)}async function CC(e,t){let n=(await e.send(Sm(t))).Service;if(!n)throw new Error(`App Runner Client returned an empty Service for ${t}`);return{ServiceArn:t,Status:n.Status}}async function Tm(e,t,r){let n=await xC(e,t);if(n){for(let o of n)if(r===o.Id&&o.Status!==Hf.SUCCEEDED)throw new Error(`Operation ${r} is not successful. Its current status is ${o.Status}`)}}async function ra(e,t,r){let n=new Date(new Date().getTime()+r*1e3).getTime(),o=en.OPERATION_IN_PROGRESS;for((0,se.info)(`Waiting for ${t} to reach stable state`);o===en.OPERATION_IN_PROGRESS&&n>=new Date().getTime();){let s=new Date().getTime();if(o=(await CC(e,t)).Status,o!==en.OPERATION_IN_PROGRESS)return(0,se.info)(`Service ${t} has reached the stable state ${o}`),o;let c=1e3-(new Date().getTime()-s);c>0&&await yC(c)}throw new Error(`Service ${t} did not reach stable state within ${r} seconds`)}var Om="2.5.0";async function Pm(){try{let e=ym(),t=new is({region:e.region}),r=await Am(t,e.serviceName),n=await Im(t,e,r);(0,xe.setOutput)("service-id",n.ServiceId),(0,xe.setOutput)("service-arn",n.ServiceArn),(0,xe.setOutput)("service-url",n.ServiceUrl),e.waitForService?(await ra(t,n.ServiceArn,e.waitTimeout),r&&n.OperationId&&await Tm(t,n.ServiceArn,n.OperationId)):(0,xe.info)(`Service ${n.ServiceId} has started an update. Watch for its progress in the AppRunner console`)}catch(e){e instanceof Error?((0,xe.setFailed)(e.message),(0,Nm.debug)(e.stack??"no stack info")):(0,xe.setFailed)(JSON.stringify(e))}}require.main===module&&((0,xe.info)(`Version: ${Om??"undefined"}`),Pm().then(()=>{(0,xe.info)("App Runner step - DONE!")}).catch(e=>{(0,xe.setFailed)(`App Runner unhandled exception: ${e.message}`)}));0&&(module.exports={run});
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
